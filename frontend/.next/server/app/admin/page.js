(()=>{var m={};m.id=3,m.ids=[3],m.modules={2934:m=>{"use strict";m.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:m=>{"use strict";m.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:m=>{"use strict";m.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:m=>{"use strict";m.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7412:(m,b,x)=>{"use strict";x.r(b),x.d(b,{GlobalError:()=>a.a,__next_app__:()=>c,originalPathname:()=>o,pages:()=>l,routeModule:()=>d,tree:()=>r}),x(4753),x(5116),x(5866);var e=x(3191),n=x(8716),s=x(7922),a=x.n(s),t=x(5231),i={};for(let m in t)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(m)&&(i[m]=()=>t[m]);x.d(b,i);let r=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(x.t.bind(x,4753,23)),"/app/frontend/src/app/admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(x.bind(x,5116)),"/app/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(x.t.bind(x,5866,23)),"next/dist/client/components/not-found-error"]}],l=["/app/frontend/src/app/admin/page.tsx"],o="/admin/page",c={require:x,loadChunk:()=>Promise.resolve()},d=new e.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:r}})},4372:(m,b,x)=>{Promise.resolve().then(x.t.bind(x,2994,23)),Promise.resolve().then(x.t.bind(x,6114,23)),Promise.resolve().then(x.t.bind(x,9727,23)),Promise.resolve().then(x.t.bind(x,9671,23)),Promise.resolve().then(x.t.bind(x,1868,23)),Promise.resolve().then(x.t.bind(x,4759,23))},1267:(m,b,x)=>{Promise.resolve().then(x.bind(x,381)),Promise.resolve().then(x.bind(x,5777))},5303:()=>{},5777:(m,b,x)=>{"use strict";x.d(b,{default:()=>d});var e=x(326),n=x(7577),s=x(434),a=x(982),t=x(8518),i=x(165),r=x(874),l=x(8939),o=x(2591),c=x(7477);function d(){let[m,b]=(0,n.useState)(!1),x=[{href:"/",label:"In\xedcio",icon:a.Z},{href:"/establishments",label:"Locais",icon:t.Z},{href:"/profile",label:"Perfil",icon:i.Z},{href:"/admin",label:"Admin",icon:r.Z}];return e.jsx("header",{className:"fixed top-0 left-0 right-0 bg-white shadow-sm border-b border-secondary-200 z-40",children:(0,e.jsxs)("div",{className:"container mx-auto px-4",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,e.jsxs)(s.default,{href:"/",className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-600 to-autism-friendly rounded-lg flex items-center justify-center",children:e.jsx(l.Z,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-accessible-xl font-bold text-secondary-800",children:"TEIA"})]}),e.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:x.map(m=>(0,e.jsxs)(s.default,{href:m.href,className:"flex items-center space-x-1 text-accessible-base text-secondary-600 hover:text-primary-600 transition-colors",children:[e.jsx(m.icon,{className:"w-5 h-5"}),e.jsx("span",{children:m.label})]},m.href))}),e.jsx("button",{onClick:()=>b(!m),className:"md:hidden p-2 rounded-lg hover:bg-secondary-100 transition-colors","aria-label":"Toggle menu",children:m?e.jsx(o.Z,{className:"w-6 h-6 text-secondary-600"}):e.jsx(c.Z,{className:"w-6 h-6 text-secondary-600"})})]}),m&&e.jsx("div",{className:"md:hidden border-t border-secondary-200 py-4",children:e.jsx("nav",{className:"space-y-2",children:x.map(m=>(0,e.jsxs)(s.default,{href:m.href,className:"flex items-center space-x-3 px-4 py-3 text-accessible-base text-secondary-600 hover:bg-secondary-50 hover:text-primary-600 rounded-lg transition-colors",onClick:()=>b(!1),children:[e.jsx(m.icon,{className:"w-5 h-5"}),e.jsx("span",{children:m.label})]},m.href))})})]})})}},4753:()=>{throw Error('Module build failed (from ./node_modules/next/dist/build/webpack/loaders/next-swc-loader.js):\nError: \n  \x1b[31mx\x1b[0m the name `ESTABLISHMENT_TYPES` is defined multiple times\n     ,-[\x1b[36;1;4m/app/frontend/src/app/admin/page.tsx\x1b[0m:40:1]\n \x1b[2m 40\x1b[0m |   language_preference: string\n \x1b[2m 41\x1b[0m | }\n \x1b[2m 42\x1b[0m | \n \x1b[2m 43\x1b[0m | const ESTABLISHMENT_TYPES = {\n     : \x1b[31;1m      ^^^^^^^^^|^^^^^^^^^\x1b[0m\n     :                \x1b[31;1m`-- \x1b[31;1mprevious definition of `ESTABLISHMENT_TYPES` here\x1b[0m\x1b[0m\n \x1b[2m 44\x1b[0m |   hotel: \'Hotel\',\n \x1b[2m 45\x1b[0m |   restaurant: \'Restaurante\',\n \x1b[2m 46\x1b[0m |   attraction: \'Atra\xe7\xe3o\',\n \x1b[2m 47\x1b[0m |   event: \'Evento\',\n \x1b[2m 48\x1b[0m |   shopping: \'Compras\',\n \x1b[2m 49\x1b[0m |   transport: \'Transporte\'\n \x1b[2m 50\x1b[0m | }\n \x1b[2m 51\x1b[0m | \n \x1b[2m 52\x1b[0m | const ACCESSIBILITY_FEATURES = {\n \x1b[2m 53\x1b[0m |   quiet_spaces: \'Espa\xe7os Silenciosos\',\n \x1b[2m 54\x1b[0m |   sensory_rooms: \'Salas Sensoriais\',\n \x1b[2m 55\x1b[0m |   low_lighting: \'Ilumina\xe7\xe3o Reduzida\',\n \x1b[2m 56\x1b[0m |   trained_staff: \'Equipe Treinada\',\n \x1b[2m 57\x1b[0m |   visual_schedules: \'Hor\xe1rios Visuais\',\n \x1b[2m 58\x1b[0m |   noise_reduction: \'Redu\xe7\xe3o de Ru\xeddo\',\n \x1b[2m 59\x1b[0m |   calm_environment: \'Ambiente Calmo\',\n \x1b[2m 60\x1b[0m |   flexible_timing: \'Hor\xe1rios Flex\xedveis\'\n \x1b[2m 61\x1b[0m | }\n \x1b[2m 62\x1b[0m | \n \x1b[2m 63\x1b[0m | const DAYS_OF_WEEK = {\n \x1b[2m 64\x1b[0m |   monday: \'Segunda-feira\',\n \x1b[2m 65\x1b[0m |   tuesday: \'Ter\xe7a-feira\',\n \x1b[2m 66\x1b[0m |   wednesday: \'Quarta-feira\',\n \x1b[2m 67\x1b[0m |   thursday: \'Quinta-feira\',\n \x1b[2m 68\x1b[0m |   friday: \'Sexta-feira\',\n \x1b[2m 69\x1b[0m |   saturday: \'S\xe1bado\',\n \x1b[2m 70\x1b[0m |   sunday: \'Domingo\'\n \x1b[2m 71\x1b[0m | }\n \x1b[2m 72\x1b[0m | \n \x1b[2m 73\x1b[0m | export default function AdminPage() {\n \x1b[2m 74\x1b[0m |   const [activeTab, setActiveTab] = useState<\'establishments\' | \'users\'>(\'establishments\')\n \x1b[2m 75\x1b[0m |   const [establishments, setEstablishments] = useState<Establishment[]>([])\n \x1b[2m 76\x1b[0m |   const [users, setUsers] = useState<User[]>([])\n \x1b[2m 77\x1b[0m |   const [showForm, setShowForm] = useState(false)\n \x1b[2m 78\x1b[0m |   const [editingId, setEditingId] = useState<string | null>(null)\n \x1b[2m 79\x1b[0m |   const [loading, setLoading] = useState(false)\n \x1b[2m 80\x1b[0m |   const [selectedImages, setSelectedImages] = useState<string[]>([])\n \x1b[2m 81\x1b[0m | \n \x1b[2m 82\x1b[0m |   const { register, handleSubmit, reset, setValue, watch, formState: { errors } } = useForm<Establishment>()\n \x1b[2m 83\x1b[0m | \n \x1b[2m 84\x1b[0m |   useEffect(() => {\n \x1b[2m 85\x1b[0m |     fetchEstablishments()\n \x1b[2m 86\x1b[0m |     fetchUsers()\n \x1b[2m 87\x1b[0m |   }, [])\n \x1b[2m 88\x1b[0m | \n \x1b[2m 89\x1b[0m |   const fetchEstablishments = async () => {\n \x1b[2m 90\x1b[0m |     try {\n \x1b[2m 91\x1b[0m |       const response = await fetch(\'/api/establishments\')\n \x1b[2m 92\x1b[0m |       if (response.ok) {\n \x1b[2m 93\x1b[0m |         const data = await response.json()\n \x1b[2m 94\x1b[0m |         setEstablishments(data)\n \x1b[2m 95\x1b[0m |       }\n \x1b[2m 96\x1b[0m |     } catch (error) {\n \x1b[2m 97\x1b[0m |       console.error(\'Error fetching establishments:\', error)\n \x1b[2m 98\x1b[0m |       toast.error(\'Erro ao carregar estabelecimentos\')\n \x1b[2m 99\x1b[0m |     }\n \x1b[2m100\x1b[0m |   }\n \x1b[2m101\x1b[0m | \n \x1b[2m102\x1b[0m |   const fetchUsers = async () => {\n \x1b[2m103\x1b[0m |     try {\n \x1b[2m104\x1b[0m |       const response = await fetch(\'/api/users\')\n \x1b[2m105\x1b[0m |       if (response.ok) {\n \x1b[2m106\x1b[0m |         const data = await response.json()\n \x1b[2m107\x1b[0m |         setUsers(data)\n \x1b[2m108\x1b[0m |       }\n \x1b[2m109\x1b[0m |     } catch (error) {\n \x1b[2m110\x1b[0m |       console.error(\'Error fetching users:\', error)\n \x1b[2m111\x1b[0m |       // toast.error(\'Erro ao carregar usu\xe1rios\')\n \x1b[2m112\x1b[0m |     }\n \x1b[2m113\x1b[0m |   }\n \x1b[2m114\x1b[0m | \n \x1b[2m115\x1b[0m |   const onSubmit = async (data: Establishment) => {\n \x1b[2m116\x1b[0m |     setLoading(true)\n \x1b[2m117\x1b[0m |     try {\n \x1b[2m118\x1b[0m |       // Add selected images to the data\n \x1b[2m119\x1b[0m |       const formData = {\n \x1b[2m120\x1b[0m |         ...data,\n \x1b[2m121\x1b[0m |         images: selectedImages,\n \x1b[2m122\x1b[0m |         coordinates: {\n \x1b[2m123\x1b[0m |           lat: Number(data.coordinates.lat) || 37.0,\n \x1b[2m124\x1b[0m |           lng: Number(data.coordinates.lng) || -8.0\n \x1b[2m125\x1b[0m |         }\n \x1b[2m126\x1b[0m |       }\n \x1b[2m127\x1b[0m | \n \x1b[2m128\x1b[0m |       let response\n \x1b[2m129\x1b[0m |       if (editingId) {\n \x1b[2m130\x1b[0m |         response = await fetch(`/api/establishments/${editingId}`, {\n \x1b[2m131\x1b[0m |           method: \'PUT\',\n \x1b[2m132\x1b[0m |           headers: { \'Content-Type\': \'application/json\' },\n \x1b[2m133\x1b[0m |           body: JSON.stringify(formData)\n \x1b[2m134\x1b[0m |         })\n \x1b[2m135\x1b[0m |       } else {\n \x1b[2m136\x1b[0m |         response = await fetch(\'/api/establishments\', {\n \x1b[2m137\x1b[0m |           method: \'POST\',\n \x1b[2m138\x1b[0m |           headers: { \'Content-Type\': \'application/json\' },\n \x1b[2m139\x1b[0m |           body: JSON.stringify(formData)\n \x1b[2m140\x1b[0m |         })\n \x1b[2m141\x1b[0m |       }\n \x1b[2m142\x1b[0m | \n \x1b[2m143\x1b[0m |       if (response.ok) {\n \x1b[2m144\x1b[0m |         toast.success(editingId ? \'Estabelecimento atualizado!\' : \'Estabelecimento criado!\')\n \x1b[2m145\x1b[0m |         fetchEstablishments()\n \x1b[2m146\x1b[0m |         handleCancel()\n \x1b[2m147\x1b[0m |       } else {\n \x1b[2m148\x1b[0m |         toast.error(\'Erro ao salvar estabelecimento\')\n \x1b[2m149\x1b[0m |       }\n \x1b[2m150\x1b[0m |     } catch (error) {\n \x1b[2m151\x1b[0m |       console.error(\'Error saving establishment:\', error)\n \x1b[2m152\x1b[0m |       toast.error(\'Erro ao salvar estabelecimento\')\n \x1b[2m153\x1b[0m |     } finally {\n \x1b[2m154\x1b[0m |       setLoading(false)\n \x1b[2m155\x1b[0m |     }\n \x1b[2m156\x1b[0m |   }\n \x1b[2m157\x1b[0m | \n \x1b[2m158\x1b[0m |   const handleEdit = (establishment: Establishment) => {\n \x1b[2m159\x1b[0m |     setEditingId(establishment.id || null)\n \x1b[2m160\x1b[0m |     setShowForm(true)\n \x1b[2m161\x1b[0m |     setSelectedImages(establishment.images || [])\n \x1b[2m162\x1b[0m |     \n \x1b[2m163\x1b[0m |     // Populate form with existing data\n \x1b[2m164\x1b[0m |     Object.keys(establishment).forEach((key) => {\n \x1b[2m165\x1b[0m |       if (key === \'coordinates\') {\n \x1b[2m166\x1b[0m |         setValue(\'coordinates.lat\', establishment.coordinates.lat)\n \x1b[2m167\x1b[0m |         setValue(\'coordinates.lng\', establishment.coordinates.lng)\n \x1b[2m168\x1b[0m |       } else {\n \x1b[2m169\x1b[0m |         setValue(key as keyof Establishment, establishment[key as keyof Establishment])\n \x1b[2m170\x1b[0m |       }\n \x1b[2m171\x1b[0m |     })\n \x1b[2m172\x1b[0m |   }\n \x1b[2m173\x1b[0m | \n \x1b[2m174\x1b[0m |   const handleDelete = async (id: string) => {\n \x1b[2m175\x1b[0m |     if (!confirm(\'Tem certeza que deseja excluir este estabelecimento?\')) return\n \x1b[2m176\x1b[0m | \n \x1b[2m177\x1b[0m |     try {\n \x1b[2m178\x1b[0m |       const response = await fetch(`/api/establishments/${id}`, {\n \x1b[2m179\x1b[0m |         method: \'DELETE\'\n \x1b[2m180\x1b[0m |       })\n \x1b[2m181\x1b[0m | \n \x1b[2m182\x1b[0m |       if (response.ok) {\n \x1b[2m183\x1b[0m |         toast.success(\'Estabelecimento exclu\xeddo!\')\n \x1b[2m184\x1b[0m |         fetchEstablishments()\n \x1b[2m185\x1b[0m |       } else {\n \x1b[2m186\x1b[0m |         toast.error(\'Erro ao excluir estabelecimento\')\n \x1b[2m187\x1b[0m |       }\n \x1b[2m188\x1b[0m |     } catch (error) {\n \x1b[2m189\x1b[0m |       console.error(\'Error deleting establishment:\', error)\n \x1b[2m190\x1b[0m |       toast.error(\'Erro ao excluir estabelecimento\')\n \x1b[2m191\x1b[0m |     }\n \x1b[2m192\x1b[0m |   }\n \x1b[2m193\x1b[0m | \n \x1b[2m194\x1b[0m |   const handleCancel = () => {\n \x1b[2m195\x1b[0m |     setShowForm(false)\n \x1b[2m196\x1b[0m |     setEditingId(null)\n \x1b[2m197\x1b[0m |     setSelectedImages([])\n \x1b[2m198\x1b[0m |     reset()\n \x1b[2m199\x1b[0m |   }\n \x1b[2m200\x1b[0m | \n \x1b[2m201\x1b[0m |   const handleImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n \x1b[2m202\x1b[0m |     const files = event.target.files\n \x1b[2m203\x1b[0m |     if (!files) return\n \x1b[2m204\x1b[0m | \n \x1b[2m205\x1b[0m |     Array.from(files).forEach((file) => {\n \x1b[2m206\x1b[0m |       const reader = new FileReader()\n \x1b[2m207\x1b[0m |       reader.onload = (e) => {\n \x1b[2m208\x1b[0m |         const base64 = e.target?.result as string\n \x1b[2m209\x1b[0m |         const base64Data = base64.split(\',\')[1] // Remove data:image/jpeg;base64, prefix\n \x1b[2m210\x1b[0m |         setSelectedImages(prev => [...prev, base64Data])\n \x1b[2m211\x1b[0m |       }\n \x1b[2m212\x1b[0m |       reader.readAsDataURL(file)\n \x1b[2m213\x1b[0m |     })\n \x1b[2m214\x1b[0m |   }\n \x1b[2m215\x1b[0m | \n \x1b[2m216\x1b[0m |   const removeImage = (index: number) => {\n \x1b[2m217\x1b[0m |     setSelectedImages(prev => prev.filter((_, i) => i !== index))\n \x1b[2m218\x1b[0m |   }\n \x1b[2m219\x1b[0m | \n \x1b[2m220\x1b[0m |   const handleFeatureToggle = (feature: string) => {\n \x1b[2m221\x1b[0m |     const currentFeatures = watch(\'accessibility_features\') || []\n \x1b[2m222\x1b[0m |     const newFeatures = currentFeatures.includes(feature)\n \x1b[2m223\x1b[0m |       ? currentFeatures.filter(f => f !== feature)\n \x1b[2m224\x1b[0m |       : [...currentFeatures, feature]\n \x1b[2m225\x1b[0m |     setValue(\'accessibility_features\', newFeatures)\n \x1b[2m226\x1b[0m |   }\n \x1b[2m227\x1b[0m | \n \x1b[2m228\x1b[0m |   return (\n \x1b[2m229\x1b[0m |     <div className="container mx-auto px-4 py-8">\n \x1b[2m230\x1b[0m |       {/* Header */}\n \x1b[2m231\x1b[0m |       <div className="mb-8">\n \x1b[2m232\x1b[0m |         <h1 className="text-accessible-2xl font-bold text-secondary-800 mb-2">\n \x1b[2m233\x1b[0m |           Painel Administrativo - TEIA\n \x1b[2m234\x1b[0m |         </h1>\n \x1b[2m235\x1b[0m |         <p className="text-accessible-base text-secondary-600 mb-4">\n \x1b[2m236\x1b[0m |           Gerencie estabelecimentos e usu\xe1rios da plataforma\n \x1b[2m237\x1b[0m |         </p>\n \x1b[2m238\x1b[0m |         \n \x1b[2m239\x1b[0m |         {/* Admin Info Banner */}\n \x1b[2m240\x1b[0m |         <div className="bg-primary-50 border border-primary-200 rounded-lg p-4 mb-6">\n \x1b[2m241\x1b[0m |           <h3 className="font-semibold text-primary-800 mb-2">\uD83D\uDD10 \xc1rea Administrativa</h3>\n \x1b[2m242\x1b[0m |           <div className="text-primary-700 text-accessible-base space-y-1">\n \x1b[2m243\x1b[0m |             <p><strong>Estabelecimentos:</strong> Apenas administradores podem adicionar, editar e excluir estabelecimentos</p>\n \x1b[2m244\x1b[0m |             <p><strong>Usu\xe1rios:</strong> Apenas administradores podem criar perfis de usu\xe1rios</p>\n \x1b[2m245\x1b[0m |             <p><strong>Papel dos Usu\xe1rios:</strong> Usu\xe1rios podem visualizar estabelecimentos, deixar avalia\xe7\xf5es e coment\xe1rios</p>\n \x1b[2m246\x1b[0m |           </div>\n \x1b[2m247\x1b[0m |         </div>\n \x1b[2m248\x1b[0m |       </div>\n \x1b[2m249\x1b[0m | \n \x1b[2m250\x1b[0m |       {/* Tabs */}\n \x1b[2m251\x1b[0m |       <div className="flex space-x-1 mb-8 bg-secondary-100 p-1 rounded-lg">\n \x1b[2m252\x1b[0m |         <button\n \x1b[2m253\x1b[0m |           onClick={() => setActiveTab(\'establishments\')}\n \x1b[2m254\x1b[0m |           className={`flex items-center px-4 py-2 rounded-md text-accessible-base font-medium transition-colors ${\n \x1b[2m255\x1b[0m |             activeTab === \'establishments\'\n \x1b[2m256\x1b[0m |               ? \'bg-white text-primary-600 shadow-sm\'\n \x1b[2m257\x1b[0m |               : \'text-secondary-600 hover:text-secondary-800\'\n \x1b[2m258\x1b[0m |           }`}\n \x1b[2m259\x1b[0m |         >\n \x1b[2m260\x1b[0m |           <BuildingOfficeIcon className="w-5 h-5 mr-2" />\n \x1b[2m261\x1b[0m |           Estabelecimentos ({establishments.length})\n \x1b[2m262\x1b[0m |         </button>\n \x1b[2m263\x1b[0m |         <button\n \x1b[2m264\x1b[0m |           onClick={() => setActiveTab(\'users\')}\n \x1b[2m265\x1b[0m |           className={`flex items-center px-4 py-2 rounded-md text-accessible-base font-medium transition-colors ${\n \x1b[2m266\x1b[0m |             activeTab === \'users\'\n \x1b[2m267\x1b[0m |               ? \'bg-white text-primary-600 shadow-sm\'\n \x1b[2m268\x1b[0m |               : \'text-secondary-600 hover:text-secondary-800\'\n \x1b[2m269\x1b[0m |           }`}\n \x1b[2m270\x1b[0m |         >\n \x1b[2m271\x1b[0m |           <UsersIcon className="w-5 h-5 mr-2" />\n \x1b[2m272\x1b[0m |           Usu\xe1rios ({users.length})\n \x1b[2m273\x1b[0m |         </button>\n \x1b[2m274\x1b[0m |       </div>\n \x1b[2m275\x1b[0m | \n \x1b[2m276\x1b[0m |       {/* Establishments Tab */}\n \x1b[2m277\x1b[0m |       {activeTab === \'establishments\' && (\n \x1b[2m278\x1b[0m |         <>\n \x1b[2m279\x1b[0m |           <div className="flex items-center justify-between mb-6">\n \x1b[2m280\x1b[0m |             <h2 className="text-accessible-xl font-semibold text-secondary-800">\n \x1b[2m281\x1b[0m |               Gest\xe3o de Estabelecimentos\n \x1b[2m282\x1b[0m |             </h2>\n \x1b[2m283\x1b[0m |             <button\n \x1b[2m284\x1b[0m |               onClick={() => setShowForm(true)}\n \x1b[2m285\x1b[0m |               className="btn btn-primary flex items-center"\n \x1b[2m286\x1b[0m |             >\n \x1b[2m287\x1b[0m |               <PlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m288\x1b[0m |               Novo Estabelecimento\n \x1b[2m289\x1b[0m |             </button>\n \x1b[2m290\x1b[0m |           </div>\n \x1b[2m291\x1b[0m | \n \x1b[2m292\x1b[0m |           {/* Establishments List */}\n \x1b[2m293\x1b[0m |           <div className="space-y-4">\n \x1b[2m294\x1b[0m |             {establishments.map((establishment) => (\n \x1b[2m295\x1b[0m |               <div key={establishment.id} className="card hover:shadow-lg transition-shadow">\n \x1b[2m296\x1b[0m |                 <div className="flex items-start justify-between">\n \x1b[2m297\x1b[0m |                   <div className="flex-1">\n \x1b[2m298\x1b[0m |                     <div className="flex items-center mb-2">\n \x1b[2m299\x1b[0m |                       <h3 className="text-accessible-lg font-semibold text-secondary-800 mr-3">\n \x1b[2m300\x1b[0m |                         {establishment.name}\n \x1b[2m301\x1b[0m |                       </h3>\n \x1b[2m302\x1b[0m |                       {establishment.certified_autism_friendly && (\n \x1b[2m303\x1b[0m |                         <ShieldCheckIcon className="w-5 h-5 text-green-600" />\n \x1b[2m304\x1b[0m |                       )}\n \x1b[2m305\x1b[0m |                       <span className="ml-2 bg-secondary-100 text-secondary-700 px-2 py-1 rounded text-accessible-sm">\n \x1b[2m306\x1b[0m |                         {ESTABLISHMENT_TYPES[establishment.type as keyof typeof ESTABLISHMENT_TYPES]}\n \x1b[2m307\x1b[0m |                       </span>\n \x1b[2m308\x1b[0m |                     </div>\n \x1b[2m309\x1b[0m |                     \n \x1b[2m310\x1b[0m |                     <p className="text-secondary-600 text-accessible-base mb-2 line-clamp-2">\n \x1b[2m311\x1b[0m |                       {establishment.description}\n \x1b[2m312\x1b[0m |                     </p>\n \x1b[2m313\x1b[0m |                     \n \x1b[2m314\x1b[0m |                     <div className="flex items-center text-accessible-sm text-secondary-500">\n \x1b[2m315\x1b[0m |                       <MapPinIcon className="w-4 h-4 mr-1" />\n \x1b[2m316\x1b[0m |                       {establishment.address}\n \x1b[2m317\x1b[0m |                     </div>\n \x1b[2m318\x1b[0m |                     \n \x1b[2m319\x1b[0m |                     {establishment.accessibility_features.length > 0 && (\n \x1b[2m320\x1b[0m |                       <div className="mt-2 flex flex-wrap gap-1">\n \x1b[2m321\x1b[0m |                         {establishment.accessibility_features.slice(0, 3).map((feature) => (\n \x1b[2m322\x1b[0m |                           <span\n \x1b[2m323\x1b[0m |                             key={feature}\n \x1b[2m324\x1b[0m |                             className="text-xs bg-autism-friendly text-secondary-700 px-2 py-1 rounded"\n \x1b[2m325\x1b[0m |                           >\n \x1b[2m326\x1b[0m |                             {ACCESSIBILITY_FEATURES[feature as keyof typeof ACCESSIBILITY_FEATURES] || feature}\n \x1b[2m327\x1b[0m |                           </span>\n \x1b[2m328\x1b[0m |                         ))}\n \x1b[2m329\x1b[0m |                         {establishment.accessibility_features.length > 3 && (\n \x1b[2m330\x1b[0m |                           <span className="text-xs text-secondary-500">\n \x1b[2m331\x1b[0m |                             +{establishment.accessibility_features.length - 3} mais\n \x1b[2m332\x1b[0m |                           </span>\n \x1b[2m333\x1b[0m |                         )}\n \x1b[2m334\x1b[0m |                       </div>\n \x1b[2m335\x1b[0m |                     )}\n \x1b[2m336\x1b[0m |                   </div>\n \x1b[2m337\x1b[0m |                   \n \x1b[2m338\x1b[0m |                   <div className="flex space-x-2 ml-4">\n \x1b[2m339\x1b[0m |                     <button\n \x1b[2m340\x1b[0m |                       onClick={() => handleEdit(establishment)}\n \x1b[2m341\x1b[0m |                       className="p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors"\n \x1b[2m342\x1b[0m |                     >\n \x1b[2m343\x1b[0m |                       <PencilIcon className="w-5 h-5" />\n \x1b[2m344\x1b[0m |                     </button>\n \x1b[2m345\x1b[0m |                     <button\n \x1b[2m346\x1b[0m |                       onClick={() => handleDelete(establishment.id!)}\n \x1b[2m347\x1b[0m |                       className="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"\n \x1b[2m348\x1b[0m |                     >\n \x1b[2m349\x1b[0m |                       <TrashIcon className="w-5 h-5" />\n \x1b[2m350\x1b[0m |                     </button>\n \x1b[2m351\x1b[0m |                   </div>\n \x1b[2m352\x1b[0m |                 </div>\n \x1b[2m353\x1b[0m |               </div>\n \x1b[2m354\x1b[0m |             ))}\n \x1b[2m355\x1b[0m |           </div>\n \x1b[2m356\x1b[0m | \n \x1b[2m357\x1b[0m |           {establishments.length === 0 && (\n \x1b[2m358\x1b[0m |             <div className="text-center py-12">\n \x1b[2m359\x1b[0m |               <BuildingOfficeIcon className="w-16 h-16 text-secondary-300 mx-auto mb-4" />\n \x1b[2m360\x1b[0m |               <h3 className="text-accessible-xl font-semibold text-secondary-600 mb-2">\n \x1b[2m361\x1b[0m |                 Nenhum estabelecimento cadastrado\n \x1b[2m362\x1b[0m |               </h3>\n \x1b[2m363\x1b[0m |               <p className="text-accessible-base text-secondary-500 mb-4">\n \x1b[2m364\x1b[0m |                 Comece criando seu primeiro estabelecimento autism-friendly\n \x1b[2m365\x1b[0m |               </p>\n \x1b[2m366\x1b[0m |               <button\n \x1b[2m367\x1b[0m |                 onClick={() => setShowForm(true)}\n \x1b[2m368\x1b[0m |                 className="btn btn-primary"\n \x1b[2m369\x1b[0m |               >\n \x1b[2m370\x1b[0m |                 Criar Primeiro Estabelecimento\n \x1b[2m371\x1b[0m |               </button>\n \x1b[2m372\x1b[0m |             </div>\n \x1b[2m373\x1b[0m |           )}\n \x1b[2m374\x1b[0m |         </>\n \x1b[2m375\x1b[0m |       )}\n \x1b[2m376\x1b[0m | \n \x1b[2m377\x1b[0m |       {/* Users Tab */}\n \x1b[2m378\x1b[0m |       {activeTab === \'users\' && (\n \x1b[2m379\x1b[0m |         <>\n \x1b[2m380\x1b[0m |           <div className="flex items-center justify-between mb-6">\n \x1b[2m381\x1b[0m |             <h2 className="text-accessible-xl font-semibold text-secondary-800">\n \x1b[2m382\x1b[0m |               Gest\xe3o de Usu\xe1rios\n \x1b[2m383\x1b[0m |             </h2>\n \x1b[2m384\x1b[0m |             <button\n \x1b[2m385\x1b[0m |               onClick={() => window.location.href = \'/profile\'}\n \x1b[2m386\x1b[0m |               className="btn btn-primary flex items-center"\n \x1b[2m387\x1b[0m |             >\n \x1b[2m388\x1b[0m |               <UserPlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m389\x1b[0m |               Criar Usu\xe1rio\n \x1b[2m390\x1b[0m |             </button>\n \x1b[2m391\x1b[0m |           </div>\n \x1b[2m392\x1b[0m | \n \x1b[2m393\x1b[0m |           {/* Users List */}\n \x1b[2m394\x1b[0m |           <div className="space-y-4">\n \x1b[2m395\x1b[0m |             {users.map((user) => (\n \x1b[2m396\x1b[0m |               <div key={user.id} className="card hover:shadow-lg transition-shadow">\n \x1b[2m397\x1b[0m |                 <div className="flex items-start justify-between">\n \x1b[2m398\x1b[0m |                   <div className="flex-1">\n \x1b[2m399\x1b[0m |                     <h3 className="text-accessible-lg font-semibold text-secondary-800 mb-1">\n \x1b[2m400\x1b[0m |                       {user.name || \'Nome n\xe3o informado\'}\n \x1b[2m401\x1b[0m |                     </h3>\n \x1b[2m402\x1b[0m |                     <p className="text-secondary-600 text-accessible-base mb-2">\n \x1b[2m403\x1b[0m |                       {user.email || \'Email n\xe3o informado\'}\n \x1b[2m404\x1b[0m |                     </p>\n \x1b[2m405\x1b[0m |                     <div className="flex items-center text-accessible-sm text-secondary-500">\n \x1b[2m406\x1b[0m |                       <span className="mr-4">\n \x1b[2m407\x1b[0m |                         Idioma: {user.language_preference === \'pt\' ? \'\uD83C\uDDF5\uD83C\uDDF9 Portugu\xeas\' : \'\uD83C\uDDEC\uD83C\uDDE7 English\'}\n \x1b[2m408\x1b[0m |                       </span>\n \x1b[2m409\x1b[0m |                       {user.sensory_profile && (\n \x1b[2m410\x1b[0m |                         <span>\n \x1b[2m411\x1b[0m |                           Perfil sensorial configurado âœ“\n \x1b[2m412\x1b[0m |                         </span>\n \x1b[2m413\x1b[0m |                       )}\n \x1b[2m414\x1b[0m |                     </div>\n \x1b[2m415\x1b[0m |                   </div>\n \x1b[2m416\x1b[0m |                   \n \x1b[2m417\x1b[0m |                   <div className="flex space-x-2 ml-4">\n \x1b[2m418\x1b[0m |                     <button\n \x1b[2m419\x1b[0m |                       onClick={() => window.location.href = \'/profile\'}\n \x1b[2m420\x1b[0m |                       className="p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors"\n \x1b[2m421\x1b[0m |                       title="Editar usu\xe1rio"\n \x1b[2m422\x1b[0m |                     >\n \x1b[2m423\x1b[0m |                       <PencilIcon className="w-5 h-5" />\n \x1b[2m424\x1b[0m |                     </button>\n \x1b[2m425\x1b[0m |                   </div>\n \x1b[2m426\x1b[0m |                 </div>\n \x1b[2m427\x1b[0m |               </div>\n \x1b[2m428\x1b[0m |             ))}\n \x1b[2m429\x1b[0m |           </div>\n \x1b[2m430\x1b[0m | \n \x1b[2m431\x1b[0m |           {users.length === 0 && (\n \x1b[2m432\x1b[0m |             <div className="text-center py-12">\n \x1b[2m433\x1b[0m |               <UsersIcon className="w-16 h-16 text-secondary-300 mx-auto mb-4" />\n \x1b[2m434\x1b[0m |               <h3 className="text-accessible-xl font-semibold text-secondary-600 mb-2">\n \x1b[2m435\x1b[0m |                 Nenhum usu\xe1rio cadastrado\n \x1b[2m436\x1b[0m |               </h3>\n \x1b[2m437\x1b[0m |               <p className="text-accessible-base text-secondary-500 mb-4">\n \x1b[2m438\x1b[0m |                 Crie perfis para usu\xe1rios que utilizar\xe3o a plataforma\n \x1b[2m439\x1b[0m |               </p>\n \x1b[2m440\x1b[0m |               <button\n \x1b[2m441\x1b[0m |                 onClick={() => window.location.href = \'/profile\'}\n \x1b[2m442\x1b[0m |                 className="btn btn-primary"\n \x1b[2m443\x1b[0m |               >\n \x1b[2m444\x1b[0m |                 Criar Primeiro Usu\xe1rio\n \x1b[2m445\x1b[0m |               </button>\n \x1b[2m446\x1b[0m |             </div>\n \x1b[2m447\x1b[0m |           )}\n \x1b[2m448\x1b[0m |         </>\n \x1b[2m449\x1b[0m |       )}\n \x1b[2m450\x1b[0m | \n \x1b[2m451\x1b[0m |       {/* Form Modal - Only for Establishments */}\n \x1b[2m452\x1b[0m |       {showForm && (\n \x1b[2m453\x1b[0m |         <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">\n \x1b[2m454\x1b[0m |           <div className="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">\n \x1b[2m455\x1b[0m |             <div className="p-6">\n \x1b[2m456\x1b[0m |               <div className="flex items-center justify-between mb-6">\n \x1b[2m457\x1b[0m |                 <h2 className="text-accessible-xl font-semibold text-secondary-800">\n \x1b[2m458\x1b[0m |                   {editingId ? \'Editar Estabelecimento\' : \'Novo Estabelecimento\'}\n \x1b[2m459\x1b[0m |                 </h2>\n \x1b[2m460\x1b[0m |                 <button\n \x1b[2m461\x1b[0m |                   onClick={handleCancel}\n \x1b[2m462\x1b[0m |                   className="p-2 hover:bg-secondary-100 rounded-lg"\n \x1b[2m463\x1b[0m |                 >\n \x1b[2m464\x1b[0m |                   <XMarkIcon className="w-6 h-6 text-secondary-600" />\n \x1b[2m465\x1b[0m |                 </button>\n \x1b[2m466\x1b[0m |               </div>\n \x1b[2m467\x1b[0m | \n \x1b[2m468\x1b[0m |               <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">\n \x1b[2m469\x1b[0m |                 {/* Basic Information */}\n \x1b[2m470\x1b[0m |                 <div className="grid grid-cols-1 md:grid-cols-2 gap-6">\n \x1b[2m471\x1b[0m |                   <div>\n \x1b[2m472\x1b[0m |                     <label className="label">Nome *</label>\n \x1b[2m473\x1b[0m |                     <input\n \x1b[2m474\x1b[0m |                       {...register(\'name\', { required: \'Nome \xe9 obrigat\xf3rio\' })}\n \x1b[2m475\x1b[0m |                       className="input"\n \x1b[2m476\x1b[0m |                       placeholder="Nome do estabelecimento"\n \x1b[2m477\x1b[0m |                     />\n \x1b[2m478\x1b[0m |                     {errors.name && (\n \x1b[2m479\x1b[0m |                       <p className="text-red-500 text-accessible-sm mt-1">{errors.name.message}</p>\n \x1b[2m480\x1b[0m |                     )}\n \x1b[2m481\x1b[0m |                   </div>\n \x1b[2m482\x1b[0m | \n \x1b[2m483\x1b[0m |                   <div>\n \x1b[2m484\x1b[0m |                     <label className="label">Tipo *</label>\n \x1b[2m485\x1b[0m |                     <select\n \x1b[2m486\x1b[0m |                       {...register(\'type\', { required: \'Tipo \xe9 obrigat\xf3rio\' })}\n \x1b[2m487\x1b[0m |                       className="input"\n \x1b[2m488\x1b[0m |                     >\n \x1b[2m489\x1b[0m |                       <option value="">Selecione o tipo</option>\n \x1b[2m490\x1b[0m |                       {Object.entries(ESTABLISHMENT_TYPES).map(([value, label]) => (\n \x1b[2m491\x1b[0m |                         <option key={value} value={value}>{label}</option>\n \x1b[2m492\x1b[0m |                       ))}\n \x1b[2m493\x1b[0m |                     </select>\n \x1b[2m494\x1b[0m |                     {errors.type && (\n \x1b[2m495\x1b[0m |                       <p className="text-red-500 text-accessible-sm mt-1">{errors.type.message}</p>\n \x1b[2m496\x1b[0m |                     )}\n \x1b[2m497\x1b[0m |                   </div>\n \x1b[2m498\x1b[0m |                 </div>\n \x1b[2m499\x1b[0m | \n \x1b[2m500\x1b[0m |                 <div>\n \x1b[2m501\x1b[0m |                   <label className="label">Descri\xe7\xe3o *</label>\n \x1b[2m502\x1b[0m |                   <textarea\n \x1b[2m503\x1b[0m |                     {...register(\'description\', { required: \'Descri\xe7\xe3o \xe9 obrigat\xf3ria\' })}\n \x1b[2m504\x1b[0m |                     className="input"\n \x1b[2m505\x1b[0m |                     rows={3}\n \x1b[2m506\x1b[0m |                     placeholder="Descri\xe7\xe3o detalhada do estabelecimento"\n \x1b[2m507\x1b[0m |                   />\n \x1b[2m508\x1b[0m |                   {errors.description && (\n \x1b[2m509\x1b[0m |                     <p className="text-red-500 text-accessible-sm mt-1">{errors.description.message}</p>\n \x1b[2m510\x1b[0m |                   )}\n \x1b[2m511\x1b[0m |                 </div>\n \x1b[2m512\x1b[0m | \n \x1b[2m513\x1b[0m |                 <div>\n \x1b[2m514\x1b[0m |                   <label className="label">Endere\xe7o *</label>\n \x1b[2m515\x1b[0m |                   <input\n \x1b[2m516\x1b[0m |                     {...register(\'address\', { required: \'Endere\xe7o \xe9 obrigat\xf3rio\' })}\n \x1b[2m517\x1b[0m |                     className="input"\n \x1b[2m518\x1b[0m |                     placeholder="Endere\xe7o completo"\n \x1b[2m519\x1b[0m |                   />\n \x1b[2m520\x1b[0m |                   {errors.address && (\n \x1b[2m521\x1b[0m |                     <p className="text-red-500 text-accessible-sm mt-1">{errors.address.message}</p>\n \x1b[2m522\x1b[0m |                   )}\n \x1b[2m523\x1b[0m |                 </div>\n \x1b[2m524\x1b[0m | \n \x1b[2m525\x1b[0m |                 {/* Coordinates */}\n \x1b[2m526\x1b[0m |                 <div className="grid grid-cols-1 md:grid-cols-2 gap-6">\n \x1b[2m527\x1b[0m |                   <div>\n \x1b[2m528\x1b[0m |                     <label className="label">Latitude</label>\n \x1b[2m529\x1b[0m |                     <input\n \x1b[2m530\x1b[0m |                       {...register(\'coordinates.lat\')}\n \x1b[2m531\x1b[0m |                       type="number"\n \x1b[2m532\x1b[0m |                       step="any"\n \x1b[2m533\x1b[0m |                       className="input"\n \x1b[2m534\x1b[0m |                       placeholder="37.0"\n \x1b[2m535\x1b[0m |                     />\n \x1b[2m536\x1b[0m |                   </div>\n \x1b[2m537\x1b[0m |                   <div>\n \x1b[2m538\x1b[0m |                     <label className="label">Longitude</label>\n \x1b[2m539\x1b[0m |                     <input\n \x1b[2m540\x1b[0m |                       {...register(\'coordinates.lng\')}\n \x1b[2m541\x1b[0m |                       type="number"\n \x1b[2m542\x1b[0m |                       step="any"\n \x1b[2m543\x1b[0m |                       className="input"\n \x1b[2m544\x1b[0m |                       placeholder="-8.0"\n \x1b[2m545\x1b[0m |                     />\n \x1b[2m546\x1b[0m |                   </div>\n \x1b[2m547\x1b[0m |                 </div>\n \x1b[2m548\x1b[0m | \n \x1b[2m549\x1b[0m |                 {/* Certification */}\n \x1b[2m550\x1b[0m |                 <div>\n \x1b[2m551\x1b[0m |                   <label className="flex items-center">\n \x1b[2m552\x1b[0m |                     <input\n \x1b[2m553\x1b[0m |                       {...register(\'certified_autism_friendly\')}\n \x1b[2m554\x1b[0m |                       type="checkbox"\n \x1b[2m555\x1b[0m |                       className="mr-3 w-4 h-4 text-primary-600 rounded focus:ring-primary-500"\n \x1b[2m556\x1b[0m |                     />\n \x1b[2m557\x1b[0m |                     <ShieldCheckIcon className="w-5 h-5 text-green-600 mr-2" />\n \x1b[2m558\x1b[0m |                     <span className="label mb-0">Certificado Autism Friendly</span>\n \x1b[2m559\x1b[0m |                   </label>\n \x1b[2m560\x1b[0m |                 </div>\n \x1b[2m561\x1b[0m | \n \x1b[2m562\x1b[0m |                 {/* Accessibility Features */}\n \x1b[2m563\x1b[0m |                 <div>\n \x1b[2m564\x1b[0m |                   <label className="label">Recursos de Acessibilidade</label>\n \x1b[2m565\x1b[0m |                   <div className="grid grid-cols-2 md:grid-cols-3 gap-3">\n \x1b[2m566\x1b[0m |                     {Object.entries(ACCESSIBILITY_FEATURES).map(([feature, label]) => (\n \x1b[2m567\x1b[0m |                       <label key={feature} className="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-secondary-50">\n \x1b[2m568\x1b[0m |                         <input\n \x1b[2m569\x1b[0m |                           type="checkbox"\n \x1b[2m570\x1b[0m |                           checked={watch(\'accessibility_features\')?.includes(feature) || false}\n \x1b[2m571\x1b[0m |                           onChange={() => handleFeatureToggle(feature)}\n \x1b[2m572\x1b[0m |                           className="mr-3 w-4 h-4 text-primary-600 rounded focus:ring-primary-500"\n \x1b[2m573\x1b[0m |                         />\n \x1b[2m574\x1b[0m |                         <span className="text-accessible-sm">{label}</span>\n \x1b[2m575\x1b[0m |                       </label>\n \x1b[2m576\x1b[0m |                     ))}\n \x1b[2m577\x1b[0m |                   </div>\n \x1b[2m578\x1b[0m |                 </div>\n \x1b[2m579\x1b[0m | \n \x1b[2m580\x1b[0m |                 {/* Contact Information */}\n \x1b[2m581\x1b[0m |                 <div>\n \x1b[2m582\x1b[0m |                   <label className="label">Informa\xe7\xf5es de Contato</label>\n \x1b[2m583\x1b[0m |                   <div className="grid grid-cols-1 md:grid-cols-3 gap-4">\n \x1b[2m584\x1b[0m |                     <input\n \x1b[2m585\x1b[0m |                       {...register(\'contact_info.phone\')}\n \x1b[2m586\x1b[0m |                       className="input"\n \x1b[2m587\x1b[0m |                       placeholder="Telefone"\n \x1b[2m588\x1b[0m |                     />\n \x1b[2m589\x1b[0m |                     <input\n \x1b[2m590\x1b[0m |                       {...register(\'contact_info.email\')}\n \x1b[2m591\x1b[0m |                       type="email"\n \x1b[2m592\x1b[0m |                       className="input"\n \x1b[2m593\x1b[0m |                       placeholder="Email"\n \x1b[2m594\x1b[0m |                     />\n \x1b[2m595\x1b[0m |                     <input\n \x1b[2m596\x1b[0m |                       {...register(\'contact_info.website\')}\n \x1b[2m597\x1b[0m |                       className="input"\n \x1b[2m598\x1b[0m |                       placeholder="Website"\n \x1b[2m599\x1b[0m |                     />\n \x1b[2m600\x1b[0m |                   </div>\n \x1b[2m601\x1b[0m |                 </div>\n \x1b[2m602\x1b[0m | \n \x1b[2m603\x1b[0m |                 {/* Opening Hours */}\n \x1b[2m604\x1b[0m |                 <div>\n \x1b[2m605\x1b[0m |                   <label className="label">Hor\xe1rios de Funcionamento</label>\n \x1b[2m606\x1b[0m |                   <div className="grid grid-cols-1 md:grid-cols-2 gap-4">\n \x1b[2m607\x1b[0m |                     {Object.entries(DAYS_OF_WEEK).map(([day, label]) => (\n \x1b[2m608\x1b[0m |                       <div key={day} className="flex items-center space-x-2">\n \x1b[2m609\x1b[0m |                         <span className="w-24 text-accessible-sm">{label}:</span>\n \x1b[2m610\x1b[0m |                         <input\n \x1b[2m611\x1b[0m |                           {...register(`opening_hours.${day}` as const)}\n \x1b[2m612\x1b[0m |                           className="input flex-1"\n \x1b[2m613\x1b[0m |                           placeholder="09:00-18:00"\n \x1b[2m614\x1b[0m |                         />\n \x1b[2m615\x1b[0m |                       </div>\n \x1b[2m616\x1b[0m |                     ))}\n \x1b[2m617\x1b[0m |                   </div>\n \x1b[2m618\x1b[0m |                 </div>\n \x1b[2m619\x1b[0m | \n \x1b[2m620\x1b[0m |                 {/* Images */}\n \x1b[2m621\x1b[0m |                 <div>\n \x1b[2m622\x1b[0m |                   <label className="label">Imagens</label>\n \x1b[2m623\x1b[0m |                   <div className="border-2 border-dashed border-secondary-300 rounded-lg p-6">\n \x1b[2m624\x1b[0m |                     <input\n \x1b[2m625\x1b[0m |                       type="file"\n \x1b[2m626\x1b[0m |                       multiple\n \x1b[2m627\x1b[0m |                       accept="image/*"\n \x1b[2m628\x1b[0m |                       onChange={handleImageUpload}\n \x1b[2m629\x1b[0m |                       className="hidden"\n \x1b[2m630\x1b[0m |                       id="image-upload"\n \x1b[2m631\x1b[0m |                     />\n \x1b[2m632\x1b[0m |                     <label\n \x1b[2m633\x1b[0m |                       htmlFor="image-upload"\n \x1b[2m634\x1b[0m |                       className="flex flex-col items-center cursor-pointer"\n \x1b[2m635\x1b[0m |                     >\n \x1b[2m636\x1b[0m |                       <PhotoIcon className="w-12 h-12 text-secondary-400 mb-2" />\n \x1b[2m637\x1b[0m |                       <span className="text-accessible-base text-secondary-600">\n \x1b[2m638\x1b[0m |                         Clique para selecionar imagens\n \x1b[2m639\x1b[0m |                       </span>\n \x1b[2m640\x1b[0m |                     </label>\n \x1b[2m641\x1b[0m |                   </div>\n \x1b[2m642\x1b[0m | \n \x1b[2m643\x1b[0m |                   {/* Selected Images Preview */}\n \x1b[2m644\x1b[0m |                   {selectedImages.length > 0 && (\n \x1b[2m645\x1b[0m |                     <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">\n \x1b[2m646\x1b[0m |                       {selectedImages.map((image, index) => (\n \x1b[2m647\x1b[0m |                         <div key={index} className="relative">\n \x1b[2m648\x1b[0m |                           <img\n \x1b[2m649\x1b[0m |                             src={`data:image/jpeg;base64,${image}`}\n \x1b[2m650\x1b[0m |                             alt={`Preview ${index + 1}`}\n \x1b[2m651\x1b[0m |                             className="w-full h-24 object-cover rounded-lg"\n \x1b[2m652\x1b[0m |                           />\n \x1b[2m653\x1b[0m |                           <button\n \x1b[2m654\x1b[0m |                             type="button"\n \x1b[2m655\x1b[0m |                             onClick={() => removeImage(index)}\n \x1b[2m656\x1b[0m |                             className="absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600"\n \x1b[2m657\x1b[0m |                           >\n \x1b[2m658\x1b[0m |                             <XMarkIcon className="w-4 h-4" />\n \x1b[2m659\x1b[0m |                           </button>\n \x1b[2m660\x1b[0m |                         </div>\n \x1b[2m661\x1b[0m |                       ))}\n \x1b[2m662\x1b[0m |                     </div>\n \x1b[2m663\x1b[0m |                   )}\n \x1b[2m664\x1b[0m |                 </div>\n \x1b[2m665\x1b[0m | \n \x1b[2m666\x1b[0m |                 {/* Form Actions */}\n \x1b[2m667\x1b[0m |                 <div className="flex justify-end space-x-4 pt-6 border-t">\n \x1b[2m668\x1b[0m |                   <button\n \x1b[2m669\x1b[0m |                     type="button"\n \x1b[2m670\x1b[0m |                     onClick={handleCancel}\n \x1b[2m671\x1b[0m |                     className="btn btn-secondary"\n \x1b[2m672\x1b[0m |                   >\n \x1b[2m673\x1b[0m |                     Cancelar\n \x1b[2m674\x1b[0m |                   </button>\n \x1b[2m675\x1b[0m |                   <button\n \x1b[2m676\x1b[0m |                     type="submit"\n \x1b[2m677\x1b[0m |                     disabled={loading}\n \x1b[2m678\x1b[0m |                     className="btn btn-primary flex items-center"\n \x1b[2m679\x1b[0m |                   >\n \x1b[2m680\x1b[0m |                     {loading ? (\n \x1b[2m681\x1b[0m |                       <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"></div>\n \x1b[2m682\x1b[0m |                     ) : (\n \x1b[2m683\x1b[0m |                       <PlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m684\x1b[0m |                     )}\n \x1b[2m685\x1b[0m |                     {editingId ? \'Atualizar\' : \'Criar\'} Estabelecimento\n \x1b[2m686\x1b[0m |                   </button>\n \x1b[2m687\x1b[0m |                 </div>\n \x1b[2m688\x1b[0m |               </form>\n \x1b[2m689\x1b[0m |             </div>\n \x1b[2m690\x1b[0m |           </div>\n \x1b[2m691\x1b[0m |         </div>\n \x1b[2m692\x1b[0m |       )}\n \x1b[2m693\x1b[0m |     </div>\n \x1b[2m694\x1b[0m |   )\n \x1b[2m695\x1b[0m | }\n \x1b[2m696\x1b[0m | \n \x1b[2m697\x1b[0m | interface Establishment {\n \x1b[2m698\x1b[0m |   id?: string\n \x1b[2m699\x1b[0m |   name: string\n \x1b[2m700\x1b[0m |   type: string\n \x1b[2m701\x1b[0m |   description: string\n \x1b[2m702\x1b[0m |   address: string\n \x1b[2m703\x1b[0m |   coordinates: { lat: number; lng: number }\n \x1b[2m704\x1b[0m |   accessibility_features: string[]\n \x1b[2m705\x1b[0m |   certified_autism_friendly: boolean\n \x1b[2m706\x1b[0m |   contact_info: { [key: string]: string }\n \x1b[2m707\x1b[0m |   opening_hours: { [key: string]: string }\n \x1b[2m708\x1b[0m |   special_hours: string[]\n \x1b[2m709\x1b[0m |   sensory_info: { [key: string]: any }\n \x1b[2m710\x1b[0m |   images: string[]\n \x1b[2m711\x1b[0m | }\n \x1b[2m712\x1b[0m | \n \x1b[2m713\x1b[0m | const ESTABLISHMENT_TYPES = {\n     : \x1b[33;1m      ^^^^^^^^^|^^^^^^^^^\x1b[0m\n     :                \x1b[33;1m`-- \x1b[33;1m`ESTABLISHMENT_TYPES` redefined here\x1b[0m\x1b[0m\n \x1b[2m714\x1b[0m |   hotel: \'Hotel\',\n \x1b[2m715\x1b[0m |   restaurant: \'Restaurante\',\n \x1b[2m716\x1b[0m |   attraction: \'Atra\xe7\xe3o\',\n     `----\n\n  \x1b[31mx\x1b[0m the name `ACCESSIBILITY_FEATURES` is defined multiple times\n     ,-[\x1b[36;1;4m/app/frontend/src/app/admin/page.tsx\x1b[0m:49:1]\n \x1b[2m 49\x1b[0m |   transport: \'Transporte\'\n \x1b[2m 50\x1b[0m | }\n \x1b[2m 51\x1b[0m | \n \x1b[2m 52\x1b[0m | const ACCESSIBILITY_FEATURES = {\n     : \x1b[31;1m      ^^^^^^^^^^^|^^^^^^^^^^\x1b[0m\n     :                  \x1b[31;1m`-- \x1b[31;1mprevious definition of `ACCESSIBILITY_FEATURES` here\x1b[0m\x1b[0m\n \x1b[2m 53\x1b[0m |   quiet_spaces: \'Espa\xe7os Silenciosos\',\n \x1b[2m 54\x1b[0m |   sensory_rooms: \'Salas Sensoriais\',\n \x1b[2m 55\x1b[0m |   low_lighting: \'Ilumina\xe7\xe3o Reduzida\',\n \x1b[2m 56\x1b[0m |   trained_staff: \'Equipe Treinada\',\n \x1b[2m 57\x1b[0m |   visual_schedules: \'Hor\xe1rios Visuais\',\n \x1b[2m 58\x1b[0m |   noise_reduction: \'Redu\xe7\xe3o de Ru\xeddo\',\n \x1b[2m 59\x1b[0m |   calm_environment: \'Ambiente Calmo\',\n \x1b[2m 60\x1b[0m |   flexible_timing: \'Hor\xe1rios Flex\xedveis\'\n \x1b[2m 61\x1b[0m | }\n \x1b[2m 62\x1b[0m | \n \x1b[2m 63\x1b[0m | const DAYS_OF_WEEK = {\n \x1b[2m 64\x1b[0m |   monday: \'Segunda-feira\',\n \x1b[2m 65\x1b[0m |   tuesday: \'Ter\xe7a-feira\',\n \x1b[2m 66\x1b[0m |   wednesday: \'Quarta-feira\',\n \x1b[2m 67\x1b[0m |   thursday: \'Quinta-feira\',\n \x1b[2m 68\x1b[0m |   friday: \'Sexta-feira\',\n \x1b[2m 69\x1b[0m |   saturday: \'S\xe1bado\',\n \x1b[2m 70\x1b[0m |   sunday: \'Domingo\'\n \x1b[2m 71\x1b[0m | }\n \x1b[2m 72\x1b[0m | \n \x1b[2m 73\x1b[0m | export default function AdminPage() {\n \x1b[2m 74\x1b[0m |   const [activeTab, setActiveTab] = useState<\'establishments\' | \'users\'>(\'establishments\')\n \x1b[2m 75\x1b[0m |   const [establishments, setEstablishments] = useState<Establishment[]>([])\n \x1b[2m 76\x1b[0m |   const [users, setUsers] = useState<User[]>([])\n \x1b[2m 77\x1b[0m |   const [showForm, setShowForm] = useState(false)\n \x1b[2m 78\x1b[0m |   const [editingId, setEditingId] = useState<string | null>(null)\n \x1b[2m 79\x1b[0m |   const [loading, setLoading] = useState(false)\n \x1b[2m 80\x1b[0m |   const [selectedImages, setSelectedImages] = useState<string[]>([])\n \x1b[2m 81\x1b[0m | \n \x1b[2m 82\x1b[0m |   const { register, handleSubmit, reset, setValue, watch, formState: { errors } } = useForm<Establishment>()\n \x1b[2m 83\x1b[0m | \n \x1b[2m 84\x1b[0m |   useEffect(() => {\n \x1b[2m 85\x1b[0m |     fetchEstablishments()\n \x1b[2m 86\x1b[0m |     fetchUsers()\n \x1b[2m 87\x1b[0m |   }, [])\n \x1b[2m 88\x1b[0m | \n \x1b[2m 89\x1b[0m |   const fetchEstablishments = async () => {\n \x1b[2m 90\x1b[0m |     try {\n \x1b[2m 91\x1b[0m |       const response = await fetch(\'/api/establishments\')\n \x1b[2m 92\x1b[0m |       if (response.ok) {\n \x1b[2m 93\x1b[0m |         const data = await response.json()\n \x1b[2m 94\x1b[0m |         setEstablishments(data)\n \x1b[2m 95\x1b[0m |       }\n \x1b[2m 96\x1b[0m |     } catch (error) {\n \x1b[2m 97\x1b[0m |       console.error(\'Error fetching establishments:\', error)\n \x1b[2m 98\x1b[0m |       toast.error(\'Erro ao carregar estabelecimentos\')\n \x1b[2m 99\x1b[0m |     }\n \x1b[2m100\x1b[0m |   }\n \x1b[2m101\x1b[0m | \n \x1b[2m102\x1b[0m |   const fetchUsers = async () => {\n \x1b[2m103\x1b[0m |     try {\n \x1b[2m104\x1b[0m |       const response = await fetch(\'/api/users\')\n \x1b[2m105\x1b[0m |       if (response.ok) {\n \x1b[2m106\x1b[0m |         const data = await response.json()\n \x1b[2m107\x1b[0m |         setUsers(data)\n \x1b[2m108\x1b[0m |       }\n \x1b[2m109\x1b[0m |     } catch (error) {\n \x1b[2m110\x1b[0m |       console.error(\'Error fetching users:\', error)\n \x1b[2m111\x1b[0m |       // toast.error(\'Erro ao carregar usu\xe1rios\')\n \x1b[2m112\x1b[0m |     }\n \x1b[2m113\x1b[0m |   }\n \x1b[2m114\x1b[0m | \n \x1b[2m115\x1b[0m |   const onSubmit = async (data: Establishment) => {\n \x1b[2m116\x1b[0m |     setLoading(true)\n \x1b[2m117\x1b[0m |     try {\n \x1b[2m118\x1b[0m |       // Add selected images to the data\n \x1b[2m119\x1b[0m |       const formData = {\n \x1b[2m120\x1b[0m |         ...data,\n \x1b[2m121\x1b[0m |         images: selectedImages,\n \x1b[2m122\x1b[0m |         coordinates: {\n \x1b[2m123\x1b[0m |           lat: Number(data.coordinates.lat) || 37.0,\n \x1b[2m124\x1b[0m |           lng: Number(data.coordinates.lng) || -8.0\n \x1b[2m125\x1b[0m |         }\n \x1b[2m126\x1b[0m |       }\n \x1b[2m127\x1b[0m | \n \x1b[2m128\x1b[0m |       let response\n \x1b[2m129\x1b[0m |       if (editingId) {\n \x1b[2m130\x1b[0m |         response = await fetch(`/api/establishments/${editingId}`, {\n \x1b[2m131\x1b[0m |           method: \'PUT\',\n \x1b[2m132\x1b[0m |           headers: { \'Content-Type\': \'application/json\' },\n \x1b[2m133\x1b[0m |           body: JSON.stringify(formData)\n \x1b[2m134\x1b[0m |         })\n \x1b[2m135\x1b[0m |       } else {\n \x1b[2m136\x1b[0m |         response = await fetch(\'/api/establishments\', {\n \x1b[2m137\x1b[0m |           method: \'POST\',\n \x1b[2m138\x1b[0m |           headers: { \'Content-Type\': \'application/json\' },\n \x1b[2m139\x1b[0m |           body: JSON.stringify(formData)\n \x1b[2m140\x1b[0m |         })\n \x1b[2m141\x1b[0m |       }\n \x1b[2m142\x1b[0m | \n \x1b[2m143\x1b[0m |       if (response.ok) {\n \x1b[2m144\x1b[0m |         toast.success(editingId ? \'Estabelecimento atualizado!\' : \'Estabelecimento criado!\')\n \x1b[2m145\x1b[0m |         fetchEstablishments()\n \x1b[2m146\x1b[0m |         handleCancel()\n \x1b[2m147\x1b[0m |       } else {\n \x1b[2m148\x1b[0m |         toast.error(\'Erro ao salvar estabelecimento\')\n \x1b[2m149\x1b[0m |       }\n \x1b[2m150\x1b[0m |     } catch (error) {\n \x1b[2m151\x1b[0m |       console.error(\'Error saving establishment:\', error)\n \x1b[2m152\x1b[0m |       toast.error(\'Erro ao salvar estabelecimento\')\n \x1b[2m153\x1b[0m |     } finally {\n \x1b[2m154\x1b[0m |       setLoading(false)\n \x1b[2m155\x1b[0m |     }\n \x1b[2m156\x1b[0m |   }\n \x1b[2m157\x1b[0m | \n \x1b[2m158\x1b[0m |   const handleEdit = (establishment: Establishment) => {\n \x1b[2m159\x1b[0m |     setEditingId(establishment.id || null)\n \x1b[2m160\x1b[0m |     setShowForm(true)\n \x1b[2m161\x1b[0m |     setSelectedImages(establishment.images || [])\n \x1b[2m162\x1b[0m |     \n \x1b[2m163\x1b[0m |     // Populate form with existing data\n \x1b[2m164\x1b[0m |     Object.keys(establishment).forEach((key) => {\n \x1b[2m165\x1b[0m |       if (key === \'coordinates\') {\n \x1b[2m166\x1b[0m |         setValue(\'coordinates.lat\', establishment.coordinates.lat)\n \x1b[2m167\x1b[0m |         setValue(\'coordinates.lng\', establishment.coordinates.lng)\n \x1b[2m168\x1b[0m |       } else {\n \x1b[2m169\x1b[0m |         setValue(key as keyof Establishment, establishment[key as keyof Establishment])\n \x1b[2m170\x1b[0m |       }\n \x1b[2m171\x1b[0m |     })\n \x1b[2m172\x1b[0m |   }\n \x1b[2m173\x1b[0m | \n \x1b[2m174\x1b[0m |   const handleDelete = async (id: string) => {\n \x1b[2m175\x1b[0m |     if (!confirm(\'Tem certeza que deseja excluir este estabelecimento?\')) return\n \x1b[2m176\x1b[0m | \n \x1b[2m177\x1b[0m |     try {\n \x1b[2m178\x1b[0m |       const response = await fetch(`/api/establishments/${id}`, {\n \x1b[2m179\x1b[0m |         method: \'DELETE\'\n \x1b[2m180\x1b[0m |       })\n \x1b[2m181\x1b[0m | \n \x1b[2m182\x1b[0m |       if (response.ok) {\n \x1b[2m183\x1b[0m |         toast.success(\'Estabelecimento exclu\xeddo!\')\n \x1b[2m184\x1b[0m |         fetchEstablishments()\n \x1b[2m185\x1b[0m |       } else {\n \x1b[2m186\x1b[0m |         toast.error(\'Erro ao excluir estabelecimento\')\n \x1b[2m187\x1b[0m |       }\n \x1b[2m188\x1b[0m |     } catch (error) {\n \x1b[2m189\x1b[0m |       console.error(\'Error deleting establishment:\', error)\n \x1b[2m190\x1b[0m |       toast.error(\'Erro ao excluir estabelecimento\')\n \x1b[2m191\x1b[0m |     }\n \x1b[2m192\x1b[0m |   }\n \x1b[2m193\x1b[0m | \n \x1b[2m194\x1b[0m |   const handleCancel = () => {\n \x1b[2m195\x1b[0m |     setShowForm(false)\n \x1b[2m196\x1b[0m |     setEditingId(null)\n \x1b[2m197\x1b[0m |     setSelectedImages([])\n \x1b[2m198\x1b[0m |     reset()\n \x1b[2m199\x1b[0m |   }\n \x1b[2m200\x1b[0m | \n \x1b[2m201\x1b[0m |   const handleImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n \x1b[2m202\x1b[0m |     const files = event.target.files\n \x1b[2m203\x1b[0m |     if (!files) return\n \x1b[2m204\x1b[0m | \n \x1b[2m205\x1b[0m |     Array.from(files).forEach((file) => {\n \x1b[2m206\x1b[0m |       const reader = new FileReader()\n \x1b[2m207\x1b[0m |       reader.onload = (e) => {\n \x1b[2m208\x1b[0m |         const base64 = e.target?.result as string\n \x1b[2m209\x1b[0m |         const base64Data = base64.split(\',\')[1] // Remove data:image/jpeg;base64, prefix\n \x1b[2m210\x1b[0m |         setSelectedImages(prev => [...prev, base64Data])\n \x1b[2m211\x1b[0m |       }\n \x1b[2m212\x1b[0m |       reader.readAsDataURL(file)\n \x1b[2m213\x1b[0m |     })\n \x1b[2m214\x1b[0m |   }\n \x1b[2m215\x1b[0m | \n \x1b[2m216\x1b[0m |   const removeImage = (index: number) => {\n \x1b[2m217\x1b[0m |     setSelectedImages(prev => prev.filter((_, i) => i !== index))\n \x1b[2m218\x1b[0m |   }\n \x1b[2m219\x1b[0m | \n \x1b[2m220\x1b[0m |   const handleFeatureToggle = (feature: string) => {\n \x1b[2m221\x1b[0m |     const currentFeatures = watch(\'accessibility_features\') || []\n \x1b[2m222\x1b[0m |     const newFeatures = currentFeatures.includes(feature)\n \x1b[2m223\x1b[0m |       ? currentFeatures.filter(f => f !== feature)\n \x1b[2m224\x1b[0m |       : [...currentFeatures, feature]\n \x1b[2m225\x1b[0m |     setValue(\'accessibility_features\', newFeatures)\n \x1b[2m226\x1b[0m |   }\n \x1b[2m227\x1b[0m | \n \x1b[2m228\x1b[0m |   return (\n \x1b[2m229\x1b[0m |     <div className="container mx-auto px-4 py-8">\n \x1b[2m230\x1b[0m |       {/* Header */}\n \x1b[2m231\x1b[0m |       <div className="mb-8">\n \x1b[2m232\x1b[0m |         <h1 className="text-accessible-2xl font-bold text-secondary-800 mb-2">\n \x1b[2m233\x1b[0m |           Painel Administrativo - TEIA\n \x1b[2m234\x1b[0m |         </h1>\n \x1b[2m235\x1b[0m |         <p className="text-accessible-base text-secondary-600 mb-4">\n \x1b[2m236\x1b[0m |           Gerencie estabelecimentos e usu\xe1rios da plataforma\n \x1b[2m237\x1b[0m |         </p>\n \x1b[2m238\x1b[0m |         \n \x1b[2m239\x1b[0m |         {/* Admin Info Banner */}\n \x1b[2m240\x1b[0m |         <div className="bg-primary-50 border border-primary-200 rounded-lg p-4 mb-6">\n \x1b[2m241\x1b[0m |           <h3 className="font-semibold text-primary-800 mb-2">\uD83D\uDD10 \xc1rea Administrativa</h3>\n \x1b[2m242\x1b[0m |           <div className="text-primary-700 text-accessible-base space-y-1">\n \x1b[2m243\x1b[0m |             <p><strong>Estabelecimentos:</strong> Apenas administradores podem adicionar, editar e excluir estabelecimentos</p>\n \x1b[2m244\x1b[0m |             <p><strong>Usu\xe1rios:</strong> Apenas administradores podem criar perfis de usu\xe1rios</p>\n \x1b[2m245\x1b[0m |             <p><strong>Papel dos Usu\xe1rios:</strong> Usu\xe1rios podem visualizar estabelecimentos, deixar avalia\xe7\xf5es e coment\xe1rios</p>\n \x1b[2m246\x1b[0m |           </div>\n \x1b[2m247\x1b[0m |         </div>\n \x1b[2m248\x1b[0m |       </div>\n \x1b[2m249\x1b[0m | \n \x1b[2m250\x1b[0m |       {/* Tabs */}\n \x1b[2m251\x1b[0m |       <div className="flex space-x-1 mb-8 bg-secondary-100 p-1 rounded-lg">\n \x1b[2m252\x1b[0m |         <button\n \x1b[2m253\x1b[0m |           onClick={() => setActiveTab(\'establishments\')}\n \x1b[2m254\x1b[0m |           className={`flex items-center px-4 py-2 rounded-md text-accessible-base font-medium transition-colors ${\n \x1b[2m255\x1b[0m |             activeTab === \'establishments\'\n \x1b[2m256\x1b[0m |               ? \'bg-white text-primary-600 shadow-sm\'\n \x1b[2m257\x1b[0m |               : \'text-secondary-600 hover:text-secondary-800\'\n \x1b[2m258\x1b[0m |           }`}\n \x1b[2m259\x1b[0m |         >\n \x1b[2m260\x1b[0m |           <BuildingOfficeIcon className="w-5 h-5 mr-2" />\n \x1b[2m261\x1b[0m |           Estabelecimentos ({establishments.length})\n \x1b[2m262\x1b[0m |         </button>\n \x1b[2m263\x1b[0m |         <button\n \x1b[2m264\x1b[0m |           onClick={() => setActiveTab(\'users\')}\n \x1b[2m265\x1b[0m |           className={`flex items-center px-4 py-2 rounded-md text-accessible-base font-medium transition-colors ${\n \x1b[2m266\x1b[0m |             activeTab === \'users\'\n \x1b[2m267\x1b[0m |               ? \'bg-white text-primary-600 shadow-sm\'\n \x1b[2m268\x1b[0m |               : \'text-secondary-600 hover:text-secondary-800\'\n \x1b[2m269\x1b[0m |           }`}\n \x1b[2m270\x1b[0m |         >\n \x1b[2m271\x1b[0m |           <UsersIcon className="w-5 h-5 mr-2" />\n \x1b[2m272\x1b[0m |           Usu\xe1rios ({users.length})\n \x1b[2m273\x1b[0m |         </button>\n \x1b[2m274\x1b[0m |       </div>\n \x1b[2m275\x1b[0m | \n \x1b[2m276\x1b[0m |       {/* Establishments Tab */}\n \x1b[2m277\x1b[0m |       {activeTab === \'establishments\' && (\n \x1b[2m278\x1b[0m |         <>\n \x1b[2m279\x1b[0m |           <div className="flex items-center justify-between mb-6">\n \x1b[2m280\x1b[0m |             <h2 className="text-accessible-xl font-semibold text-secondary-800">\n \x1b[2m281\x1b[0m |               Gest\xe3o de Estabelecimentos\n \x1b[2m282\x1b[0m |             </h2>\n \x1b[2m283\x1b[0m |             <button\n \x1b[2m284\x1b[0m |               onClick={() => setShowForm(true)}\n \x1b[2m285\x1b[0m |               className="btn btn-primary flex items-center"\n \x1b[2m286\x1b[0m |             >\n \x1b[2m287\x1b[0m |               <PlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m288\x1b[0m |               Novo Estabelecimento\n \x1b[2m289\x1b[0m |             </button>\n \x1b[2m290\x1b[0m |           </div>\n \x1b[2m291\x1b[0m | \n \x1b[2m292\x1b[0m |           {/* Establishments List */}\n \x1b[2m293\x1b[0m |           <div className="space-y-4">\n \x1b[2m294\x1b[0m |             {establishments.map((establishment) => (\n \x1b[2m295\x1b[0m |               <div key={establishment.id} className="card hover:shadow-lg transition-shadow">\n \x1b[2m296\x1b[0m |                 <div className="flex items-start justify-between">\n \x1b[2m297\x1b[0m |                   <div className="flex-1">\n \x1b[2m298\x1b[0m |                     <div className="flex items-center mb-2">\n \x1b[2m299\x1b[0m |                       <h3 className="text-accessible-lg font-semibold text-secondary-800 mr-3">\n \x1b[2m300\x1b[0m |                         {establishment.name}\n \x1b[2m301\x1b[0m |                       </h3>\n \x1b[2m302\x1b[0m |                       {establishment.certified_autism_friendly && (\n \x1b[2m303\x1b[0m |                         <ShieldCheckIcon className="w-5 h-5 text-green-600" />\n \x1b[2m304\x1b[0m |                       )}\n \x1b[2m305\x1b[0m |                       <span className="ml-2 bg-secondary-100 text-secondary-700 px-2 py-1 rounded text-accessible-sm">\n \x1b[2m306\x1b[0m |                         {ESTABLISHMENT_TYPES[establishment.type as keyof typeof ESTABLISHMENT_TYPES]}\n \x1b[2m307\x1b[0m |                       </span>\n \x1b[2m308\x1b[0m |                     </div>\n \x1b[2m309\x1b[0m |                     \n \x1b[2m310\x1b[0m |                     <p className="text-secondary-600 text-accessible-base mb-2 line-clamp-2">\n \x1b[2m311\x1b[0m |                       {establishment.description}\n \x1b[2m312\x1b[0m |                     </p>\n \x1b[2m313\x1b[0m |                     \n \x1b[2m314\x1b[0m |                     <div className="flex items-center text-accessible-sm text-secondary-500">\n \x1b[2m315\x1b[0m |                       <MapPinIcon className="w-4 h-4 mr-1" />\n \x1b[2m316\x1b[0m |                       {establishment.address}\n \x1b[2m317\x1b[0m |                     </div>\n \x1b[2m318\x1b[0m |                     \n \x1b[2m319\x1b[0m |                     {establishment.accessibility_features.length > 0 && (\n \x1b[2m320\x1b[0m |                       <div className="mt-2 flex flex-wrap gap-1">\n \x1b[2m321\x1b[0m |                         {establishment.accessibility_features.slice(0, 3).map((feature) => (\n \x1b[2m322\x1b[0m |                           <span\n \x1b[2m323\x1b[0m |                             key={feature}\n \x1b[2m324\x1b[0m |                             className="text-xs bg-autism-friendly text-secondary-700 px-2 py-1 rounded"\n \x1b[2m325\x1b[0m |                           >\n \x1b[2m326\x1b[0m |                             {ACCESSIBILITY_FEATURES[feature as keyof typeof ACCESSIBILITY_FEATURES] || feature}\n \x1b[2m327\x1b[0m |                           </span>\n \x1b[2m328\x1b[0m |                         ))}\n \x1b[2m329\x1b[0m |                         {establishment.accessibility_features.length > 3 && (\n \x1b[2m330\x1b[0m |                           <span className="text-xs text-secondary-500">\n \x1b[2m331\x1b[0m |                             +{establishment.accessibility_features.length - 3} mais\n \x1b[2m332\x1b[0m |                           </span>\n \x1b[2m333\x1b[0m |                         )}\n \x1b[2m334\x1b[0m |                       </div>\n \x1b[2m335\x1b[0m |                     )}\n \x1b[2m336\x1b[0m |                   </div>\n \x1b[2m337\x1b[0m |                   \n \x1b[2m338\x1b[0m |                   <div className="flex space-x-2 ml-4">\n \x1b[2m339\x1b[0m |                     <button\n \x1b[2m340\x1b[0m |                       onClick={() => handleEdit(establishment)}\n \x1b[2m341\x1b[0m |                       className="p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors"\n \x1b[2m342\x1b[0m |                     >\n \x1b[2m343\x1b[0m |                       <PencilIcon className="w-5 h-5" />\n \x1b[2m344\x1b[0m |                     </button>\n \x1b[2m345\x1b[0m |                     <button\n \x1b[2m346\x1b[0m |                       onClick={() => handleDelete(establishment.id!)}\n \x1b[2m347\x1b[0m |                       className="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"\n \x1b[2m348\x1b[0m |                     >\n \x1b[2m349\x1b[0m |                       <TrashIcon className="w-5 h-5" />\n \x1b[2m350\x1b[0m |                     </button>\n \x1b[2m351\x1b[0m |                   </div>\n \x1b[2m352\x1b[0m |                 </div>\n \x1b[2m353\x1b[0m |               </div>\n \x1b[2m354\x1b[0m |             ))}\n \x1b[2m355\x1b[0m |           </div>\n \x1b[2m356\x1b[0m | \n \x1b[2m357\x1b[0m |           {establishments.length === 0 && (\n \x1b[2m358\x1b[0m |             <div className="text-center py-12">\n \x1b[2m359\x1b[0m |               <BuildingOfficeIcon className="w-16 h-16 text-secondary-300 mx-auto mb-4" />\n \x1b[2m360\x1b[0m |               <h3 className="text-accessible-xl font-semibold text-secondary-600 mb-2">\n \x1b[2m361\x1b[0m |                 Nenhum estabelecimento cadastrado\n \x1b[2m362\x1b[0m |               </h3>\n \x1b[2m363\x1b[0m |               <p className="text-accessible-base text-secondary-500 mb-4">\n \x1b[2m364\x1b[0m |                 Comece criando seu primeiro estabelecimento autism-friendly\n \x1b[2m365\x1b[0m |               </p>\n \x1b[2m366\x1b[0m |               <button\n \x1b[2m367\x1b[0m |                 onClick={() => setShowForm(true)}\n \x1b[2m368\x1b[0m |                 className="btn btn-primary"\n \x1b[2m369\x1b[0m |               >\n \x1b[2m370\x1b[0m |                 Criar Primeiro Estabelecimento\n \x1b[2m371\x1b[0m |               </button>\n \x1b[2m372\x1b[0m |             </div>\n \x1b[2m373\x1b[0m |           )}\n \x1b[2m374\x1b[0m |         </>\n \x1b[2m375\x1b[0m |       )}\n \x1b[2m376\x1b[0m | \n \x1b[2m377\x1b[0m |       {/* Users Tab */}\n \x1b[2m378\x1b[0m |       {activeTab === \'users\' && (\n \x1b[2m379\x1b[0m |         <>\n \x1b[2m380\x1b[0m |           <div className="flex items-center justify-between mb-6">\n \x1b[2m381\x1b[0m |             <h2 className="text-accessible-xl font-semibold text-secondary-800">\n \x1b[2m382\x1b[0m |               Gest\xe3o de Usu\xe1rios\n \x1b[2m383\x1b[0m |             </h2>\n \x1b[2m384\x1b[0m |             <button\n \x1b[2m385\x1b[0m |               onClick={() => window.location.href = \'/profile\'}\n \x1b[2m386\x1b[0m |               className="btn btn-primary flex items-center"\n \x1b[2m387\x1b[0m |             >\n \x1b[2m388\x1b[0m |               <UserPlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m389\x1b[0m |               Criar Usu\xe1rio\n \x1b[2m390\x1b[0m |             </button>\n \x1b[2m391\x1b[0m |           </div>\n \x1b[2m392\x1b[0m | \n \x1b[2m393\x1b[0m |           {/* Users List */}\n \x1b[2m394\x1b[0m |           <div className="space-y-4">\n \x1b[2m395\x1b[0m |             {users.map((user) => (\n \x1b[2m396\x1b[0m |               <div key={user.id} className="card hover:shadow-lg transition-shadow">\n \x1b[2m397\x1b[0m |                 <div className="flex items-start justify-between">\n \x1b[2m398\x1b[0m |                   <div className="flex-1">\n \x1b[2m399\x1b[0m |                     <h3 className="text-accessible-lg font-semibold text-secondary-800 mb-1">\n \x1b[2m400\x1b[0m |                       {user.name || \'Nome n\xe3o informado\'}\n \x1b[2m401\x1b[0m |                     </h3>\n \x1b[2m402\x1b[0m |                     <p className="text-secondary-600 text-accessible-base mb-2">\n \x1b[2m403\x1b[0m |                       {user.email || \'Email n\xe3o informado\'}\n \x1b[2m404\x1b[0m |                     </p>\n \x1b[2m405\x1b[0m |                     <div className="flex items-center text-accessible-sm text-secondary-500">\n \x1b[2m406\x1b[0m |                       <span className="mr-4">\n \x1b[2m407\x1b[0m |                         Idioma: {user.language_preference === \'pt\' ? \'\uD83C\uDDF5\uD83C\uDDF9 Portugu\xeas\' : \'\uD83C\uDDEC\uD83C\uDDE7 English\'}\n \x1b[2m408\x1b[0m |                       </span>\n \x1b[2m409\x1b[0m |                       {user.sensory_profile && (\n \x1b[2m410\x1b[0m |                         <span>\n \x1b[2m411\x1b[0m |                           Perfil sensorial configurado âœ“\n \x1b[2m412\x1b[0m |                         </span>\n \x1b[2m413\x1b[0m |                       )}\n \x1b[2m414\x1b[0m |                     </div>\n \x1b[2m415\x1b[0m |                   </div>\n \x1b[2m416\x1b[0m |                   \n \x1b[2m417\x1b[0m |                   <div className="flex space-x-2 ml-4">\n \x1b[2m418\x1b[0m |                     <button\n \x1b[2m419\x1b[0m |                       onClick={() => window.location.href = \'/profile\'}\n \x1b[2m420\x1b[0m |                       className="p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors"\n \x1b[2m421\x1b[0m |                       title="Editar usu\xe1rio"\n \x1b[2m422\x1b[0m |                     >\n \x1b[2m423\x1b[0m |                       <PencilIcon className="w-5 h-5" />\n \x1b[2m424\x1b[0m |                     </button>\n \x1b[2m425\x1b[0m |                   </div>\n \x1b[2m426\x1b[0m |                 </div>\n \x1b[2m427\x1b[0m |               </div>\n \x1b[2m428\x1b[0m |             ))}\n \x1b[2m429\x1b[0m |           </div>\n \x1b[2m430\x1b[0m | \n \x1b[2m431\x1b[0m |           {users.length === 0 && (\n \x1b[2m432\x1b[0m |             <div className="text-center py-12">\n \x1b[2m433\x1b[0m |               <UsersIcon className="w-16 h-16 text-secondary-300 mx-auto mb-4" />\n \x1b[2m434\x1b[0m |               <h3 className="text-accessible-xl font-semibold text-secondary-600 mb-2">\n \x1b[2m435\x1b[0m |                 Nenhum usu\xe1rio cadastrado\n \x1b[2m436\x1b[0m |               </h3>\n \x1b[2m437\x1b[0m |               <p className="text-accessible-base text-secondary-500 mb-4">\n \x1b[2m438\x1b[0m |                 Crie perfis para usu\xe1rios que utilizar\xe3o a plataforma\n \x1b[2m439\x1b[0m |               </p>\n \x1b[2m440\x1b[0m |               <button\n \x1b[2m441\x1b[0m |                 onClick={() => window.location.href = \'/profile\'}\n \x1b[2m442\x1b[0m |                 className="btn btn-primary"\n \x1b[2m443\x1b[0m |               >\n \x1b[2m444\x1b[0m |                 Criar Primeiro Usu\xe1rio\n \x1b[2m445\x1b[0m |               </button>\n \x1b[2m446\x1b[0m |             </div>\n \x1b[2m447\x1b[0m |           )}\n \x1b[2m448\x1b[0m |         </>\n \x1b[2m449\x1b[0m |       )}\n \x1b[2m450\x1b[0m | \n \x1b[2m451\x1b[0m |       {/* Form Modal - Only for Establishments */}\n \x1b[2m452\x1b[0m |       {showForm && (\n \x1b[2m453\x1b[0m |         <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">\n \x1b[2m454\x1b[0m |           <div className="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">\n \x1b[2m455\x1b[0m |             <div className="p-6">\n \x1b[2m456\x1b[0m |               <div className="flex items-center justify-between mb-6">\n \x1b[2m457\x1b[0m |                 <h2 className="text-accessible-xl font-semibold text-secondary-800">\n \x1b[2m458\x1b[0m |                   {editingId ? \'Editar Estabelecimento\' : \'Novo Estabelecimento\'}\n \x1b[2m459\x1b[0m |                 </h2>\n \x1b[2m460\x1b[0m |                 <button\n \x1b[2m461\x1b[0m |                   onClick={handleCancel}\n \x1b[2m462\x1b[0m |                   className="p-2 hover:bg-secondary-100 rounded-lg"\n \x1b[2m463\x1b[0m |                 >\n \x1b[2m464\x1b[0m |                   <XMarkIcon className="w-6 h-6 text-secondary-600" />\n \x1b[2m465\x1b[0m |                 </button>\n \x1b[2m466\x1b[0m |               </div>\n \x1b[2m467\x1b[0m | \n \x1b[2m468\x1b[0m |               <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">\n \x1b[2m469\x1b[0m |                 {/* Basic Information */}\n \x1b[2m470\x1b[0m |                 <div className="grid grid-cols-1 md:grid-cols-2 gap-6">\n \x1b[2m471\x1b[0m |                   <div>\n \x1b[2m472\x1b[0m |                     <label className="label">Nome *</label>\n \x1b[2m473\x1b[0m |                     <input\n \x1b[2m474\x1b[0m |                       {...register(\'name\', { required: \'Nome \xe9 obrigat\xf3rio\' })}\n \x1b[2m475\x1b[0m |                       className="input"\n \x1b[2m476\x1b[0m |                       placeholder="Nome do estabelecimento"\n \x1b[2m477\x1b[0m |                     />\n \x1b[2m478\x1b[0m |                     {errors.name && (\n \x1b[2m479\x1b[0m |                       <p className="text-red-500 text-accessible-sm mt-1">{errors.name.message}</p>\n \x1b[2m480\x1b[0m |                     )}\n \x1b[2m481\x1b[0m |                   </div>\n \x1b[2m482\x1b[0m | \n \x1b[2m483\x1b[0m |                   <div>\n \x1b[2m484\x1b[0m |                     <label className="label">Tipo *</label>\n \x1b[2m485\x1b[0m |                     <select\n \x1b[2m486\x1b[0m |                       {...register(\'type\', { required: \'Tipo \xe9 obrigat\xf3rio\' })}\n \x1b[2m487\x1b[0m |                       className="input"\n \x1b[2m488\x1b[0m |                     >\n \x1b[2m489\x1b[0m |                       <option value="">Selecione o tipo</option>\n \x1b[2m490\x1b[0m |                       {Object.entries(ESTABLISHMENT_TYPES).map(([value, label]) => (\n \x1b[2m491\x1b[0m |                         <option key={value} value={value}>{label}</option>\n \x1b[2m492\x1b[0m |                       ))}\n \x1b[2m493\x1b[0m |                     </select>\n \x1b[2m494\x1b[0m |                     {errors.type && (\n \x1b[2m495\x1b[0m |                       <p className="text-red-500 text-accessible-sm mt-1">{errors.type.message}</p>\n \x1b[2m496\x1b[0m |                     )}\n \x1b[2m497\x1b[0m |                   </div>\n \x1b[2m498\x1b[0m |                 </div>\n \x1b[2m499\x1b[0m | \n \x1b[2m500\x1b[0m |                 <div>\n \x1b[2m501\x1b[0m |                   <label className="label">Descri\xe7\xe3o *</label>\n \x1b[2m502\x1b[0m |                   <textarea\n \x1b[2m503\x1b[0m |                     {...register(\'description\', { required: \'Descri\xe7\xe3o \xe9 obrigat\xf3ria\' })}\n \x1b[2m504\x1b[0m |                     className="input"\n \x1b[2m505\x1b[0m |                     rows={3}\n \x1b[2m506\x1b[0m |                     placeholder="Descri\xe7\xe3o detalhada do estabelecimento"\n \x1b[2m507\x1b[0m |                   />\n \x1b[2m508\x1b[0m |                   {errors.description && (\n \x1b[2m509\x1b[0m |                     <p className="text-red-500 text-accessible-sm mt-1">{errors.description.message}</p>\n \x1b[2m510\x1b[0m |                   )}\n \x1b[2m511\x1b[0m |                 </div>\n \x1b[2m512\x1b[0m | \n \x1b[2m513\x1b[0m |                 <div>\n \x1b[2m514\x1b[0m |                   <label className="label">Endere\xe7o *</label>\n \x1b[2m515\x1b[0m |                   <input\n \x1b[2m516\x1b[0m |                     {...register(\'address\', { required: \'Endere\xe7o \xe9 obrigat\xf3rio\' })}\n \x1b[2m517\x1b[0m |                     className="input"\n \x1b[2m518\x1b[0m |                     placeholder="Endere\xe7o completo"\n \x1b[2m519\x1b[0m |                   />\n \x1b[2m520\x1b[0m |                   {errors.address && (\n \x1b[2m521\x1b[0m |                     <p className="text-red-500 text-accessible-sm mt-1">{errors.address.message}</p>\n \x1b[2m522\x1b[0m |                   )}\n \x1b[2m523\x1b[0m |                 </div>\n \x1b[2m524\x1b[0m | \n \x1b[2m525\x1b[0m |                 {/* Coordinates */}\n \x1b[2m526\x1b[0m |                 <div className="grid grid-cols-1 md:grid-cols-2 gap-6">\n \x1b[2m527\x1b[0m |                   <div>\n \x1b[2m528\x1b[0m |                     <label className="label">Latitude</label>\n \x1b[2m529\x1b[0m |                     <input\n \x1b[2m530\x1b[0m |                       {...register(\'coordinates.lat\')}\n \x1b[2m531\x1b[0m |                       type="number"\n \x1b[2m532\x1b[0m |                       step="any"\n \x1b[2m533\x1b[0m |                       className="input"\n \x1b[2m534\x1b[0m |                       placeholder="37.0"\n \x1b[2m535\x1b[0m |                     />\n \x1b[2m536\x1b[0m |                   </div>\n \x1b[2m537\x1b[0m |                   <div>\n \x1b[2m538\x1b[0m |                     <label className="label">Longitude</label>\n \x1b[2m539\x1b[0m |                     <input\n \x1b[2m540\x1b[0m |                       {...register(\'coordinates.lng\')}\n \x1b[2m541\x1b[0m |                       type="number"\n \x1b[2m542\x1b[0m |                       step="any"\n \x1b[2m543\x1b[0m |                       className="input"\n \x1b[2m544\x1b[0m |                       placeholder="-8.0"\n \x1b[2m545\x1b[0m |                     />\n \x1b[2m546\x1b[0m |                   </div>\n \x1b[2m547\x1b[0m |                 </div>\n \x1b[2m548\x1b[0m | \n \x1b[2m549\x1b[0m |                 {/* Certification */}\n \x1b[2m550\x1b[0m |                 <div>\n \x1b[2m551\x1b[0m |                   <label className="flex items-center">\n \x1b[2m552\x1b[0m |                     <input\n \x1b[2m553\x1b[0m |                       {...register(\'certified_autism_friendly\')}\n \x1b[2m554\x1b[0m |                       type="checkbox"\n \x1b[2m555\x1b[0m |                       className="mr-3 w-4 h-4 text-primary-600 rounded focus:ring-primary-500"\n \x1b[2m556\x1b[0m |                     />\n \x1b[2m557\x1b[0m |                     <ShieldCheckIcon className="w-5 h-5 text-green-600 mr-2" />\n \x1b[2m558\x1b[0m |                     <span className="label mb-0">Certificado Autism Friendly</span>\n \x1b[2m559\x1b[0m |                   </label>\n \x1b[2m560\x1b[0m |                 </div>\n \x1b[2m561\x1b[0m | \n \x1b[2m562\x1b[0m |                 {/* Accessibility Features */}\n \x1b[2m563\x1b[0m |                 <div>\n \x1b[2m564\x1b[0m |                   <label className="label">Recursos de Acessibilidade</label>\n \x1b[2m565\x1b[0m |                   <div className="grid grid-cols-2 md:grid-cols-3 gap-3">\n \x1b[2m566\x1b[0m |                     {Object.entries(ACCESSIBILITY_FEATURES).map(([feature, label]) => (\n \x1b[2m567\x1b[0m |                       <label key={feature} className="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-secondary-50">\n \x1b[2m568\x1b[0m |                         <input\n \x1b[2m569\x1b[0m |                           type="checkbox"\n \x1b[2m570\x1b[0m |                           checked={watch(\'accessibility_features\')?.includes(feature) || false}\n \x1b[2m571\x1b[0m |                           onChange={() => handleFeatureToggle(feature)}\n \x1b[2m572\x1b[0m |                           className="mr-3 w-4 h-4 text-primary-600 rounded focus:ring-primary-500"\n \x1b[2m573\x1b[0m |                         />\n \x1b[2m574\x1b[0m |                         <span className="text-accessible-sm">{label}</span>\n \x1b[2m575\x1b[0m |                       </label>\n \x1b[2m576\x1b[0m |                     ))}\n \x1b[2m577\x1b[0m |                   </div>\n \x1b[2m578\x1b[0m |                 </div>\n \x1b[2m579\x1b[0m | \n \x1b[2m580\x1b[0m |                 {/* Contact Information */}\n \x1b[2m581\x1b[0m |                 <div>\n \x1b[2m582\x1b[0m |                   <label className="label">Informa\xe7\xf5es de Contato</label>\n \x1b[2m583\x1b[0m |                   <div className="grid grid-cols-1 md:grid-cols-3 gap-4">\n \x1b[2m584\x1b[0m |                     <input\n \x1b[2m585\x1b[0m |                       {...register(\'contact_info.phone\')}\n \x1b[2m586\x1b[0m |                       className="input"\n \x1b[2m587\x1b[0m |                       placeholder="Telefone"\n \x1b[2m588\x1b[0m |                     />\n \x1b[2m589\x1b[0m |                     <input\n \x1b[2m590\x1b[0m |                       {...register(\'contact_info.email\')}\n \x1b[2m591\x1b[0m |                       type="email"\n \x1b[2m592\x1b[0m |                       className="input"\n \x1b[2m593\x1b[0m |                       placeholder="Email"\n \x1b[2m594\x1b[0m |                     />\n \x1b[2m595\x1b[0m |                     <input\n \x1b[2m596\x1b[0m |                       {...register(\'contact_info.website\')}\n \x1b[2m597\x1b[0m |                       className="input"\n \x1b[2m598\x1b[0m |                       placeholder="Website"\n \x1b[2m599\x1b[0m |                     />\n \x1b[2m600\x1b[0m |                   </div>\n \x1b[2m601\x1b[0m |                 </div>\n \x1b[2m602\x1b[0m | \n \x1b[2m603\x1b[0m |                 {/* Opening Hours */}\n \x1b[2m604\x1b[0m |                 <div>\n \x1b[2m605\x1b[0m |                   <label className="label">Hor\xe1rios de Funcionamento</label>\n \x1b[2m606\x1b[0m |                   <div className="grid grid-cols-1 md:grid-cols-2 gap-4">\n \x1b[2m607\x1b[0m |                     {Object.entries(DAYS_OF_WEEK).map(([day, label]) => (\n \x1b[2m608\x1b[0m |                       <div key={day} className="flex items-center space-x-2">\n \x1b[2m609\x1b[0m |                         <span className="w-24 text-accessible-sm">{label}:</span>\n \x1b[2m610\x1b[0m |                         <input\n \x1b[2m611\x1b[0m |                           {...register(`opening_hours.${day}` as const)}\n \x1b[2m612\x1b[0m |                           className="input flex-1"\n \x1b[2m613\x1b[0m |                           placeholder="09:00-18:00"\n \x1b[2m614\x1b[0m |                         />\n \x1b[2m615\x1b[0m |                       </div>\n \x1b[2m616\x1b[0m |                     ))}\n \x1b[2m617\x1b[0m |                   </div>\n \x1b[2m618\x1b[0m |                 </div>\n \x1b[2m619\x1b[0m | \n \x1b[2m620\x1b[0m |                 {/* Images */}\n \x1b[2m621\x1b[0m |                 <div>\n \x1b[2m622\x1b[0m |                   <label className="label">Imagens</label>\n \x1b[2m623\x1b[0m |                   <div className="border-2 border-dashed border-secondary-300 rounded-lg p-6">\n \x1b[2m624\x1b[0m |                     <input\n \x1b[2m625\x1b[0m |                       type="file"\n \x1b[2m626\x1b[0m |                       multiple\n \x1b[2m627\x1b[0m |                       accept="image/*"\n \x1b[2m628\x1b[0m |                       onChange={handleImageUpload}\n \x1b[2m629\x1b[0m |                       className="hidden"\n \x1b[2m630\x1b[0m |                       id="image-upload"\n \x1b[2m631\x1b[0m |                     />\n \x1b[2m632\x1b[0m |                     <label\n \x1b[2m633\x1b[0m |                       htmlFor="image-upload"\n \x1b[2m634\x1b[0m |                       className="flex flex-col items-center cursor-pointer"\n \x1b[2m635\x1b[0m |                     >\n \x1b[2m636\x1b[0m |                       <PhotoIcon className="w-12 h-12 text-secondary-400 mb-2" />\n \x1b[2m637\x1b[0m |                       <span className="text-accessible-base text-secondary-600">\n \x1b[2m638\x1b[0m |                         Clique para selecionar imagens\n \x1b[2m639\x1b[0m |                       </span>\n \x1b[2m640\x1b[0m |                     </label>\n \x1b[2m641\x1b[0m |                   </div>\n \x1b[2m642\x1b[0m | \n \x1b[2m643\x1b[0m |                   {/* Selected Images Preview */}\n \x1b[2m644\x1b[0m |                   {selectedImages.length > 0 && (\n \x1b[2m645\x1b[0m |                     <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">\n \x1b[2m646\x1b[0m |                       {selectedImages.map((image, index) => (\n \x1b[2m647\x1b[0m |                         <div key={index} className="relative">\n \x1b[2m648\x1b[0m |                           <img\n \x1b[2m649\x1b[0m |                             src={`data:image/jpeg;base64,${image}`}\n \x1b[2m650\x1b[0m |                             alt={`Preview ${index + 1}`}\n \x1b[2m651\x1b[0m |                             className="w-full h-24 object-cover rounded-lg"\n \x1b[2m652\x1b[0m |                           />\n \x1b[2m653\x1b[0m |                           <button\n \x1b[2m654\x1b[0m |                             type="button"\n \x1b[2m655\x1b[0m |                             onClick={() => removeImage(index)}\n \x1b[2m656\x1b[0m |                             className="absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600"\n \x1b[2m657\x1b[0m |                           >\n \x1b[2m658\x1b[0m |                             <XMarkIcon className="w-4 h-4" />\n \x1b[2m659\x1b[0m |                           </button>\n \x1b[2m660\x1b[0m |                         </div>\n \x1b[2m661\x1b[0m |                       ))}\n \x1b[2m662\x1b[0m |                     </div>\n \x1b[2m663\x1b[0m |                   )}\n \x1b[2m664\x1b[0m |                 </div>\n \x1b[2m665\x1b[0m | \n \x1b[2m666\x1b[0m |                 {/* Form Actions */}\n \x1b[2m667\x1b[0m |                 <div className="flex justify-end space-x-4 pt-6 border-t">\n \x1b[2m668\x1b[0m |                   <button\n \x1b[2m669\x1b[0m |                     type="button"\n \x1b[2m670\x1b[0m |                     onClick={handleCancel}\n \x1b[2m671\x1b[0m |                     className="btn btn-secondary"\n \x1b[2m672\x1b[0m |                   >\n \x1b[2m673\x1b[0m |                     Cancelar\n \x1b[2m674\x1b[0m |                   </button>\n \x1b[2m675\x1b[0m |                   <button\n \x1b[2m676\x1b[0m |                     type="submit"\n \x1b[2m677\x1b[0m |                     disabled={loading}\n \x1b[2m678\x1b[0m |                     className="btn btn-primary flex items-center"\n \x1b[2m679\x1b[0m |                   >\n \x1b[2m680\x1b[0m |                     {loading ? (\n \x1b[2m681\x1b[0m |                       <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"></div>\n \x1b[2m682\x1b[0m |                     ) : (\n \x1b[2m683\x1b[0m |                       <PlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m684\x1b[0m |                     )}\n \x1b[2m685\x1b[0m |                     {editingId ? \'Atualizar\' : \'Criar\'} Estabelecimento\n \x1b[2m686\x1b[0m |                   </button>\n \x1b[2m687\x1b[0m |                 </div>\n \x1b[2m688\x1b[0m |               </form>\n \x1b[2m689\x1b[0m |             </div>\n \x1b[2m690\x1b[0m |           </div>\n \x1b[2m691\x1b[0m |         </div>\n \x1b[2m692\x1b[0m |       )}\n \x1b[2m693\x1b[0m |     </div>\n \x1b[2m694\x1b[0m |   )\n \x1b[2m695\x1b[0m | }\n \x1b[2m696\x1b[0m | \n \x1b[2m697\x1b[0m | interface Establishment {\n \x1b[2m698\x1b[0m |   id?: string\n \x1b[2m699\x1b[0m |   name: string\n \x1b[2m700\x1b[0m |   type: string\n \x1b[2m701\x1b[0m |   description: string\n \x1b[2m702\x1b[0m |   address: string\n \x1b[2m703\x1b[0m |   coordinates: { lat: number; lng: number }\n \x1b[2m704\x1b[0m |   accessibility_features: string[]\n \x1b[2m705\x1b[0m |   certified_autism_friendly: boolean\n \x1b[2m706\x1b[0m |   contact_info: { [key: string]: string }\n \x1b[2m707\x1b[0m |   opening_hours: { [key: string]: string }\n \x1b[2m708\x1b[0m |   special_hours: string[]\n \x1b[2m709\x1b[0m |   sensory_info: { [key: string]: any }\n \x1b[2m710\x1b[0m |   images: string[]\n \x1b[2m711\x1b[0m | }\n \x1b[2m712\x1b[0m | \n \x1b[2m713\x1b[0m | const ESTABLISHMENT_TYPES = {\n \x1b[2m714\x1b[0m |   hotel: \'Hotel\',\n \x1b[2m715\x1b[0m |   restaurant: \'Restaurante\',\n \x1b[2m716\x1b[0m |   attraction: \'Atra\xe7\xe3o\',\n \x1b[2m717\x1b[0m |   event: \'Evento\',\n \x1b[2m718\x1b[0m |   shopping: \'Compras\',\n \x1b[2m719\x1b[0m |   transport: \'Transporte\'\n \x1b[2m720\x1b[0m | }\n \x1b[2m721\x1b[0m | \n \x1b[2m722\x1b[0m | const ACCESSIBILITY_FEATURES = {\n     : \x1b[33;1m      ^^^^^^^^^^^|^^^^^^^^^^\x1b[0m\n     :                  \x1b[33;1m`-- \x1b[33;1m`ACCESSIBILITY_FEATURES` redefined here\x1b[0m\x1b[0m\n \x1b[2m723\x1b[0m |   quiet_spaces: \'Espa\xe7os Silenciosos\',\n \x1b[2m724\x1b[0m |   sensory_rooms: \'Salas Sensoriais\',\n \x1b[2m725\x1b[0m |   low_lighting: \'Ilumina\xe7\xe3o Reduzida\',\n     `----\n\n  \x1b[31mx\x1b[0m the name `DAYS_OF_WEEK` is defined multiple times\n     ,-[\x1b[36;1;4m/app/frontend/src/app/admin/page.tsx\x1b[0m:60:1]\n \x1b[2m 60\x1b[0m |   flexible_timing: \'Hor\xe1rios Flex\xedveis\'\n \x1b[2m 61\x1b[0m | }\n \x1b[2m 62\x1b[0m | \n \x1b[2m 63\x1b[0m | const DAYS_OF_WEEK = {\n     : \x1b[31;1m      ^^^^^^|^^^^^\x1b[0m\n     :             \x1b[31;1m`-- \x1b[31;1mprevious definition of `DAYS_OF_WEEK` here\x1b[0m\x1b[0m\n \x1b[2m 64\x1b[0m |   monday: \'Segunda-feira\',\n \x1b[2m 65\x1b[0m |   tuesday: \'Ter\xe7a-feira\',\n \x1b[2m 66\x1b[0m |   wednesday: \'Quarta-feira\',\n \x1b[2m 67\x1b[0m |   thursday: \'Quinta-feira\',\n \x1b[2m 68\x1b[0m |   friday: \'Sexta-feira\',\n \x1b[2m 69\x1b[0m |   saturday: \'S\xe1bado\',\n \x1b[2m 70\x1b[0m |   sunday: \'Domingo\'\n \x1b[2m 71\x1b[0m | }\n \x1b[2m 72\x1b[0m | \n \x1b[2m 73\x1b[0m | export default function AdminPage() {\n \x1b[2m 74\x1b[0m |   const [activeTab, setActiveTab] = useState<\'establishments\' | \'users\'>(\'establishments\')\n \x1b[2m 75\x1b[0m |   const [establishments, setEstablishments] = useState<Establishment[]>([])\n \x1b[2m 76\x1b[0m |   const [users, setUsers] = useState<User[]>([])\n \x1b[2m 77\x1b[0m |   const [showForm, setShowForm] = useState(false)\n \x1b[2m 78\x1b[0m |   const [editingId, setEditingId] = useState<string | null>(null)\n \x1b[2m 79\x1b[0m |   const [loading, setLoading] = useState(false)\n \x1b[2m 80\x1b[0m |   const [selectedImages, setSelectedImages] = useState<string[]>([])\n \x1b[2m 81\x1b[0m | \n \x1b[2m 82\x1b[0m |   const { register, handleSubmit, reset, setValue, watch, formState: { errors } } = useForm<Establishment>()\n \x1b[2m 83\x1b[0m | \n \x1b[2m 84\x1b[0m |   useEffect(() => {\n \x1b[2m 85\x1b[0m |     fetchEstablishments()\n \x1b[2m 86\x1b[0m |     fetchUsers()\n \x1b[2m 87\x1b[0m |   }, [])\n \x1b[2m 88\x1b[0m | \n \x1b[2m 89\x1b[0m |   const fetchEstablishments = async () => {\n \x1b[2m 90\x1b[0m |     try {\n \x1b[2m 91\x1b[0m |       const response = await fetch(\'/api/establishments\')\n \x1b[2m 92\x1b[0m |       if (response.ok) {\n \x1b[2m 93\x1b[0m |         const data = await response.json()\n \x1b[2m 94\x1b[0m |         setEstablishments(data)\n \x1b[2m 95\x1b[0m |       }\n \x1b[2m 96\x1b[0m |     } catch (error) {\n \x1b[2m 97\x1b[0m |       console.error(\'Error fetching establishments:\', error)\n \x1b[2m 98\x1b[0m |       toast.error(\'Erro ao carregar estabelecimentos\')\n \x1b[2m 99\x1b[0m |     }\n \x1b[2m100\x1b[0m |   }\n \x1b[2m101\x1b[0m | \n \x1b[2m102\x1b[0m |   const fetchUsers = async () => {\n \x1b[2m103\x1b[0m |     try {\n \x1b[2m104\x1b[0m |       const response = await fetch(\'/api/users\')\n \x1b[2m105\x1b[0m |       if (response.ok) {\n \x1b[2m106\x1b[0m |         const data = await response.json()\n \x1b[2m107\x1b[0m |         setUsers(data)\n \x1b[2m108\x1b[0m |       }\n \x1b[2m109\x1b[0m |     } catch (error) {\n \x1b[2m110\x1b[0m |       console.error(\'Error fetching users:\', error)\n \x1b[2m111\x1b[0m |       // toast.error(\'Erro ao carregar usu\xe1rios\')\n \x1b[2m112\x1b[0m |     }\n \x1b[2m113\x1b[0m |   }\n \x1b[2m114\x1b[0m | \n \x1b[2m115\x1b[0m |   const onSubmit = async (data: Establishment) => {\n \x1b[2m116\x1b[0m |     setLoading(true)\n \x1b[2m117\x1b[0m |     try {\n \x1b[2m118\x1b[0m |       // Add selected images to the data\n \x1b[2m119\x1b[0m |       const formData = {\n \x1b[2m120\x1b[0m |         ...data,\n \x1b[2m121\x1b[0m |         images: selectedImages,\n \x1b[2m122\x1b[0m |         coordinates: {\n \x1b[2m123\x1b[0m |           lat: Number(data.coordinates.lat) || 37.0,\n \x1b[2m124\x1b[0m |           lng: Number(data.coordinates.lng) || -8.0\n \x1b[2m125\x1b[0m |         }\n \x1b[2m126\x1b[0m |       }\n \x1b[2m127\x1b[0m | \n \x1b[2m128\x1b[0m |       let response\n \x1b[2m129\x1b[0m |       if (editingId) {\n \x1b[2m130\x1b[0m |         response = await fetch(`/api/establishments/${editingId}`, {\n \x1b[2m131\x1b[0m |           method: \'PUT\',\n \x1b[2m132\x1b[0m |           headers: { \'Content-Type\': \'application/json\' },\n \x1b[2m133\x1b[0m |           body: JSON.stringify(formData)\n \x1b[2m134\x1b[0m |         })\n \x1b[2m135\x1b[0m |       } else {\n \x1b[2m136\x1b[0m |         response = await fetch(\'/api/establishments\', {\n \x1b[2m137\x1b[0m |           method: \'POST\',\n \x1b[2m138\x1b[0m |           headers: { \'Content-Type\': \'application/json\' },\n \x1b[2m139\x1b[0m |           body: JSON.stringify(formData)\n \x1b[2m140\x1b[0m |         })\n \x1b[2m141\x1b[0m |       }\n \x1b[2m142\x1b[0m | \n \x1b[2m143\x1b[0m |       if (response.ok) {\n \x1b[2m144\x1b[0m |         toast.success(editingId ? \'Estabelecimento atualizado!\' : \'Estabelecimento criado!\')\n \x1b[2m145\x1b[0m |         fetchEstablishments()\n \x1b[2m146\x1b[0m |         handleCancel()\n \x1b[2m147\x1b[0m |       } else {\n \x1b[2m148\x1b[0m |         toast.error(\'Erro ao salvar estabelecimento\')\n \x1b[2m149\x1b[0m |       }\n \x1b[2m150\x1b[0m |     } catch (error) {\n \x1b[2m151\x1b[0m |       console.error(\'Error saving establishment:\', error)\n \x1b[2m152\x1b[0m |       toast.error(\'Erro ao salvar estabelecimento\')\n \x1b[2m153\x1b[0m |     } finally {\n \x1b[2m154\x1b[0m |       setLoading(false)\n \x1b[2m155\x1b[0m |     }\n \x1b[2m156\x1b[0m |   }\n \x1b[2m157\x1b[0m | \n \x1b[2m158\x1b[0m |   const handleEdit = (establishment: Establishment) => {\n \x1b[2m159\x1b[0m |     setEditingId(establishment.id || null)\n \x1b[2m160\x1b[0m |     setShowForm(true)\n \x1b[2m161\x1b[0m |     setSelectedImages(establishment.images || [])\n \x1b[2m162\x1b[0m |     \n \x1b[2m163\x1b[0m |     // Populate form with existing data\n \x1b[2m164\x1b[0m |     Object.keys(establishment).forEach((key) => {\n \x1b[2m165\x1b[0m |       if (key === \'coordinates\') {\n \x1b[2m166\x1b[0m |         setValue(\'coordinates.lat\', establishment.coordinates.lat)\n \x1b[2m167\x1b[0m |         setValue(\'coordinates.lng\', establishment.coordinates.lng)\n \x1b[2m168\x1b[0m |       } else {\n \x1b[2m169\x1b[0m |         setValue(key as keyof Establishment, establishment[key as keyof Establishment])\n \x1b[2m170\x1b[0m |       }\n \x1b[2m171\x1b[0m |     })\n \x1b[2m172\x1b[0m |   }\n \x1b[2m173\x1b[0m | \n \x1b[2m174\x1b[0m |   const handleDelete = async (id: string) => {\n \x1b[2m175\x1b[0m |     if (!confirm(\'Tem certeza que deseja excluir este estabelecimento?\')) return\n \x1b[2m176\x1b[0m | \n \x1b[2m177\x1b[0m |     try {\n \x1b[2m178\x1b[0m |       const response = await fetch(`/api/establishments/${id}`, {\n \x1b[2m179\x1b[0m |         method: \'DELETE\'\n \x1b[2m180\x1b[0m |       })\n \x1b[2m181\x1b[0m | \n \x1b[2m182\x1b[0m |       if (response.ok) {\n \x1b[2m183\x1b[0m |         toast.success(\'Estabelecimento exclu\xeddo!\')\n \x1b[2m184\x1b[0m |         fetchEstablishments()\n \x1b[2m185\x1b[0m |       } else {\n \x1b[2m186\x1b[0m |         toast.error(\'Erro ao excluir estabelecimento\')\n \x1b[2m187\x1b[0m |       }\n \x1b[2m188\x1b[0m |     } catch (error) {\n \x1b[2m189\x1b[0m |       console.error(\'Error deleting establishment:\', error)\n \x1b[2m190\x1b[0m |       toast.error(\'Erro ao excluir estabelecimento\')\n \x1b[2m191\x1b[0m |     }\n \x1b[2m192\x1b[0m |   }\n \x1b[2m193\x1b[0m | \n \x1b[2m194\x1b[0m |   const handleCancel = () => {\n \x1b[2m195\x1b[0m |     setShowForm(false)\n \x1b[2m196\x1b[0m |     setEditingId(null)\n \x1b[2m197\x1b[0m |     setSelectedImages([])\n \x1b[2m198\x1b[0m |     reset()\n \x1b[2m199\x1b[0m |   }\n \x1b[2m200\x1b[0m | \n \x1b[2m201\x1b[0m |   const handleImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n \x1b[2m202\x1b[0m |     const files = event.target.files\n \x1b[2m203\x1b[0m |     if (!files) return\n \x1b[2m204\x1b[0m | \n \x1b[2m205\x1b[0m |     Array.from(files).forEach((file) => {\n \x1b[2m206\x1b[0m |       const reader = new FileReader()\n \x1b[2m207\x1b[0m |       reader.onload = (e) => {\n \x1b[2m208\x1b[0m |         const base64 = e.target?.result as string\n \x1b[2m209\x1b[0m |         const base64Data = base64.split(\',\')[1] // Remove data:image/jpeg;base64, prefix\n \x1b[2m210\x1b[0m |         setSelectedImages(prev => [...prev, base64Data])\n \x1b[2m211\x1b[0m |       }\n \x1b[2m212\x1b[0m |       reader.readAsDataURL(file)\n \x1b[2m213\x1b[0m |     })\n \x1b[2m214\x1b[0m |   }\n \x1b[2m215\x1b[0m | \n \x1b[2m216\x1b[0m |   const removeImage = (index: number) => {\n \x1b[2m217\x1b[0m |     setSelectedImages(prev => prev.filter((_, i) => i !== index))\n \x1b[2m218\x1b[0m |   }\n \x1b[2m219\x1b[0m | \n \x1b[2m220\x1b[0m |   const handleFeatureToggle = (feature: string) => {\n \x1b[2m221\x1b[0m |     const currentFeatures = watch(\'accessibility_features\') || []\n \x1b[2m222\x1b[0m |     const newFeatures = currentFeatures.includes(feature)\n \x1b[2m223\x1b[0m |       ? currentFeatures.filter(f => f !== feature)\n \x1b[2m224\x1b[0m |       : [...currentFeatures, feature]\n \x1b[2m225\x1b[0m |     setValue(\'accessibility_features\', newFeatures)\n \x1b[2m226\x1b[0m |   }\n \x1b[2m227\x1b[0m | \n \x1b[2m228\x1b[0m |   return (\n \x1b[2m229\x1b[0m |     <div className="container mx-auto px-4 py-8">\n \x1b[2m230\x1b[0m |       {/* Header */}\n \x1b[2m231\x1b[0m |       <div className="mb-8">\n \x1b[2m232\x1b[0m |         <h1 className="text-accessible-2xl font-bold text-secondary-800 mb-2">\n \x1b[2m233\x1b[0m |           Painel Administrativo - TEIA\n \x1b[2m234\x1b[0m |         </h1>\n \x1b[2m235\x1b[0m |         <p className="text-accessible-base text-secondary-600 mb-4">\n \x1b[2m236\x1b[0m |           Gerencie estabelecimentos e usu\xe1rios da plataforma\n \x1b[2m237\x1b[0m |         </p>\n \x1b[2m238\x1b[0m |         \n \x1b[2m239\x1b[0m |         {/* Admin Info Banner */}\n \x1b[2m240\x1b[0m |         <div className="bg-primary-50 border border-primary-200 rounded-lg p-4 mb-6">\n \x1b[2m241\x1b[0m |           <h3 className="font-semibold text-primary-800 mb-2">\uD83D\uDD10 \xc1rea Administrativa</h3>\n \x1b[2m242\x1b[0m |           <div className="text-primary-700 text-accessible-base space-y-1">\n \x1b[2m243\x1b[0m |             <p><strong>Estabelecimentos:</strong> Apenas administradores podem adicionar, editar e excluir estabelecimentos</p>\n \x1b[2m244\x1b[0m |             <p><strong>Usu\xe1rios:</strong> Apenas administradores podem criar perfis de usu\xe1rios</p>\n \x1b[2m245\x1b[0m |             <p><strong>Papel dos Usu\xe1rios:</strong> Usu\xe1rios podem visualizar estabelecimentos, deixar avalia\xe7\xf5es e coment\xe1rios</p>\n \x1b[2m246\x1b[0m |           </div>\n \x1b[2m247\x1b[0m |         </div>\n \x1b[2m248\x1b[0m |       </div>\n \x1b[2m249\x1b[0m | \n \x1b[2m250\x1b[0m |       {/* Tabs */}\n \x1b[2m251\x1b[0m |       <div className="flex space-x-1 mb-8 bg-secondary-100 p-1 rounded-lg">\n \x1b[2m252\x1b[0m |         <button\n \x1b[2m253\x1b[0m |           onClick={() => setActiveTab(\'establishments\')}\n \x1b[2m254\x1b[0m |           className={`flex items-center px-4 py-2 rounded-md text-accessible-base font-medium transition-colors ${\n \x1b[2m255\x1b[0m |             activeTab === \'establishments\'\n \x1b[2m256\x1b[0m |               ? \'bg-white text-primary-600 shadow-sm\'\n \x1b[2m257\x1b[0m |               : \'text-secondary-600 hover:text-secondary-800\'\n \x1b[2m258\x1b[0m |           }`}\n \x1b[2m259\x1b[0m |         >\n \x1b[2m260\x1b[0m |           <BuildingOfficeIcon className="w-5 h-5 mr-2" />\n \x1b[2m261\x1b[0m |           Estabelecimentos ({establishments.length})\n \x1b[2m262\x1b[0m |         </button>\n \x1b[2m263\x1b[0m |         <button\n \x1b[2m264\x1b[0m |           onClick={() => setActiveTab(\'users\')}\n \x1b[2m265\x1b[0m |           className={`flex items-center px-4 py-2 rounded-md text-accessible-base font-medium transition-colors ${\n \x1b[2m266\x1b[0m |             activeTab === \'users\'\n \x1b[2m267\x1b[0m |               ? \'bg-white text-primary-600 shadow-sm\'\n \x1b[2m268\x1b[0m |               : \'text-secondary-600 hover:text-secondary-800\'\n \x1b[2m269\x1b[0m |           }`}\n \x1b[2m270\x1b[0m |         >\n \x1b[2m271\x1b[0m |           <UsersIcon className="w-5 h-5 mr-2" />\n \x1b[2m272\x1b[0m |           Usu\xe1rios ({users.length})\n \x1b[2m273\x1b[0m |         </button>\n \x1b[2m274\x1b[0m |       </div>\n \x1b[2m275\x1b[0m | \n \x1b[2m276\x1b[0m |       {/* Establishments Tab */}\n \x1b[2m277\x1b[0m |       {activeTab === \'establishments\' && (\n \x1b[2m278\x1b[0m |         <>\n \x1b[2m279\x1b[0m |           <div className="flex items-center justify-between mb-6">\n \x1b[2m280\x1b[0m |             <h2 className="text-accessible-xl font-semibold text-secondary-800">\n \x1b[2m281\x1b[0m |               Gest\xe3o de Estabelecimentos\n \x1b[2m282\x1b[0m |             </h2>\n \x1b[2m283\x1b[0m |             <button\n \x1b[2m284\x1b[0m |               onClick={() => setShowForm(true)}\n \x1b[2m285\x1b[0m |               className="btn btn-primary flex items-center"\n \x1b[2m286\x1b[0m |             >\n \x1b[2m287\x1b[0m |               <PlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m288\x1b[0m |               Novo Estabelecimento\n \x1b[2m289\x1b[0m |             </button>\n \x1b[2m290\x1b[0m |           </div>\n \x1b[2m291\x1b[0m | \n \x1b[2m292\x1b[0m |           {/* Establishments List */}\n \x1b[2m293\x1b[0m |           <div className="space-y-4">\n \x1b[2m294\x1b[0m |             {establishments.map((establishment) => (\n \x1b[2m295\x1b[0m |               <div key={establishment.id} className="card hover:shadow-lg transition-shadow">\n \x1b[2m296\x1b[0m |                 <div className="flex items-start justify-between">\n \x1b[2m297\x1b[0m |                   <div className="flex-1">\n \x1b[2m298\x1b[0m |                     <div className="flex items-center mb-2">\n \x1b[2m299\x1b[0m |                       <h3 className="text-accessible-lg font-semibold text-secondary-800 mr-3">\n \x1b[2m300\x1b[0m |                         {establishment.name}\n \x1b[2m301\x1b[0m |                       </h3>\n \x1b[2m302\x1b[0m |                       {establishment.certified_autism_friendly && (\n \x1b[2m303\x1b[0m |                         <ShieldCheckIcon className="w-5 h-5 text-green-600" />\n \x1b[2m304\x1b[0m |                       )}\n \x1b[2m305\x1b[0m |                       <span className="ml-2 bg-secondary-100 text-secondary-700 px-2 py-1 rounded text-accessible-sm">\n \x1b[2m306\x1b[0m |                         {ESTABLISHMENT_TYPES[establishment.type as keyof typeof ESTABLISHMENT_TYPES]}\n \x1b[2m307\x1b[0m |                       </span>\n \x1b[2m308\x1b[0m |                     </div>\n \x1b[2m309\x1b[0m |                     \n \x1b[2m310\x1b[0m |                     <p className="text-secondary-600 text-accessible-base mb-2 line-clamp-2">\n \x1b[2m311\x1b[0m |                       {establishment.description}\n \x1b[2m312\x1b[0m |                     </p>\n \x1b[2m313\x1b[0m |                     \n \x1b[2m314\x1b[0m |                     <div className="flex items-center text-accessible-sm text-secondary-500">\n \x1b[2m315\x1b[0m |                       <MapPinIcon className="w-4 h-4 mr-1" />\n \x1b[2m316\x1b[0m |                       {establishment.address}\n \x1b[2m317\x1b[0m |                     </div>\n \x1b[2m318\x1b[0m |                     \n \x1b[2m319\x1b[0m |                     {establishment.accessibility_features.length > 0 && (\n \x1b[2m320\x1b[0m |                       <div className="mt-2 flex flex-wrap gap-1">\n \x1b[2m321\x1b[0m |                         {establishment.accessibility_features.slice(0, 3).map((feature) => (\n \x1b[2m322\x1b[0m |                           <span\n \x1b[2m323\x1b[0m |                             key={feature}\n \x1b[2m324\x1b[0m |                             className="text-xs bg-autism-friendly text-secondary-700 px-2 py-1 rounded"\n \x1b[2m325\x1b[0m |                           >\n \x1b[2m326\x1b[0m |                             {ACCESSIBILITY_FEATURES[feature as keyof typeof ACCESSIBILITY_FEATURES] || feature}\n \x1b[2m327\x1b[0m |                           </span>\n \x1b[2m328\x1b[0m |                         ))}\n \x1b[2m329\x1b[0m |                         {establishment.accessibility_features.length > 3 && (\n \x1b[2m330\x1b[0m |                           <span className="text-xs text-secondary-500">\n \x1b[2m331\x1b[0m |                             +{establishment.accessibility_features.length - 3} mais\n \x1b[2m332\x1b[0m |                           </span>\n \x1b[2m333\x1b[0m |                         )}\n \x1b[2m334\x1b[0m |                       </div>\n \x1b[2m335\x1b[0m |                     )}\n \x1b[2m336\x1b[0m |                   </div>\n \x1b[2m337\x1b[0m |                   \n \x1b[2m338\x1b[0m |                   <div className="flex space-x-2 ml-4">\n \x1b[2m339\x1b[0m |                     <button\n \x1b[2m340\x1b[0m |                       onClick={() => handleEdit(establishment)}\n \x1b[2m341\x1b[0m |                       className="p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors"\n \x1b[2m342\x1b[0m |                     >\n \x1b[2m343\x1b[0m |                       <PencilIcon className="w-5 h-5" />\n \x1b[2m344\x1b[0m |                     </button>\n \x1b[2m345\x1b[0m |                     <button\n \x1b[2m346\x1b[0m |                       onClick={() => handleDelete(establishment.id!)}\n \x1b[2m347\x1b[0m |                       className="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"\n \x1b[2m348\x1b[0m |                     >\n \x1b[2m349\x1b[0m |                       <TrashIcon className="w-5 h-5" />\n \x1b[2m350\x1b[0m |                     </button>\n \x1b[2m351\x1b[0m |                   </div>\n \x1b[2m352\x1b[0m |                 </div>\n \x1b[2m353\x1b[0m |               </div>\n \x1b[2m354\x1b[0m |             ))}\n \x1b[2m355\x1b[0m |           </div>\n \x1b[2m356\x1b[0m | \n \x1b[2m357\x1b[0m |           {establishments.length === 0 && (\n \x1b[2m358\x1b[0m |             <div className="text-center py-12">\n \x1b[2m359\x1b[0m |               <BuildingOfficeIcon className="w-16 h-16 text-secondary-300 mx-auto mb-4" />\n \x1b[2m360\x1b[0m |               <h3 className="text-accessible-xl font-semibold text-secondary-600 mb-2">\n \x1b[2m361\x1b[0m |                 Nenhum estabelecimento cadastrado\n \x1b[2m362\x1b[0m |               </h3>\n \x1b[2m363\x1b[0m |               <p className="text-accessible-base text-secondary-500 mb-4">\n \x1b[2m364\x1b[0m |                 Comece criando seu primeiro estabelecimento autism-friendly\n \x1b[2m365\x1b[0m |               </p>\n \x1b[2m366\x1b[0m |               <button\n \x1b[2m367\x1b[0m |                 onClick={() => setShowForm(true)}\n \x1b[2m368\x1b[0m |                 className="btn btn-primary"\n \x1b[2m369\x1b[0m |               >\n \x1b[2m370\x1b[0m |                 Criar Primeiro Estabelecimento\n \x1b[2m371\x1b[0m |               </button>\n \x1b[2m372\x1b[0m |             </div>\n \x1b[2m373\x1b[0m |           )}\n \x1b[2m374\x1b[0m |         </>\n \x1b[2m375\x1b[0m |       )}\n \x1b[2m376\x1b[0m | \n \x1b[2m377\x1b[0m |       {/* Users Tab */}\n \x1b[2m378\x1b[0m |       {activeTab === \'users\' && (\n \x1b[2m379\x1b[0m |         <>\n \x1b[2m380\x1b[0m |           <div className="flex items-center justify-between mb-6">\n \x1b[2m381\x1b[0m |             <h2 className="text-accessible-xl font-semibold text-secondary-800">\n \x1b[2m382\x1b[0m |               Gest\xe3o de Usu\xe1rios\n \x1b[2m383\x1b[0m |             </h2>\n \x1b[2m384\x1b[0m |             <button\n \x1b[2m385\x1b[0m |               onClick={() => window.location.href = \'/profile\'}\n \x1b[2m386\x1b[0m |               className="btn btn-primary flex items-center"\n \x1b[2m387\x1b[0m |             >\n \x1b[2m388\x1b[0m |               <UserPlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m389\x1b[0m |               Criar Usu\xe1rio\n \x1b[2m390\x1b[0m |             </button>\n \x1b[2m391\x1b[0m |           </div>\n \x1b[2m392\x1b[0m | \n \x1b[2m393\x1b[0m |           {/* Users List */}\n \x1b[2m394\x1b[0m |           <div className="space-y-4">\n \x1b[2m395\x1b[0m |             {users.map((user) => (\n \x1b[2m396\x1b[0m |               <div key={user.id} className="card hover:shadow-lg transition-shadow">\n \x1b[2m397\x1b[0m |                 <div className="flex items-start justify-between">\n \x1b[2m398\x1b[0m |                   <div className="flex-1">\n \x1b[2m399\x1b[0m |                     <h3 className="text-accessible-lg font-semibold text-secondary-800 mb-1">\n \x1b[2m400\x1b[0m |                       {user.name || \'Nome n\xe3o informado\'}\n \x1b[2m401\x1b[0m |                     </h3>\n \x1b[2m402\x1b[0m |                     <p className="text-secondary-600 text-accessible-base mb-2">\n \x1b[2m403\x1b[0m |                       {user.email || \'Email n\xe3o informado\'}\n \x1b[2m404\x1b[0m |                     </p>\n \x1b[2m405\x1b[0m |                     <div className="flex items-center text-accessible-sm text-secondary-500">\n \x1b[2m406\x1b[0m |                       <span className="mr-4">\n \x1b[2m407\x1b[0m |                         Idioma: {user.language_preference === \'pt\' ? \'\uD83C\uDDF5\uD83C\uDDF9 Portugu\xeas\' : \'\uD83C\uDDEC\uD83C\uDDE7 English\'}\n \x1b[2m408\x1b[0m |                       </span>\n \x1b[2m409\x1b[0m |                       {user.sensory_profile && (\n \x1b[2m410\x1b[0m |                         <span>\n \x1b[2m411\x1b[0m |                           Perfil sensorial configurado âœ“\n \x1b[2m412\x1b[0m |                         </span>\n \x1b[2m413\x1b[0m |                       )}\n \x1b[2m414\x1b[0m |                     </div>\n \x1b[2m415\x1b[0m |                   </div>\n \x1b[2m416\x1b[0m |                   \n \x1b[2m417\x1b[0m |                   <div className="flex space-x-2 ml-4">\n \x1b[2m418\x1b[0m |                     <button\n \x1b[2m419\x1b[0m |                       onClick={() => window.location.href = \'/profile\'}\n \x1b[2m420\x1b[0m |                       className="p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors"\n \x1b[2m421\x1b[0m |                       title="Editar usu\xe1rio"\n \x1b[2m422\x1b[0m |                     >\n \x1b[2m423\x1b[0m |                       <PencilIcon className="w-5 h-5" />\n \x1b[2m424\x1b[0m |                     </button>\n \x1b[2m425\x1b[0m |                   </div>\n \x1b[2m426\x1b[0m |                 </div>\n \x1b[2m427\x1b[0m |               </div>\n \x1b[2m428\x1b[0m |             ))}\n \x1b[2m429\x1b[0m |           </div>\n \x1b[2m430\x1b[0m | \n \x1b[2m431\x1b[0m |           {users.length === 0 && (\n \x1b[2m432\x1b[0m |             <div className="text-center py-12">\n \x1b[2m433\x1b[0m |               <UsersIcon className="w-16 h-16 text-secondary-300 mx-auto mb-4" />\n \x1b[2m434\x1b[0m |               <h3 className="text-accessible-xl font-semibold text-secondary-600 mb-2">\n \x1b[2m435\x1b[0m |                 Nenhum usu\xe1rio cadastrado\n \x1b[2m436\x1b[0m |               </h3>\n \x1b[2m437\x1b[0m |               <p className="text-accessible-base text-secondary-500 mb-4">\n \x1b[2m438\x1b[0m |                 Crie perfis para usu\xe1rios que utilizar\xe3o a plataforma\n \x1b[2m439\x1b[0m |               </p>\n \x1b[2m440\x1b[0m |               <button\n \x1b[2m441\x1b[0m |                 onClick={() => window.location.href = \'/profile\'}\n \x1b[2m442\x1b[0m |                 className="btn btn-primary"\n \x1b[2m443\x1b[0m |               >\n \x1b[2m444\x1b[0m |                 Criar Primeiro Usu\xe1rio\n \x1b[2m445\x1b[0m |               </button>\n \x1b[2m446\x1b[0m |             </div>\n \x1b[2m447\x1b[0m |           )}\n \x1b[2m448\x1b[0m |         </>\n \x1b[2m449\x1b[0m |       )}\n \x1b[2m450\x1b[0m | \n \x1b[2m451\x1b[0m |       {/* Form Modal - Only for Establishments */}\n \x1b[2m452\x1b[0m |       {showForm && (\n \x1b[2m453\x1b[0m |         <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">\n \x1b[2m454\x1b[0m |           <div className="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">\n \x1b[2m455\x1b[0m |             <div className="p-6">\n \x1b[2m456\x1b[0m |               <div className="flex items-center justify-between mb-6">\n \x1b[2m457\x1b[0m |                 <h2 className="text-accessible-xl font-semibold text-secondary-800">\n \x1b[2m458\x1b[0m |                   {editingId ? \'Editar Estabelecimento\' : \'Novo Estabelecimento\'}\n \x1b[2m459\x1b[0m |                 </h2>\n \x1b[2m460\x1b[0m |                 <button\n \x1b[2m461\x1b[0m |                   onClick={handleCancel}\n \x1b[2m462\x1b[0m |                   className="p-2 hover:bg-secondary-100 rounded-lg"\n \x1b[2m463\x1b[0m |                 >\n \x1b[2m464\x1b[0m |                   <XMarkIcon className="w-6 h-6 text-secondary-600" />\n \x1b[2m465\x1b[0m |                 </button>\n \x1b[2m466\x1b[0m |               </div>\n \x1b[2m467\x1b[0m | \n \x1b[2m468\x1b[0m |               <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">\n \x1b[2m469\x1b[0m |                 {/* Basic Information */}\n \x1b[2m470\x1b[0m |                 <div className="grid grid-cols-1 md:grid-cols-2 gap-6">\n \x1b[2m471\x1b[0m |                   <div>\n \x1b[2m472\x1b[0m |                     <label className="label">Nome *</label>\n \x1b[2m473\x1b[0m |                     <input\n \x1b[2m474\x1b[0m |                       {...register(\'name\', { required: \'Nome \xe9 obrigat\xf3rio\' })}\n \x1b[2m475\x1b[0m |                       className="input"\n \x1b[2m476\x1b[0m |                       placeholder="Nome do estabelecimento"\n \x1b[2m477\x1b[0m |                     />\n \x1b[2m478\x1b[0m |                     {errors.name && (\n \x1b[2m479\x1b[0m |                       <p className="text-red-500 text-accessible-sm mt-1">{errors.name.message}</p>\n \x1b[2m480\x1b[0m |                     )}\n \x1b[2m481\x1b[0m |                   </div>\n \x1b[2m482\x1b[0m | \n \x1b[2m483\x1b[0m |                   <div>\n \x1b[2m484\x1b[0m |                     <label className="label">Tipo *</label>\n \x1b[2m485\x1b[0m |                     <select\n \x1b[2m486\x1b[0m |                       {...register(\'type\', { required: \'Tipo \xe9 obrigat\xf3rio\' })}\n \x1b[2m487\x1b[0m |                       className="input"\n \x1b[2m488\x1b[0m |                     >\n \x1b[2m489\x1b[0m |                       <option value="">Selecione o tipo</option>\n \x1b[2m490\x1b[0m |                       {Object.entries(ESTABLISHMENT_TYPES).map(([value, label]) => (\n \x1b[2m491\x1b[0m |                         <option key={value} value={value}>{label}</option>\n \x1b[2m492\x1b[0m |                       ))}\n \x1b[2m493\x1b[0m |                     </select>\n \x1b[2m494\x1b[0m |                     {errors.type && (\n \x1b[2m495\x1b[0m |                       <p className="text-red-500 text-accessible-sm mt-1">{errors.type.message}</p>\n \x1b[2m496\x1b[0m |                     )}\n \x1b[2m497\x1b[0m |                   </div>\n \x1b[2m498\x1b[0m |                 </div>\n \x1b[2m499\x1b[0m | \n \x1b[2m500\x1b[0m |                 <div>\n \x1b[2m501\x1b[0m |                   <label className="label">Descri\xe7\xe3o *</label>\n \x1b[2m502\x1b[0m |                   <textarea\n \x1b[2m503\x1b[0m |                     {...register(\'description\', { required: \'Descri\xe7\xe3o \xe9 obrigat\xf3ria\' })}\n \x1b[2m504\x1b[0m |                     className="input"\n \x1b[2m505\x1b[0m |                     rows={3}\n \x1b[2m506\x1b[0m |                     placeholder="Descri\xe7\xe3o detalhada do estabelecimento"\n \x1b[2m507\x1b[0m |                   />\n \x1b[2m508\x1b[0m |                   {errors.description && (\n \x1b[2m509\x1b[0m |                     <p className="text-red-500 text-accessible-sm mt-1">{errors.description.message}</p>\n \x1b[2m510\x1b[0m |                   )}\n \x1b[2m511\x1b[0m |                 </div>\n \x1b[2m512\x1b[0m | \n \x1b[2m513\x1b[0m |                 <div>\n \x1b[2m514\x1b[0m |                   <label className="label">Endere\xe7o *</label>\n \x1b[2m515\x1b[0m |                   <input\n \x1b[2m516\x1b[0m |                     {...register(\'address\', { required: \'Endere\xe7o \xe9 obrigat\xf3rio\' })}\n \x1b[2m517\x1b[0m |                     className="input"\n \x1b[2m518\x1b[0m |                     placeholder="Endere\xe7o completo"\n \x1b[2m519\x1b[0m |                   />\n \x1b[2m520\x1b[0m |                   {errors.address && (\n \x1b[2m521\x1b[0m |                     <p className="text-red-500 text-accessible-sm mt-1">{errors.address.message}</p>\n \x1b[2m522\x1b[0m |                   )}\n \x1b[2m523\x1b[0m |                 </div>\n \x1b[2m524\x1b[0m | \n \x1b[2m525\x1b[0m |                 {/* Coordinates */}\n \x1b[2m526\x1b[0m |                 <div className="grid grid-cols-1 md:grid-cols-2 gap-6">\n \x1b[2m527\x1b[0m |                   <div>\n \x1b[2m528\x1b[0m |                     <label className="label">Latitude</label>\n \x1b[2m529\x1b[0m |                     <input\n \x1b[2m530\x1b[0m |                       {...register(\'coordinates.lat\')}\n \x1b[2m531\x1b[0m |                       type="number"\n \x1b[2m532\x1b[0m |                       step="any"\n \x1b[2m533\x1b[0m |                       className="input"\n \x1b[2m534\x1b[0m |                       placeholder="37.0"\n \x1b[2m535\x1b[0m |                     />\n \x1b[2m536\x1b[0m |                   </div>\n \x1b[2m537\x1b[0m |                   <div>\n \x1b[2m538\x1b[0m |                     <label className="label">Longitude</label>\n \x1b[2m539\x1b[0m |                     <input\n \x1b[2m540\x1b[0m |                       {...register(\'coordinates.lng\')}\n \x1b[2m541\x1b[0m |                       type="number"\n \x1b[2m542\x1b[0m |                       step="any"\n \x1b[2m543\x1b[0m |                       className="input"\n \x1b[2m544\x1b[0m |                       placeholder="-8.0"\n \x1b[2m545\x1b[0m |                     />\n \x1b[2m546\x1b[0m |                   </div>\n \x1b[2m547\x1b[0m |                 </div>\n \x1b[2m548\x1b[0m | \n \x1b[2m549\x1b[0m |                 {/* Certification */}\n \x1b[2m550\x1b[0m |                 <div>\n \x1b[2m551\x1b[0m |                   <label className="flex items-center">\n \x1b[2m552\x1b[0m |                     <input\n \x1b[2m553\x1b[0m |                       {...register(\'certified_autism_friendly\')}\n \x1b[2m554\x1b[0m |                       type="checkbox"\n \x1b[2m555\x1b[0m |                       className="mr-3 w-4 h-4 text-primary-600 rounded focus:ring-primary-500"\n \x1b[2m556\x1b[0m |                     />\n \x1b[2m557\x1b[0m |                     <ShieldCheckIcon className="w-5 h-5 text-green-600 mr-2" />\n \x1b[2m558\x1b[0m |                     <span className="label mb-0">Certificado Autism Friendly</span>\n \x1b[2m559\x1b[0m |                   </label>\n \x1b[2m560\x1b[0m |                 </div>\n \x1b[2m561\x1b[0m | \n \x1b[2m562\x1b[0m |                 {/* Accessibility Features */}\n \x1b[2m563\x1b[0m |                 <div>\n \x1b[2m564\x1b[0m |                   <label className="label">Recursos de Acessibilidade</label>\n \x1b[2m565\x1b[0m |                   <div className="grid grid-cols-2 md:grid-cols-3 gap-3">\n \x1b[2m566\x1b[0m |                     {Object.entries(ACCESSIBILITY_FEATURES).map(([feature, label]) => (\n \x1b[2m567\x1b[0m |                       <label key={feature} className="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-secondary-50">\n \x1b[2m568\x1b[0m |                         <input\n \x1b[2m569\x1b[0m |                           type="checkbox"\n \x1b[2m570\x1b[0m |                           checked={watch(\'accessibility_features\')?.includes(feature) || false}\n \x1b[2m571\x1b[0m |                           onChange={() => handleFeatureToggle(feature)}\n \x1b[2m572\x1b[0m |                           className="mr-3 w-4 h-4 text-primary-600 rounded focus:ring-primary-500"\n \x1b[2m573\x1b[0m |                         />\n \x1b[2m574\x1b[0m |                         <span className="text-accessible-sm">{label}</span>\n \x1b[2m575\x1b[0m |                       </label>\n \x1b[2m576\x1b[0m |                     ))}\n \x1b[2m577\x1b[0m |                   </div>\n \x1b[2m578\x1b[0m |                 </div>\n \x1b[2m579\x1b[0m | \n \x1b[2m580\x1b[0m |                 {/* Contact Information */}\n \x1b[2m581\x1b[0m |                 <div>\n \x1b[2m582\x1b[0m |                   <label className="label">Informa\xe7\xf5es de Contato</label>\n \x1b[2m583\x1b[0m |                   <div className="grid grid-cols-1 md:grid-cols-3 gap-4">\n \x1b[2m584\x1b[0m |                     <input\n \x1b[2m585\x1b[0m |                       {...register(\'contact_info.phone\')}\n \x1b[2m586\x1b[0m |                       className="input"\n \x1b[2m587\x1b[0m |                       placeholder="Telefone"\n \x1b[2m588\x1b[0m |                     />\n \x1b[2m589\x1b[0m |                     <input\n \x1b[2m590\x1b[0m |                       {...register(\'contact_info.email\')}\n \x1b[2m591\x1b[0m |                       type="email"\n \x1b[2m592\x1b[0m |                       className="input"\n \x1b[2m593\x1b[0m |                       placeholder="Email"\n \x1b[2m594\x1b[0m |                     />\n \x1b[2m595\x1b[0m |                     <input\n \x1b[2m596\x1b[0m |                       {...register(\'contact_info.website\')}\n \x1b[2m597\x1b[0m |                       className="input"\n \x1b[2m598\x1b[0m |                       placeholder="Website"\n \x1b[2m599\x1b[0m |                     />\n \x1b[2m600\x1b[0m |                   </div>\n \x1b[2m601\x1b[0m |                 </div>\n \x1b[2m602\x1b[0m | \n \x1b[2m603\x1b[0m |                 {/* Opening Hours */}\n \x1b[2m604\x1b[0m |                 <div>\n \x1b[2m605\x1b[0m |                   <label className="label">Hor\xe1rios de Funcionamento</label>\n \x1b[2m606\x1b[0m |                   <div className="grid grid-cols-1 md:grid-cols-2 gap-4">\n \x1b[2m607\x1b[0m |                     {Object.entries(DAYS_OF_WEEK).map(([day, label]) => (\n \x1b[2m608\x1b[0m |                       <div key={day} className="flex items-center space-x-2">\n \x1b[2m609\x1b[0m |                         <span className="w-24 text-accessible-sm">{label}:</span>\n \x1b[2m610\x1b[0m |                         <input\n \x1b[2m611\x1b[0m |                           {...register(`opening_hours.${day}` as const)}\n \x1b[2m612\x1b[0m |                           className="input flex-1"\n \x1b[2m613\x1b[0m |                           placeholder="09:00-18:00"\n \x1b[2m614\x1b[0m |                         />\n \x1b[2m615\x1b[0m |                       </div>\n \x1b[2m616\x1b[0m |                     ))}\n \x1b[2m617\x1b[0m |                   </div>\n \x1b[2m618\x1b[0m |                 </div>\n \x1b[2m619\x1b[0m | \n \x1b[2m620\x1b[0m |                 {/* Images */}\n \x1b[2m621\x1b[0m |                 <div>\n \x1b[2m622\x1b[0m |                   <label className="label">Imagens</label>\n \x1b[2m623\x1b[0m |                   <div className="border-2 border-dashed border-secondary-300 rounded-lg p-6">\n \x1b[2m624\x1b[0m |                     <input\n \x1b[2m625\x1b[0m |                       type="file"\n \x1b[2m626\x1b[0m |                       multiple\n \x1b[2m627\x1b[0m |                       accept="image/*"\n \x1b[2m628\x1b[0m |                       onChange={handleImageUpload}\n \x1b[2m629\x1b[0m |                       className="hidden"\n \x1b[2m630\x1b[0m |                       id="image-upload"\n \x1b[2m631\x1b[0m |                     />\n \x1b[2m632\x1b[0m |                     <label\n \x1b[2m633\x1b[0m |                       htmlFor="image-upload"\n \x1b[2m634\x1b[0m |                       className="flex flex-col items-center cursor-pointer"\n \x1b[2m635\x1b[0m |                     >\n \x1b[2m636\x1b[0m |                       <PhotoIcon className="w-12 h-12 text-secondary-400 mb-2" />\n \x1b[2m637\x1b[0m |                       <span className="text-accessible-base text-secondary-600">\n \x1b[2m638\x1b[0m |                         Clique para selecionar imagens\n \x1b[2m639\x1b[0m |                       </span>\n \x1b[2m640\x1b[0m |                     </label>\n \x1b[2m641\x1b[0m |                   </div>\n \x1b[2m642\x1b[0m | \n \x1b[2m643\x1b[0m |                   {/* Selected Images Preview */}\n \x1b[2m644\x1b[0m |                   {selectedImages.length > 0 && (\n \x1b[2m645\x1b[0m |                     <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">\n \x1b[2m646\x1b[0m |                       {selectedImages.map((image, index) => (\n \x1b[2m647\x1b[0m |                         <div key={index} className="relative">\n \x1b[2m648\x1b[0m |                           <img\n \x1b[2m649\x1b[0m |                             src={`data:image/jpeg;base64,${image}`}\n \x1b[2m650\x1b[0m |                             alt={`Preview ${index + 1}`}\n \x1b[2m651\x1b[0m |                             className="w-full h-24 object-cover rounded-lg"\n \x1b[2m652\x1b[0m |                           />\n \x1b[2m653\x1b[0m |                           <button\n \x1b[2m654\x1b[0m |                             type="button"\n \x1b[2m655\x1b[0m |                             onClick={() => removeImage(index)}\n \x1b[2m656\x1b[0m |                             className="absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600"\n \x1b[2m657\x1b[0m |                           >\n \x1b[2m658\x1b[0m |                             <XMarkIcon className="w-4 h-4" />\n \x1b[2m659\x1b[0m |                           </button>\n \x1b[2m660\x1b[0m |                         </div>\n \x1b[2m661\x1b[0m |                       ))}\n \x1b[2m662\x1b[0m |                     </div>\n \x1b[2m663\x1b[0m |                   )}\n \x1b[2m664\x1b[0m |                 </div>\n \x1b[2m665\x1b[0m | \n \x1b[2m666\x1b[0m |                 {/* Form Actions */}\n \x1b[2m667\x1b[0m |                 <div className="flex justify-end space-x-4 pt-6 border-t">\n \x1b[2m668\x1b[0m |                   <button\n \x1b[2m669\x1b[0m |                     type="button"\n \x1b[2m670\x1b[0m |                     onClick={handleCancel}\n \x1b[2m671\x1b[0m |                     className="btn btn-secondary"\n \x1b[2m672\x1b[0m |                   >\n \x1b[2m673\x1b[0m |                     Cancelar\n \x1b[2m674\x1b[0m |                   </button>\n \x1b[2m675\x1b[0m |                   <button\n \x1b[2m676\x1b[0m |                     type="submit"\n \x1b[2m677\x1b[0m |                     disabled={loading}\n \x1b[2m678\x1b[0m |                     className="btn btn-primary flex items-center"\n \x1b[2m679\x1b[0m |                   >\n \x1b[2m680\x1b[0m |                     {loading ? (\n \x1b[2m681\x1b[0m |                       <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"></div>\n \x1b[2m682\x1b[0m |                     ) : (\n \x1b[2m683\x1b[0m |                       <PlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m684\x1b[0m |                     )}\n \x1b[2m685\x1b[0m |                     {editingId ? \'Atualizar\' : \'Criar\'} Estabelecimento\n \x1b[2m686\x1b[0m |                   </button>\n \x1b[2m687\x1b[0m |                 </div>\n \x1b[2m688\x1b[0m |               </form>\n \x1b[2m689\x1b[0m |             </div>\n \x1b[2m690\x1b[0m |           </div>\n \x1b[2m691\x1b[0m |         </div>\n \x1b[2m692\x1b[0m |       )}\n \x1b[2m693\x1b[0m |     </div>\n \x1b[2m694\x1b[0m |   )\n \x1b[2m695\x1b[0m | }\n \x1b[2m696\x1b[0m | \n \x1b[2m697\x1b[0m | interface Establishment {\n \x1b[2m698\x1b[0m |   id?: string\n \x1b[2m699\x1b[0m |   name: string\n \x1b[2m700\x1b[0m |   type: string\n \x1b[2m701\x1b[0m |   description: string\n \x1b[2m702\x1b[0m |   address: string\n \x1b[2m703\x1b[0m |   coordinates: { lat: number; lng: number }\n \x1b[2m704\x1b[0m |   accessibility_features: string[]\n \x1b[2m705\x1b[0m |   certified_autism_friendly: boolean\n \x1b[2m706\x1b[0m |   contact_info: { [key: string]: string }\n \x1b[2m707\x1b[0m |   opening_hours: { [key: string]: string }\n \x1b[2m708\x1b[0m |   special_hours: string[]\n \x1b[2m709\x1b[0m |   sensory_info: { [key: string]: any }\n \x1b[2m710\x1b[0m |   images: string[]\n \x1b[2m711\x1b[0m | }\n \x1b[2m712\x1b[0m | \n \x1b[2m713\x1b[0m | const ESTABLISHMENT_TYPES = {\n \x1b[2m714\x1b[0m |   hotel: \'Hotel\',\n \x1b[2m715\x1b[0m |   restaurant: \'Restaurante\',\n \x1b[2m716\x1b[0m |   attraction: \'Atra\xe7\xe3o\',\n \x1b[2m717\x1b[0m |   event: \'Evento\',\n \x1b[2m718\x1b[0m |   shopping: \'Compras\',\n \x1b[2m719\x1b[0m |   transport: \'Transporte\'\n \x1b[2m720\x1b[0m | }\n \x1b[2m721\x1b[0m | \n \x1b[2m722\x1b[0m | const ACCESSIBILITY_FEATURES = {\n \x1b[2m723\x1b[0m |   quiet_spaces: \'Espa\xe7os Silenciosos\',\n \x1b[2m724\x1b[0m |   sensory_rooms: \'Salas Sensoriais\',\n \x1b[2m725\x1b[0m |   low_lighting: \'Ilumina\xe7\xe3o Reduzida\',\n \x1b[2m726\x1b[0m |   trained_staff: \'Equipe Treinada\',\n \x1b[2m727\x1b[0m |   visual_schedules: \'Hor\xe1rios Visuais\',\n \x1b[2m728\x1b[0m |   noise_reduction: \'Redu\xe7\xe3o de Ru\xeddo\',\n \x1b[2m729\x1b[0m |   calm_environment: \'Ambiente Calmo\',\n \x1b[2m730\x1b[0m |   flexible_timing: \'Hor\xe1rios Flex\xedveis\'\n \x1b[2m731\x1b[0m | }\n \x1b[2m732\x1b[0m | \n \x1b[2m733\x1b[0m | const DAYS_OF_WEEK = {\n     : \x1b[33;1m      ^^^^^^|^^^^^\x1b[0m\n     :             \x1b[33;1m`-- \x1b[33;1m`DAYS_OF_WEEK` redefined here\x1b[0m\x1b[0m\n \x1b[2m734\x1b[0m |   monday: \'Segunda-feira\',\n \x1b[2m735\x1b[0m |   tuesday: \'Ter\xe7a-feira\',\n \x1b[2m736\x1b[0m |   wednesday: \'Quarta-feira\',\n     `----\n\n  \x1b[31mx\x1b[0m the name `AdminPage` is defined multiple times\n     ,-[\x1b[36;1;4m/app/frontend/src/app/admin/page.tsx\x1b[0m:70:1]\n \x1b[2m 70\x1b[0m |   sunday: \'Domingo\'\n \x1b[2m 71\x1b[0m | }\n \x1b[2m 72\x1b[0m | \n \x1b[2m 73\x1b[0m | export default function AdminPage() {\n     : \x1b[31;1m                        ^^^^|^^^^\x1b[0m\n     :                             \x1b[31;1m`-- \x1b[31;1mprevious definition of `AdminPage` here\x1b[0m\x1b[0m\n \x1b[2m 74\x1b[0m |   const [activeTab, setActiveTab] = useState<\'establishments\' | \'users\'>(\'establishments\')\n \x1b[2m 75\x1b[0m |   const [establishments, setEstablishments] = useState<Establishment[]>([])\n \x1b[2m 76\x1b[0m |   const [users, setUsers] = useState<User[]>([])\n \x1b[2m 77\x1b[0m |   const [showForm, setShowForm] = useState(false)\n \x1b[2m 78\x1b[0m |   const [editingId, setEditingId] = useState<string | null>(null)\n \x1b[2m 79\x1b[0m |   const [loading, setLoading] = useState(false)\n \x1b[2m 80\x1b[0m |   const [selectedImages, setSelectedImages] = useState<string[]>([])\n \x1b[2m 81\x1b[0m | \n \x1b[2m 82\x1b[0m |   const { register, handleSubmit, reset, setValue, watch, formState: { errors } } = useForm<Establishment>()\n \x1b[2m 83\x1b[0m | \n \x1b[2m 84\x1b[0m |   useEffect(() => {\n \x1b[2m 85\x1b[0m |     fetchEstablishments()\n \x1b[2m 86\x1b[0m |     fetchUsers()\n \x1b[2m 87\x1b[0m |   }, [])\n \x1b[2m 88\x1b[0m | \n \x1b[2m 89\x1b[0m |   const fetchEstablishments = async () => {\n \x1b[2m 90\x1b[0m |     try {\n \x1b[2m 91\x1b[0m |       const response = await fetch(\'/api/establishments\')\n \x1b[2m 92\x1b[0m |       if (response.ok) {\n \x1b[2m 93\x1b[0m |         const data = await response.json()\n \x1b[2m 94\x1b[0m |         setEstablishments(data)\n \x1b[2m 95\x1b[0m |       }\n \x1b[2m 96\x1b[0m |     } catch (error) {\n \x1b[2m 97\x1b[0m |       console.error(\'Error fetching establishments:\', error)\n \x1b[2m 98\x1b[0m |       toast.error(\'Erro ao carregar estabelecimentos\')\n \x1b[2m 99\x1b[0m |     }\n \x1b[2m100\x1b[0m |   }\n \x1b[2m101\x1b[0m | \n \x1b[2m102\x1b[0m |   const fetchUsers = async () => {\n \x1b[2m103\x1b[0m |     try {\n \x1b[2m104\x1b[0m |       const response = await fetch(\'/api/users\')\n \x1b[2m105\x1b[0m |       if (response.ok) {\n \x1b[2m106\x1b[0m |         const data = await response.json()\n \x1b[2m107\x1b[0m |         setUsers(data)\n \x1b[2m108\x1b[0m |       }\n \x1b[2m109\x1b[0m |     } catch (error) {\n \x1b[2m110\x1b[0m |       console.error(\'Error fetching users:\', error)\n \x1b[2m111\x1b[0m |       // toast.error(\'Erro ao carregar usu\xe1rios\')\n \x1b[2m112\x1b[0m |     }\n \x1b[2m113\x1b[0m |   }\n \x1b[2m114\x1b[0m | \n \x1b[2m115\x1b[0m |   const onSubmit = async (data: Establishment) => {\n \x1b[2m116\x1b[0m |     setLoading(true)\n \x1b[2m117\x1b[0m |     try {\n \x1b[2m118\x1b[0m |       // Add selected images to the data\n \x1b[2m119\x1b[0m |       const formData = {\n \x1b[2m120\x1b[0m |         ...data,\n \x1b[2m121\x1b[0m |         images: selectedImages,\n \x1b[2m122\x1b[0m |         coordinates: {\n \x1b[2m123\x1b[0m |           lat: Number(data.coordinates.lat) || 37.0,\n \x1b[2m124\x1b[0m |           lng: Number(data.coordinates.lng) || -8.0\n \x1b[2m125\x1b[0m |         }\n \x1b[2m126\x1b[0m |       }\n \x1b[2m127\x1b[0m | \n \x1b[2m128\x1b[0m |       let response\n \x1b[2m129\x1b[0m |       if (editingId) {\n \x1b[2m130\x1b[0m |         response = await fetch(`/api/establishments/${editingId}`, {\n \x1b[2m131\x1b[0m |           method: \'PUT\',\n \x1b[2m132\x1b[0m |           headers: { \'Content-Type\': \'application/json\' },\n \x1b[2m133\x1b[0m |           body: JSON.stringify(formData)\n \x1b[2m134\x1b[0m |         })\n \x1b[2m135\x1b[0m |       } else {\n \x1b[2m136\x1b[0m |         response = await fetch(\'/api/establishments\', {\n \x1b[2m137\x1b[0m |           method: \'POST\',\n \x1b[2m138\x1b[0m |           headers: { \'Content-Type\': \'application/json\' },\n \x1b[2m139\x1b[0m |           body: JSON.stringify(formData)\n \x1b[2m140\x1b[0m |         })\n \x1b[2m141\x1b[0m |       }\n \x1b[2m142\x1b[0m | \n \x1b[2m143\x1b[0m |       if (response.ok) {\n \x1b[2m144\x1b[0m |         toast.success(editingId ? \'Estabelecimento atualizado!\' : \'Estabelecimento criado!\')\n \x1b[2m145\x1b[0m |         fetchEstablishments()\n \x1b[2m146\x1b[0m |         handleCancel()\n \x1b[2m147\x1b[0m |       } else {\n \x1b[2m148\x1b[0m |         toast.error(\'Erro ao salvar estabelecimento\')\n \x1b[2m149\x1b[0m |       }\n \x1b[2m150\x1b[0m |     } catch (error) {\n \x1b[2m151\x1b[0m |       console.error(\'Error saving establishment:\', error)\n \x1b[2m152\x1b[0m |       toast.error(\'Erro ao salvar estabelecimento\')\n \x1b[2m153\x1b[0m |     } finally {\n \x1b[2m154\x1b[0m |       setLoading(false)\n \x1b[2m155\x1b[0m |     }\n \x1b[2m156\x1b[0m |   }\n \x1b[2m157\x1b[0m | \n \x1b[2m158\x1b[0m |   const handleEdit = (establishment: Establishment) => {\n \x1b[2m159\x1b[0m |     setEditingId(establishment.id || null)\n \x1b[2m160\x1b[0m |     setShowForm(true)\n \x1b[2m161\x1b[0m |     setSelectedImages(establishment.images || [])\n \x1b[2m162\x1b[0m |     \n \x1b[2m163\x1b[0m |     // Populate form with existing data\n \x1b[2m164\x1b[0m |     Object.keys(establishment).forEach((key) => {\n \x1b[2m165\x1b[0m |       if (key === \'coordinates\') {\n \x1b[2m166\x1b[0m |         setValue(\'coordinates.lat\', establishment.coordinates.lat)\n \x1b[2m167\x1b[0m |         setValue(\'coordinates.lng\', establishment.coordinates.lng)\n \x1b[2m168\x1b[0m |       } else {\n \x1b[2m169\x1b[0m |         setValue(key as keyof Establishment, establishment[key as keyof Establishment])\n \x1b[2m170\x1b[0m |       }\n \x1b[2m171\x1b[0m |     })\n \x1b[2m172\x1b[0m |   }\n \x1b[2m173\x1b[0m | \n \x1b[2m174\x1b[0m |   const handleDelete = async (id: string) => {\n \x1b[2m175\x1b[0m |     if (!confirm(\'Tem certeza que deseja excluir este estabelecimento?\')) return\n \x1b[2m176\x1b[0m | \n \x1b[2m177\x1b[0m |     try {\n \x1b[2m178\x1b[0m |       const response = await fetch(`/api/establishments/${id}`, {\n \x1b[2m179\x1b[0m |         method: \'DELETE\'\n \x1b[2m180\x1b[0m |       })\n \x1b[2m181\x1b[0m | \n \x1b[2m182\x1b[0m |       if (response.ok) {\n \x1b[2m183\x1b[0m |         toast.success(\'Estabelecimento exclu\xeddo!\')\n \x1b[2m184\x1b[0m |         fetchEstablishments()\n \x1b[2m185\x1b[0m |       } else {\n \x1b[2m186\x1b[0m |         toast.error(\'Erro ao excluir estabelecimento\')\n \x1b[2m187\x1b[0m |       }\n \x1b[2m188\x1b[0m |     } catch (error) {\n \x1b[2m189\x1b[0m |       console.error(\'Error deleting establishment:\', error)\n \x1b[2m190\x1b[0m |       toast.error(\'Erro ao excluir estabelecimento\')\n \x1b[2m191\x1b[0m |     }\n \x1b[2m192\x1b[0m |   }\n \x1b[2m193\x1b[0m | \n \x1b[2m194\x1b[0m |   const handleCancel = () => {\n \x1b[2m195\x1b[0m |     setShowForm(false)\n \x1b[2m196\x1b[0m |     setEditingId(null)\n \x1b[2m197\x1b[0m |     setSelectedImages([])\n \x1b[2m198\x1b[0m |     reset()\n \x1b[2m199\x1b[0m |   }\n \x1b[2m200\x1b[0m | \n \x1b[2m201\x1b[0m |   const handleImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n \x1b[2m202\x1b[0m |     const files = event.target.files\n \x1b[2m203\x1b[0m |     if (!files) return\n \x1b[2m204\x1b[0m | \n \x1b[2m205\x1b[0m |     Array.from(files).forEach((file) => {\n \x1b[2m206\x1b[0m |       const reader = new FileReader()\n \x1b[2m207\x1b[0m |       reader.onload = (e) => {\n \x1b[2m208\x1b[0m |         const base64 = e.target?.result as string\n \x1b[2m209\x1b[0m |         const base64Data = base64.split(\',\')[1] // Remove data:image/jpeg;base64, prefix\n \x1b[2m210\x1b[0m |         setSelectedImages(prev => [...prev, base64Data])\n \x1b[2m211\x1b[0m |       }\n \x1b[2m212\x1b[0m |       reader.readAsDataURL(file)\n \x1b[2m213\x1b[0m |     })\n \x1b[2m214\x1b[0m |   }\n \x1b[2m215\x1b[0m | \n \x1b[2m216\x1b[0m |   const removeImage = (index: number) => {\n \x1b[2m217\x1b[0m |     setSelectedImages(prev => prev.filter((_, i) => i !== index))\n \x1b[2m218\x1b[0m |   }\n \x1b[2m219\x1b[0m | \n \x1b[2m220\x1b[0m |   const handleFeatureToggle = (feature: string) => {\n \x1b[2m221\x1b[0m |     const currentFeatures = watch(\'accessibility_features\') || []\n \x1b[2m222\x1b[0m |     const newFeatures = currentFeatures.includes(feature)\n \x1b[2m223\x1b[0m |       ? currentFeatures.filter(f => f !== feature)\n \x1b[2m224\x1b[0m |       : [...currentFeatures, feature]\n \x1b[2m225\x1b[0m |     setValue(\'accessibility_features\', newFeatures)\n \x1b[2m226\x1b[0m |   }\n \x1b[2m227\x1b[0m | \n \x1b[2m228\x1b[0m |   return (\n \x1b[2m229\x1b[0m |     <div className="container mx-auto px-4 py-8">\n \x1b[2m230\x1b[0m |       {/* Header */}\n \x1b[2m231\x1b[0m |       <div className="mb-8">\n \x1b[2m232\x1b[0m |         <h1 className="text-accessible-2xl font-bold text-secondary-800 mb-2">\n \x1b[2m233\x1b[0m |           Painel Administrativo - TEIA\n \x1b[2m234\x1b[0m |         </h1>\n \x1b[2m235\x1b[0m |         <p className="text-accessible-base text-secondary-600 mb-4">\n \x1b[2m236\x1b[0m |           Gerencie estabelecimentos e usu\xe1rios da plataforma\n \x1b[2m237\x1b[0m |         </p>\n \x1b[2m238\x1b[0m |         \n \x1b[2m239\x1b[0m |         {/* Admin Info Banner */}\n \x1b[2m240\x1b[0m |         <div className="bg-primary-50 border border-primary-200 rounded-lg p-4 mb-6">\n \x1b[2m241\x1b[0m |           <h3 className="font-semibold text-primary-800 mb-2">\uD83D\uDD10 \xc1rea Administrativa</h3>\n \x1b[2m242\x1b[0m |           <div className="text-primary-700 text-accessible-base space-y-1">\n \x1b[2m243\x1b[0m |             <p><strong>Estabelecimentos:</strong> Apenas administradores podem adicionar, editar e excluir estabelecimentos</p>\n \x1b[2m244\x1b[0m |             <p><strong>Usu\xe1rios:</strong> Apenas administradores podem criar perfis de usu\xe1rios</p>\n \x1b[2m245\x1b[0m |             <p><strong>Papel dos Usu\xe1rios:</strong> Usu\xe1rios podem visualizar estabelecimentos, deixar avalia\xe7\xf5es e coment\xe1rios</p>\n \x1b[2m246\x1b[0m |           </div>\n \x1b[2m247\x1b[0m |         </div>\n \x1b[2m248\x1b[0m |       </div>\n \x1b[2m249\x1b[0m | \n \x1b[2m250\x1b[0m |       {/* Tabs */}\n \x1b[2m251\x1b[0m |       <div className="flex space-x-1 mb-8 bg-secondary-100 p-1 rounded-lg">\n \x1b[2m252\x1b[0m |         <button\n \x1b[2m253\x1b[0m |           onClick={() => setActiveTab(\'establishments\')}\n \x1b[2m254\x1b[0m |           className={`flex items-center px-4 py-2 rounded-md text-accessible-base font-medium transition-colors ${\n \x1b[2m255\x1b[0m |             activeTab === \'establishments\'\n \x1b[2m256\x1b[0m |               ? \'bg-white text-primary-600 shadow-sm\'\n \x1b[2m257\x1b[0m |               : \'text-secondary-600 hover:text-secondary-800\'\n \x1b[2m258\x1b[0m |           }`}\n \x1b[2m259\x1b[0m |         >\n \x1b[2m260\x1b[0m |           <BuildingOfficeIcon className="w-5 h-5 mr-2" />\n \x1b[2m261\x1b[0m |           Estabelecimentos ({establishments.length})\n \x1b[2m262\x1b[0m |         </button>\n \x1b[2m263\x1b[0m |         <button\n \x1b[2m264\x1b[0m |           onClick={() => setActiveTab(\'users\')}\n \x1b[2m265\x1b[0m |           className={`flex items-center px-4 py-2 rounded-md text-accessible-base font-medium transition-colors ${\n \x1b[2m266\x1b[0m |             activeTab === \'users\'\n \x1b[2m267\x1b[0m |               ? \'bg-white text-primary-600 shadow-sm\'\n \x1b[2m268\x1b[0m |               : \'text-secondary-600 hover:text-secondary-800\'\n \x1b[2m269\x1b[0m |           }`}\n \x1b[2m270\x1b[0m |         >\n \x1b[2m271\x1b[0m |           <UsersIcon className="w-5 h-5 mr-2" />\n \x1b[2m272\x1b[0m |           Usu\xe1rios ({users.length})\n \x1b[2m273\x1b[0m |         </button>\n \x1b[2m274\x1b[0m |       </div>\n \x1b[2m275\x1b[0m | \n \x1b[2m276\x1b[0m |       {/* Establishments Tab */}\n \x1b[2m277\x1b[0m |       {activeTab === \'establishments\' && (\n \x1b[2m278\x1b[0m |         <>\n \x1b[2m279\x1b[0m |           <div className="flex items-center justify-between mb-6">\n \x1b[2m280\x1b[0m |             <h2 className="text-accessible-xl font-semibold text-secondary-800">\n \x1b[2m281\x1b[0m |               Gest\xe3o de Estabelecimentos\n \x1b[2m282\x1b[0m |             </h2>\n \x1b[2m283\x1b[0m |             <button\n \x1b[2m284\x1b[0m |               onClick={() => setShowForm(true)}\n \x1b[2m285\x1b[0m |               className="btn btn-primary flex items-center"\n \x1b[2m286\x1b[0m |             >\n \x1b[2m287\x1b[0m |               <PlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m288\x1b[0m |               Novo Estabelecimento\n \x1b[2m289\x1b[0m |             </button>\n \x1b[2m290\x1b[0m |           </div>\n \x1b[2m291\x1b[0m | \n \x1b[2m292\x1b[0m |           {/* Establishments List */}\n \x1b[2m293\x1b[0m |           <div className="space-y-4">\n \x1b[2m294\x1b[0m |             {establishments.map((establishment) => (\n \x1b[2m295\x1b[0m |               <div key={establishment.id} className="card hover:shadow-lg transition-shadow">\n \x1b[2m296\x1b[0m |                 <div className="flex items-start justify-between">\n \x1b[2m297\x1b[0m |                   <div className="flex-1">\n \x1b[2m298\x1b[0m |                     <div className="flex items-center mb-2">\n \x1b[2m299\x1b[0m |                       <h3 className="text-accessible-lg font-semibold text-secondary-800 mr-3">\n \x1b[2m300\x1b[0m |                         {establishment.name}\n \x1b[2m301\x1b[0m |                       </h3>\n \x1b[2m302\x1b[0m |                       {establishment.certified_autism_friendly && (\n \x1b[2m303\x1b[0m |                         <ShieldCheckIcon className="w-5 h-5 text-green-600" />\n \x1b[2m304\x1b[0m |                       )}\n \x1b[2m305\x1b[0m |                       <span className="ml-2 bg-secondary-100 text-secondary-700 px-2 py-1 rounded text-accessible-sm">\n \x1b[2m306\x1b[0m |                         {ESTABLISHMENT_TYPES[establishment.type as keyof typeof ESTABLISHMENT_TYPES]}\n \x1b[2m307\x1b[0m |                       </span>\n \x1b[2m308\x1b[0m |                     </div>\n \x1b[2m309\x1b[0m |                     \n \x1b[2m310\x1b[0m |                     <p className="text-secondary-600 text-accessible-base mb-2 line-clamp-2">\n \x1b[2m311\x1b[0m |                       {establishment.description}\n \x1b[2m312\x1b[0m |                     </p>\n \x1b[2m313\x1b[0m |                     \n \x1b[2m314\x1b[0m |                     <div className="flex items-center text-accessible-sm text-secondary-500">\n \x1b[2m315\x1b[0m |                       <MapPinIcon className="w-4 h-4 mr-1" />\n \x1b[2m316\x1b[0m |                       {establishment.address}\n \x1b[2m317\x1b[0m |                     </div>\n \x1b[2m318\x1b[0m |                     \n \x1b[2m319\x1b[0m |                     {establishment.accessibility_features.length > 0 && (\n \x1b[2m320\x1b[0m |                       <div className="mt-2 flex flex-wrap gap-1">\n \x1b[2m321\x1b[0m |                         {establishment.accessibility_features.slice(0, 3).map((feature) => (\n \x1b[2m322\x1b[0m |                           <span\n \x1b[2m323\x1b[0m |                             key={feature}\n \x1b[2m324\x1b[0m |                             className="text-xs bg-autism-friendly text-secondary-700 px-2 py-1 rounded"\n \x1b[2m325\x1b[0m |                           >\n \x1b[2m326\x1b[0m |                             {ACCESSIBILITY_FEATURES[feature as keyof typeof ACCESSIBILITY_FEATURES] || feature}\n \x1b[2m327\x1b[0m |                           </span>\n \x1b[2m328\x1b[0m |                         ))}\n \x1b[2m329\x1b[0m |                         {establishment.accessibility_features.length > 3 && (\n \x1b[2m330\x1b[0m |                           <span className="text-xs text-secondary-500">\n \x1b[2m331\x1b[0m |                             +{establishment.accessibility_features.length - 3} mais\n \x1b[2m332\x1b[0m |                           </span>\n \x1b[2m333\x1b[0m |                         )}\n \x1b[2m334\x1b[0m |                       </div>\n \x1b[2m335\x1b[0m |                     )}\n \x1b[2m336\x1b[0m |                   </div>\n \x1b[2m337\x1b[0m |                   \n \x1b[2m338\x1b[0m |                   <div className="flex space-x-2 ml-4">\n \x1b[2m339\x1b[0m |                     <button\n \x1b[2m340\x1b[0m |                       onClick={() => handleEdit(establishment)}\n \x1b[2m341\x1b[0m |                       className="p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors"\n \x1b[2m342\x1b[0m |                     >\n \x1b[2m343\x1b[0m |                       <PencilIcon className="w-5 h-5" />\n \x1b[2m344\x1b[0m |                     </button>\n \x1b[2m345\x1b[0m |                     <button\n \x1b[2m346\x1b[0m |                       onClick={() => handleDelete(establishment.id!)}\n \x1b[2m347\x1b[0m |                       className="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"\n \x1b[2m348\x1b[0m |                     >\n \x1b[2m349\x1b[0m |                       <TrashIcon className="w-5 h-5" />\n \x1b[2m350\x1b[0m |                     </button>\n \x1b[2m351\x1b[0m |                   </div>\n \x1b[2m352\x1b[0m |                 </div>\n \x1b[2m353\x1b[0m |               </div>\n \x1b[2m354\x1b[0m |             ))}\n \x1b[2m355\x1b[0m |           </div>\n \x1b[2m356\x1b[0m | \n \x1b[2m357\x1b[0m |           {establishments.length === 0 && (\n \x1b[2m358\x1b[0m |             <div className="text-center py-12">\n \x1b[2m359\x1b[0m |               <BuildingOfficeIcon className="w-16 h-16 text-secondary-300 mx-auto mb-4" />\n \x1b[2m360\x1b[0m |               <h3 className="text-accessible-xl font-semibold text-secondary-600 mb-2">\n \x1b[2m361\x1b[0m |                 Nenhum estabelecimento cadastrado\n \x1b[2m362\x1b[0m |               </h3>\n \x1b[2m363\x1b[0m |               <p className="text-accessible-base text-secondary-500 mb-4">\n \x1b[2m364\x1b[0m |                 Comece criando seu primeiro estabelecimento autism-friendly\n \x1b[2m365\x1b[0m |               </p>\n \x1b[2m366\x1b[0m |               <button\n \x1b[2m367\x1b[0m |                 onClick={() => setShowForm(true)}\n \x1b[2m368\x1b[0m |                 className="btn btn-primary"\n \x1b[2m369\x1b[0m |               >\n \x1b[2m370\x1b[0m |                 Criar Primeiro Estabelecimento\n \x1b[2m371\x1b[0m |               </button>\n \x1b[2m372\x1b[0m |             </div>\n \x1b[2m373\x1b[0m |           )}\n \x1b[2m374\x1b[0m |         </>\n \x1b[2m375\x1b[0m |       )}\n \x1b[2m376\x1b[0m | \n \x1b[2m377\x1b[0m |       {/* Users Tab */}\n \x1b[2m378\x1b[0m |       {activeTab === \'users\' && (\n \x1b[2m379\x1b[0m |         <>\n \x1b[2m380\x1b[0m |           <div className="flex items-center justify-between mb-6">\n \x1b[2m381\x1b[0m |             <h2 className="text-accessible-xl font-semibold text-secondary-800">\n \x1b[2m382\x1b[0m |               Gest\xe3o de Usu\xe1rios\n \x1b[2m383\x1b[0m |             </h2>\n \x1b[2m384\x1b[0m |             <button\n \x1b[2m385\x1b[0m |               onClick={() => window.location.href = \'/profile\'}\n \x1b[2m386\x1b[0m |               className="btn btn-primary flex items-center"\n \x1b[2m387\x1b[0m |             >\n \x1b[2m388\x1b[0m |               <UserPlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m389\x1b[0m |               Criar Usu\xe1rio\n \x1b[2m390\x1b[0m |             </button>\n \x1b[2m391\x1b[0m |           </div>\n \x1b[2m392\x1b[0m | \n \x1b[2m393\x1b[0m |           {/* Users List */}\n \x1b[2m394\x1b[0m |           <div className="space-y-4">\n \x1b[2m395\x1b[0m |             {users.map((user) => (\n \x1b[2m396\x1b[0m |               <div key={user.id} className="card hover:shadow-lg transition-shadow">\n \x1b[2m397\x1b[0m |                 <div className="flex items-start justify-between">\n \x1b[2m398\x1b[0m |                   <div className="flex-1">\n \x1b[2m399\x1b[0m |                     <h3 className="text-accessible-lg font-semibold text-secondary-800 mb-1">\n \x1b[2m400\x1b[0m |                       {user.name || \'Nome n\xe3o informado\'}\n \x1b[2m401\x1b[0m |                     </h3>\n \x1b[2m402\x1b[0m |                     <p className="text-secondary-600 text-accessible-base mb-2">\n \x1b[2m403\x1b[0m |                       {user.email || \'Email n\xe3o informado\'}\n \x1b[2m404\x1b[0m |                     </p>\n \x1b[2m405\x1b[0m |                     <div className="flex items-center text-accessible-sm text-secondary-500">\n \x1b[2m406\x1b[0m |                       <span className="mr-4">\n \x1b[2m407\x1b[0m |                         Idioma: {user.language_preference === \'pt\' ? \'\uD83C\uDDF5\uD83C\uDDF9 Portugu\xeas\' : \'\uD83C\uDDEC\uD83C\uDDE7 English\'}\n \x1b[2m408\x1b[0m |                       </span>\n \x1b[2m409\x1b[0m |                       {user.sensory_profile && (\n \x1b[2m410\x1b[0m |                         <span>\n \x1b[2m411\x1b[0m |                           Perfil sensorial configurado âœ“\n \x1b[2m412\x1b[0m |                         </span>\n \x1b[2m413\x1b[0m |                       )}\n \x1b[2m414\x1b[0m |                     </div>\n \x1b[2m415\x1b[0m |                   </div>\n \x1b[2m416\x1b[0m |                   \n \x1b[2m417\x1b[0m |                   <div className="flex space-x-2 ml-4">\n \x1b[2m418\x1b[0m |                     <button\n \x1b[2m419\x1b[0m |                       onClick={() => window.location.href = \'/profile\'}\n \x1b[2m420\x1b[0m |                       className="p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors"\n \x1b[2m421\x1b[0m |                       title="Editar usu\xe1rio"\n \x1b[2m422\x1b[0m |                     >\n \x1b[2m423\x1b[0m |                       <PencilIcon className="w-5 h-5" />\n \x1b[2m424\x1b[0m |                     </button>\n \x1b[2m425\x1b[0m |                   </div>\n \x1b[2m426\x1b[0m |                 </div>\n \x1b[2m427\x1b[0m |               </div>\n \x1b[2m428\x1b[0m |             ))}\n \x1b[2m429\x1b[0m |           </div>\n \x1b[2m430\x1b[0m | \n \x1b[2m431\x1b[0m |           {users.length === 0 && (\n \x1b[2m432\x1b[0m |             <div className="text-center py-12">\n \x1b[2m433\x1b[0m |               <UsersIcon className="w-16 h-16 text-secondary-300 mx-auto mb-4" />\n \x1b[2m434\x1b[0m |               <h3 className="text-accessible-xl font-semibold text-secondary-600 mb-2">\n \x1b[2m435\x1b[0m |                 Nenhum usu\xe1rio cadastrado\n \x1b[2m436\x1b[0m |               </h3>\n \x1b[2m437\x1b[0m |               <p className="text-accessible-base text-secondary-500 mb-4">\n \x1b[2m438\x1b[0m |                 Crie perfis para usu\xe1rios que utilizar\xe3o a plataforma\n \x1b[2m439\x1b[0m |               </p>\n \x1b[2m440\x1b[0m |               <button\n \x1b[2m441\x1b[0m |                 onClick={() => window.location.href = \'/profile\'}\n \x1b[2m442\x1b[0m |                 className="btn btn-primary"\n \x1b[2m443\x1b[0m |               >\n \x1b[2m444\x1b[0m |                 Criar Primeiro Usu\xe1rio\n \x1b[2m445\x1b[0m |               </button>\n \x1b[2m446\x1b[0m |             </div>\n \x1b[2m447\x1b[0m |           )}\n \x1b[2m448\x1b[0m |         </>\n \x1b[2m449\x1b[0m |       )}\n \x1b[2m450\x1b[0m | \n \x1b[2m451\x1b[0m |       {/* Form Modal - Only for Establishments */}\n \x1b[2m452\x1b[0m |       {showForm && (\n \x1b[2m453\x1b[0m |         <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">\n \x1b[2m454\x1b[0m |           <div className="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">\n \x1b[2m455\x1b[0m |             <div className="p-6">\n \x1b[2m456\x1b[0m |               <div className="flex items-center justify-between mb-6">\n \x1b[2m457\x1b[0m |                 <h2 className="text-accessible-xl font-semibold text-secondary-800">\n \x1b[2m458\x1b[0m |                   {editingId ? \'Editar Estabelecimento\' : \'Novo Estabelecimento\'}\n \x1b[2m459\x1b[0m |                 </h2>\n \x1b[2m460\x1b[0m |                 <button\n \x1b[2m461\x1b[0m |                   onClick={handleCancel}\n \x1b[2m462\x1b[0m |                   className="p-2 hover:bg-secondary-100 rounded-lg"\n \x1b[2m463\x1b[0m |                 >\n \x1b[2m464\x1b[0m |                   <XMarkIcon className="w-6 h-6 text-secondary-600" />\n \x1b[2m465\x1b[0m |                 </button>\n \x1b[2m466\x1b[0m |               </div>\n \x1b[2m467\x1b[0m | \n \x1b[2m468\x1b[0m |               <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">\n \x1b[2m469\x1b[0m |                 {/* Basic Information */}\n \x1b[2m470\x1b[0m |                 <div className="grid grid-cols-1 md:grid-cols-2 gap-6">\n \x1b[2m471\x1b[0m |                   <div>\n \x1b[2m472\x1b[0m |                     <label className="label">Nome *</label>\n \x1b[2m473\x1b[0m |                     <input\n \x1b[2m474\x1b[0m |                       {...register(\'name\', { required: \'Nome \xe9 obrigat\xf3rio\' })}\n \x1b[2m475\x1b[0m |                       className="input"\n \x1b[2m476\x1b[0m |                       placeholder="Nome do estabelecimento"\n \x1b[2m477\x1b[0m |                     />\n \x1b[2m478\x1b[0m |                     {errors.name && (\n \x1b[2m479\x1b[0m |                       <p className="text-red-500 text-accessible-sm mt-1">{errors.name.message}</p>\n \x1b[2m480\x1b[0m |                     )}\n \x1b[2m481\x1b[0m |                   </div>\n \x1b[2m482\x1b[0m | \n \x1b[2m483\x1b[0m |                   <div>\n \x1b[2m484\x1b[0m |                     <label className="label">Tipo *</label>\n \x1b[2m485\x1b[0m |                     <select\n \x1b[2m486\x1b[0m |                       {...register(\'type\', { required: \'Tipo \xe9 obrigat\xf3rio\' })}\n \x1b[2m487\x1b[0m |                       className="input"\n \x1b[2m488\x1b[0m |                     >\n \x1b[2m489\x1b[0m |                       <option value="">Selecione o tipo</option>\n \x1b[2m490\x1b[0m |                       {Object.entries(ESTABLISHMENT_TYPES).map(([value, label]) => (\n \x1b[2m491\x1b[0m |                         <option key={value} value={value}>{label}</option>\n \x1b[2m492\x1b[0m |                       ))}\n \x1b[2m493\x1b[0m |                     </select>\n \x1b[2m494\x1b[0m |                     {errors.type && (\n \x1b[2m495\x1b[0m |                       <p className="text-red-500 text-accessible-sm mt-1">{errors.type.message}</p>\n \x1b[2m496\x1b[0m |                     )}\n \x1b[2m497\x1b[0m |                   </div>\n \x1b[2m498\x1b[0m |                 </div>\n \x1b[2m499\x1b[0m | \n \x1b[2m500\x1b[0m |                 <div>\n \x1b[2m501\x1b[0m |                   <label className="label">Descri\xe7\xe3o *</label>\n \x1b[2m502\x1b[0m |                   <textarea\n \x1b[2m503\x1b[0m |                     {...register(\'description\', { required: \'Descri\xe7\xe3o \xe9 obrigat\xf3ria\' })}\n \x1b[2m504\x1b[0m |                     className="input"\n \x1b[2m505\x1b[0m |                     rows={3}\n \x1b[2m506\x1b[0m |                     placeholder="Descri\xe7\xe3o detalhada do estabelecimento"\n \x1b[2m507\x1b[0m |                   />\n \x1b[2m508\x1b[0m |                   {errors.description && (\n \x1b[2m509\x1b[0m |                     <p className="text-red-500 text-accessible-sm mt-1">{errors.description.message}</p>\n \x1b[2m510\x1b[0m |                   )}\n \x1b[2m511\x1b[0m |                 </div>\n \x1b[2m512\x1b[0m | \n \x1b[2m513\x1b[0m |                 <div>\n \x1b[2m514\x1b[0m |                   <label className="label">Endere\xe7o *</label>\n \x1b[2m515\x1b[0m |                   <input\n \x1b[2m516\x1b[0m |                     {...register(\'address\', { required: \'Endere\xe7o \xe9 obrigat\xf3rio\' })}\n \x1b[2m517\x1b[0m |                     className="input"\n \x1b[2m518\x1b[0m |                     placeholder="Endere\xe7o completo"\n \x1b[2m519\x1b[0m |                   />\n \x1b[2m520\x1b[0m |                   {errors.address && (\n \x1b[2m521\x1b[0m |                     <p className="text-red-500 text-accessible-sm mt-1">{errors.address.message}</p>\n \x1b[2m522\x1b[0m |                   )}\n \x1b[2m523\x1b[0m |                 </div>\n \x1b[2m524\x1b[0m | \n \x1b[2m525\x1b[0m |                 {/* Coordinates */}\n \x1b[2m526\x1b[0m |                 <div className="grid grid-cols-1 md:grid-cols-2 gap-6">\n \x1b[2m527\x1b[0m |                   <div>\n \x1b[2m528\x1b[0m |                     <label className="label">Latitude</label>\n \x1b[2m529\x1b[0m |                     <input\n \x1b[2m530\x1b[0m |                       {...register(\'coordinates.lat\')}\n \x1b[2m531\x1b[0m |                       type="number"\n \x1b[2m532\x1b[0m |                       step="any"\n \x1b[2m533\x1b[0m |                       className="input"\n \x1b[2m534\x1b[0m |                       placeholder="37.0"\n \x1b[2m535\x1b[0m |                     />\n \x1b[2m536\x1b[0m |                   </div>\n \x1b[2m537\x1b[0m |                   <div>\n \x1b[2m538\x1b[0m |                     <label className="label">Longitude</label>\n \x1b[2m539\x1b[0m |                     <input\n \x1b[2m540\x1b[0m |                       {...register(\'coordinates.lng\')}\n \x1b[2m541\x1b[0m |                       type="number"\n \x1b[2m542\x1b[0m |                       step="any"\n \x1b[2m543\x1b[0m |                       className="input"\n \x1b[2m544\x1b[0m |                       placeholder="-8.0"\n \x1b[2m545\x1b[0m |                     />\n \x1b[2m546\x1b[0m |                   </div>\n \x1b[2m547\x1b[0m |                 </div>\n \x1b[2m548\x1b[0m | \n \x1b[2m549\x1b[0m |                 {/* Certification */}\n \x1b[2m550\x1b[0m |                 <div>\n \x1b[2m551\x1b[0m |                   <label className="flex items-center">\n \x1b[2m552\x1b[0m |                     <input\n \x1b[2m553\x1b[0m |                       {...register(\'certified_autism_friendly\')}\n \x1b[2m554\x1b[0m |                       type="checkbox"\n \x1b[2m555\x1b[0m |                       className="mr-3 w-4 h-4 text-primary-600 rounded focus:ring-primary-500"\n \x1b[2m556\x1b[0m |                     />\n \x1b[2m557\x1b[0m |                     <ShieldCheckIcon className="w-5 h-5 text-green-600 mr-2" />\n \x1b[2m558\x1b[0m |                     <span className="label mb-0">Certificado Autism Friendly</span>\n \x1b[2m559\x1b[0m |                   </label>\n \x1b[2m560\x1b[0m |                 </div>\n \x1b[2m561\x1b[0m | \n \x1b[2m562\x1b[0m |                 {/* Accessibility Features */}\n \x1b[2m563\x1b[0m |                 <div>\n \x1b[2m564\x1b[0m |                   <label className="label">Recursos de Acessibilidade</label>\n \x1b[2m565\x1b[0m |                   <div className="grid grid-cols-2 md:grid-cols-3 gap-3">\n \x1b[2m566\x1b[0m |                     {Object.entries(ACCESSIBILITY_FEATURES).map(([feature, label]) => (\n \x1b[2m567\x1b[0m |                       <label key={feature} className="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-secondary-50">\n \x1b[2m568\x1b[0m |                         <input\n \x1b[2m569\x1b[0m |                           type="checkbox"\n \x1b[2m570\x1b[0m |                           checked={watch(\'accessibility_features\')?.includes(feature) || false}\n \x1b[2m571\x1b[0m |                           onChange={() => handleFeatureToggle(feature)}\n \x1b[2m572\x1b[0m |                           className="mr-3 w-4 h-4 text-primary-600 rounded focus:ring-primary-500"\n \x1b[2m573\x1b[0m |                         />\n \x1b[2m574\x1b[0m |                         <span className="text-accessible-sm">{label}</span>\n \x1b[2m575\x1b[0m |                       </label>\n \x1b[2m576\x1b[0m |                     ))}\n \x1b[2m577\x1b[0m |                   </div>\n \x1b[2m578\x1b[0m |                 </div>\n \x1b[2m579\x1b[0m | \n \x1b[2m580\x1b[0m |                 {/* Contact Information */}\n \x1b[2m581\x1b[0m |                 <div>\n \x1b[2m582\x1b[0m |                   <label className="label">Informa\xe7\xf5es de Contato</label>\n \x1b[2m583\x1b[0m |                   <div className="grid grid-cols-1 md:grid-cols-3 gap-4">\n \x1b[2m584\x1b[0m |                     <input\n \x1b[2m585\x1b[0m |                       {...register(\'contact_info.phone\')}\n \x1b[2m586\x1b[0m |                       className="input"\n \x1b[2m587\x1b[0m |                       placeholder="Telefone"\n \x1b[2m588\x1b[0m |                     />\n \x1b[2m589\x1b[0m |                     <input\n \x1b[2m590\x1b[0m |                       {...register(\'contact_info.email\')}\n \x1b[2m591\x1b[0m |                       type="email"\n \x1b[2m592\x1b[0m |                       className="input"\n \x1b[2m593\x1b[0m |                       placeholder="Email"\n \x1b[2m594\x1b[0m |                     />\n \x1b[2m595\x1b[0m |                     <input\n \x1b[2m596\x1b[0m |                       {...register(\'contact_info.website\')}\n \x1b[2m597\x1b[0m |                       className="input"\n \x1b[2m598\x1b[0m |                       placeholder="Website"\n \x1b[2m599\x1b[0m |                     />\n \x1b[2m600\x1b[0m |                   </div>\n \x1b[2m601\x1b[0m |                 </div>\n \x1b[2m602\x1b[0m | \n \x1b[2m603\x1b[0m |                 {/* Opening Hours */}\n \x1b[2m604\x1b[0m |                 <div>\n \x1b[2m605\x1b[0m |                   <label className="label">Hor\xe1rios de Funcionamento</label>\n \x1b[2m606\x1b[0m |                   <div className="grid grid-cols-1 md:grid-cols-2 gap-4">\n \x1b[2m607\x1b[0m |                     {Object.entries(DAYS_OF_WEEK).map(([day, label]) => (\n \x1b[2m608\x1b[0m |                       <div key={day} className="flex items-center space-x-2">\n \x1b[2m609\x1b[0m |                         <span className="w-24 text-accessible-sm">{label}:</span>\n \x1b[2m610\x1b[0m |                         <input\n \x1b[2m611\x1b[0m |                           {...register(`opening_hours.${day}` as const)}\n \x1b[2m612\x1b[0m |                           className="input flex-1"\n \x1b[2m613\x1b[0m |                           placeholder="09:00-18:00"\n \x1b[2m614\x1b[0m |                         />\n \x1b[2m615\x1b[0m |                       </div>\n \x1b[2m616\x1b[0m |                     ))}\n \x1b[2m617\x1b[0m |                   </div>\n \x1b[2m618\x1b[0m |                 </div>\n \x1b[2m619\x1b[0m | \n \x1b[2m620\x1b[0m |                 {/* Images */}\n \x1b[2m621\x1b[0m |                 <div>\n \x1b[2m622\x1b[0m |                   <label className="label">Imagens</label>\n \x1b[2m623\x1b[0m |                   <div className="border-2 border-dashed border-secondary-300 rounded-lg p-6">\n \x1b[2m624\x1b[0m |                     <input\n \x1b[2m625\x1b[0m |                       type="file"\n \x1b[2m626\x1b[0m |                       multiple\n \x1b[2m627\x1b[0m |                       accept="image/*"\n \x1b[2m628\x1b[0m |                       onChange={handleImageUpload}\n \x1b[2m629\x1b[0m |                       className="hidden"\n \x1b[2m630\x1b[0m |                       id="image-upload"\n \x1b[2m631\x1b[0m |                     />\n \x1b[2m632\x1b[0m |                     <label\n \x1b[2m633\x1b[0m |                       htmlFor="image-upload"\n \x1b[2m634\x1b[0m |                       className="flex flex-col items-center cursor-pointer"\n \x1b[2m635\x1b[0m |                     >\n \x1b[2m636\x1b[0m |                       <PhotoIcon className="w-12 h-12 text-secondary-400 mb-2" />\n \x1b[2m637\x1b[0m |                       <span className="text-accessible-base text-secondary-600">\n \x1b[2m638\x1b[0m |                         Clique para selecionar imagens\n \x1b[2m639\x1b[0m |                       </span>\n \x1b[2m640\x1b[0m |                     </label>\n \x1b[2m641\x1b[0m |                   </div>\n \x1b[2m642\x1b[0m | \n \x1b[2m643\x1b[0m |                   {/* Selected Images Preview */}\n \x1b[2m644\x1b[0m |                   {selectedImages.length > 0 && (\n \x1b[2m645\x1b[0m |                     <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">\n \x1b[2m646\x1b[0m |                       {selectedImages.map((image, index) => (\n \x1b[2m647\x1b[0m |                         <div key={index} className="relative">\n \x1b[2m648\x1b[0m |                           <img\n \x1b[2m649\x1b[0m |                             src={`data:image/jpeg;base64,${image}`}\n \x1b[2m650\x1b[0m |                             alt={`Preview ${index + 1}`}\n \x1b[2m651\x1b[0m |                             className="w-full h-24 object-cover rounded-lg"\n \x1b[2m652\x1b[0m |                           />\n \x1b[2m653\x1b[0m |                           <button\n \x1b[2m654\x1b[0m |                             type="button"\n \x1b[2m655\x1b[0m |                             onClick={() => removeImage(index)}\n \x1b[2m656\x1b[0m |                             className="absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600"\n \x1b[2m657\x1b[0m |                           >\n \x1b[2m658\x1b[0m |                             <XMarkIcon className="w-4 h-4" />\n \x1b[2m659\x1b[0m |                           </button>\n \x1b[2m660\x1b[0m |                         </div>\n \x1b[2m661\x1b[0m |                       ))}\n \x1b[2m662\x1b[0m |                     </div>\n \x1b[2m663\x1b[0m |                   )}\n \x1b[2m664\x1b[0m |                 </div>\n \x1b[2m665\x1b[0m | \n \x1b[2m666\x1b[0m |                 {/* Form Actions */}\n \x1b[2m667\x1b[0m |                 <div className="flex justify-end space-x-4 pt-6 border-t">\n \x1b[2m668\x1b[0m |                   <button\n \x1b[2m669\x1b[0m |                     type="button"\n \x1b[2m670\x1b[0m |                     onClick={handleCancel}\n \x1b[2m671\x1b[0m |                     className="btn btn-secondary"\n \x1b[2m672\x1b[0m |                   >\n \x1b[2m673\x1b[0m |                     Cancelar\n \x1b[2m674\x1b[0m |                   </button>\n \x1b[2m675\x1b[0m |                   <button\n \x1b[2m676\x1b[0m |                     type="submit"\n \x1b[2m677\x1b[0m |                     disabled={loading}\n \x1b[2m678\x1b[0m |                     className="btn btn-primary flex items-center"\n \x1b[2m679\x1b[0m |                   >\n \x1b[2m680\x1b[0m |                     {loading ? (\n \x1b[2m681\x1b[0m |                       <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"></div>\n \x1b[2m682\x1b[0m |                     ) : (\n \x1b[2m683\x1b[0m |                       <PlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m684\x1b[0m |                     )}\n \x1b[2m685\x1b[0m |                     {editingId ? \'Atualizar\' : \'Criar\'} Estabelecimento\n \x1b[2m686\x1b[0m |                   </button>\n \x1b[2m687\x1b[0m |                 </div>\n \x1b[2m688\x1b[0m |               </form>\n \x1b[2m689\x1b[0m |             </div>\n \x1b[2m690\x1b[0m |           </div>\n \x1b[2m691\x1b[0m |         </div>\n \x1b[2m692\x1b[0m |       )}\n \x1b[2m693\x1b[0m |     </div>\n \x1b[2m694\x1b[0m |   )\n \x1b[2m695\x1b[0m | }\n \x1b[2m696\x1b[0m | \n \x1b[2m697\x1b[0m | interface Establishment {\n \x1b[2m698\x1b[0m |   id?: string\n \x1b[2m699\x1b[0m |   name: string\n \x1b[2m700\x1b[0m |   type: string\n \x1b[2m701\x1b[0m |   description: string\n \x1b[2m702\x1b[0m |   address: string\n \x1b[2m703\x1b[0m |   coordinates: { lat: number; lng: number }\n \x1b[2m704\x1b[0m |   accessibility_features: string[]\n \x1b[2m705\x1b[0m |   certified_autism_friendly: boolean\n \x1b[2m706\x1b[0m |   contact_info: { [key: string]: string }\n \x1b[2m707\x1b[0m |   opening_hours: { [key: string]: string }\n \x1b[2m708\x1b[0m |   special_hours: string[]\n \x1b[2m709\x1b[0m |   sensory_info: { [key: string]: any }\n \x1b[2m710\x1b[0m |   images: string[]\n \x1b[2m711\x1b[0m | }\n \x1b[2m712\x1b[0m | \n \x1b[2m713\x1b[0m | const ESTABLISHMENT_TYPES = {\n \x1b[2m714\x1b[0m |   hotel: \'Hotel\',\n \x1b[2m715\x1b[0m |   restaurant: \'Restaurante\',\n \x1b[2m716\x1b[0m |   attraction: \'Atra\xe7\xe3o\',\n \x1b[2m717\x1b[0m |   event: \'Evento\',\n \x1b[2m718\x1b[0m |   shopping: \'Compras\',\n \x1b[2m719\x1b[0m |   transport: \'Transporte\'\n \x1b[2m720\x1b[0m | }\n \x1b[2m721\x1b[0m | \n \x1b[2m722\x1b[0m | const ACCESSIBILITY_FEATURES = {\n \x1b[2m723\x1b[0m |   quiet_spaces: \'Espa\xe7os Silenciosos\',\n \x1b[2m724\x1b[0m |   sensory_rooms: \'Salas Sensoriais\',\n \x1b[2m725\x1b[0m |   low_lighting: \'Ilumina\xe7\xe3o Reduzida\',\n \x1b[2m726\x1b[0m |   trained_staff: \'Equipe Treinada\',\n \x1b[2m727\x1b[0m |   visual_schedules: \'Hor\xe1rios Visuais\',\n \x1b[2m728\x1b[0m |   noise_reduction: \'Redu\xe7\xe3o de Ru\xeddo\',\n \x1b[2m729\x1b[0m |   calm_environment: \'Ambiente Calmo\',\n \x1b[2m730\x1b[0m |   flexible_timing: \'Hor\xe1rios Flex\xedveis\'\n \x1b[2m731\x1b[0m | }\n \x1b[2m732\x1b[0m | \n \x1b[2m733\x1b[0m | const DAYS_OF_WEEK = {\n \x1b[2m734\x1b[0m |   monday: \'Segunda-feira\',\n \x1b[2m735\x1b[0m |   tuesday: \'Ter\xe7a-feira\',\n \x1b[2m736\x1b[0m |   wednesday: \'Quarta-feira\',\n \x1b[2m737\x1b[0m |   thursday: \'Quinta-feira\',\n \x1b[2m738\x1b[0m |   friday: \'Sexta-feira\',\n \x1b[2m739\x1b[0m |   saturday: \'S\xe1bado\',\n \x1b[2m740\x1b[0m |   sunday: \'Domingo\'\n \x1b[2m741\x1b[0m | }\n \x1b[2m742\x1b[0m | \n \x1b[2m743\x1b[0m | export default function AdminPage() {\n     : \x1b[33;1m                        ^^^^|^^^^\x1b[0m\n     :                             \x1b[33;1m`-- \x1b[33;1m`AdminPage` redefined here\x1b[0m\x1b[0m\n \x1b[2m744\x1b[0m |   const [establishments, setEstablishments] = useState<Establishment[]>([])\n \x1b[2m745\x1b[0m |   const [showForm, setShowForm] = useState(false)\n \x1b[2m746\x1b[0m |   const [editingId, setEditingId] = useState<string | null>(null)\n     `----\n\n  \x1b[31mx\x1b[0m the name `default` is exported multiple times\n      ,-[\x1b[36;1;4m/app/frontend/src/app/admin/page.tsx\x1b[0m:70:1]\n \x1b[2m  70\x1b[0m |       sunday: \'Domingo\'\n \x1b[2m  71\x1b[0m |     }\n \x1b[2m  72\x1b[0m |     \n \x1b[2m  73\x1b[0m | \x1b[31;1m,\x1b[0m\x1b[31;1m-\x1b[0m\x1b[31;1m>\x1b[0m export default function AdminPage() {\n \x1b[2m  74\x1b[0m | \x1b[31;1m|\x1b[0m     const [activeTab, setActiveTab] = useState<\'establishments\' | \'users\'>(\'establishments\')\n \x1b[2m  75\x1b[0m | \x1b[31;1m|\x1b[0m     const [establishments, setEstablishments] = useState<Establishment[]>([])\n \x1b[2m  76\x1b[0m | \x1b[31;1m|\x1b[0m     const [users, setUsers] = useState<User[]>([])\n \x1b[2m  77\x1b[0m | \x1b[31;1m|\x1b[0m     const [showForm, setShowForm] = useState(false)\n \x1b[2m  78\x1b[0m | \x1b[31;1m|\x1b[0m     const [editingId, setEditingId] = useState<string | null>(null)\n \x1b[2m  79\x1b[0m | \x1b[31;1m|\x1b[0m     const [loading, setLoading] = useState(false)\n \x1b[2m  80\x1b[0m | \x1b[31;1m|\x1b[0m     const [selectedImages, setSelectedImages] = useState<string[]>([])\n \x1b[2m  81\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m  82\x1b[0m | \x1b[31;1m|\x1b[0m     const { register, handleSubmit, reset, setValue, watch, formState: { errors } } = useForm<Establishment>()\n \x1b[2m  83\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m  84\x1b[0m | \x1b[31;1m|\x1b[0m     useEffect(() => {\n \x1b[2m  85\x1b[0m | \x1b[31;1m|\x1b[0m       fetchEstablishments()\n \x1b[2m  86\x1b[0m | \x1b[31;1m|\x1b[0m       fetchUsers()\n \x1b[2m  87\x1b[0m | \x1b[31;1m|\x1b[0m     }, [])\n \x1b[2m  88\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m  89\x1b[0m | \x1b[31;1m|\x1b[0m     const fetchEstablishments = async () => {\n \x1b[2m  90\x1b[0m | \x1b[31;1m|\x1b[0m       try {\n \x1b[2m  91\x1b[0m | \x1b[31;1m|\x1b[0m         const response = await fetch(\'/api/establishments\')\n \x1b[2m  92\x1b[0m | \x1b[31;1m|\x1b[0m         if (response.ok) {\n \x1b[2m  93\x1b[0m | \x1b[31;1m|\x1b[0m           const data = await response.json()\n \x1b[2m  94\x1b[0m | \x1b[31;1m|\x1b[0m           setEstablishments(data)\n \x1b[2m  95\x1b[0m | \x1b[31;1m|\x1b[0m         }\n \x1b[2m  96\x1b[0m | \x1b[31;1m|\x1b[0m       } catch (error) {\n \x1b[2m  97\x1b[0m | \x1b[31;1m|\x1b[0m         console.error(\'Error fetching establishments:\', error)\n \x1b[2m  98\x1b[0m | \x1b[31;1m|\x1b[0m         toast.error(\'Erro ao carregar estabelecimentos\')\n \x1b[2m  99\x1b[0m | \x1b[31;1m|\x1b[0m       }\n \x1b[2m 100\x1b[0m | \x1b[31;1m|\x1b[0m     }\n \x1b[2m 101\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 102\x1b[0m | \x1b[31;1m|\x1b[0m     const fetchUsers = async () => {\n \x1b[2m 103\x1b[0m | \x1b[31;1m|\x1b[0m       try {\n \x1b[2m 104\x1b[0m | \x1b[31;1m|\x1b[0m         const response = await fetch(\'/api/users\')\n \x1b[2m 105\x1b[0m | \x1b[31;1m|\x1b[0m         if (response.ok) {\n \x1b[2m 106\x1b[0m | \x1b[31;1m|\x1b[0m           const data = await response.json()\n \x1b[2m 107\x1b[0m | \x1b[31;1m|\x1b[0m           setUsers(data)\n \x1b[2m 108\x1b[0m | \x1b[31;1m|\x1b[0m         }\n \x1b[2m 109\x1b[0m | \x1b[31;1m|\x1b[0m       } catch (error) {\n \x1b[2m 110\x1b[0m | \x1b[31;1m|\x1b[0m         console.error(\'Error fetching users:\', error)\n \x1b[2m 111\x1b[0m | \x1b[31;1m|\x1b[0m         // toast.error(\'Erro ao carregar usu\xe1rios\')\n \x1b[2m 112\x1b[0m | \x1b[31;1m|\x1b[0m       }\n \x1b[2m 113\x1b[0m | \x1b[31;1m|\x1b[0m     }\n \x1b[2m 114\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 115\x1b[0m | \x1b[31;1m|\x1b[0m     const onSubmit = async (data: Establishment) => {\n \x1b[2m 116\x1b[0m | \x1b[31;1m|\x1b[0m       setLoading(true)\n \x1b[2m 117\x1b[0m | \x1b[31;1m|\x1b[0m       try {\n \x1b[2m 118\x1b[0m | \x1b[31;1m|\x1b[0m         // Add selected images to the data\n \x1b[2m 119\x1b[0m | \x1b[31;1m|\x1b[0m         const formData = {\n \x1b[2m 120\x1b[0m | \x1b[31;1m|\x1b[0m           ...data,\n \x1b[2m 121\x1b[0m | \x1b[31;1m|\x1b[0m           images: selectedImages,\n \x1b[2m 122\x1b[0m | \x1b[31;1m|\x1b[0m           coordinates: {\n \x1b[2m 123\x1b[0m | \x1b[31;1m|\x1b[0m             lat: Number(data.coordinates.lat) || 37.0,\n \x1b[2m 124\x1b[0m | \x1b[31;1m|\x1b[0m             lng: Number(data.coordinates.lng) || -8.0\n \x1b[2m 125\x1b[0m | \x1b[31;1m|\x1b[0m           }\n \x1b[2m 126\x1b[0m | \x1b[31;1m|\x1b[0m         }\n \x1b[2m 127\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 128\x1b[0m | \x1b[31;1m|\x1b[0m         let response\n \x1b[2m 129\x1b[0m | \x1b[31;1m|\x1b[0m         if (editingId) {\n \x1b[2m 130\x1b[0m | \x1b[31;1m|\x1b[0m           response = await fetch(`/api/establishments/${editingId}`, {\n \x1b[2m 131\x1b[0m | \x1b[31;1m|\x1b[0m             method: \'PUT\',\n \x1b[2m 132\x1b[0m | \x1b[31;1m|\x1b[0m             headers: { \'Content-Type\': \'application/json\' },\n \x1b[2m 133\x1b[0m | \x1b[31;1m|\x1b[0m             body: JSON.stringify(formData)\n \x1b[2m 134\x1b[0m | \x1b[31;1m|\x1b[0m           })\n \x1b[2m 135\x1b[0m | \x1b[31;1m|\x1b[0m         } else {\n \x1b[2m 136\x1b[0m | \x1b[31;1m|\x1b[0m           response = await fetch(\'/api/establishments\', {\n \x1b[2m 137\x1b[0m | \x1b[31;1m|\x1b[0m             method: \'POST\',\n \x1b[2m 138\x1b[0m | \x1b[31;1m|\x1b[0m             headers: { \'Content-Type\': \'application/json\' },\n \x1b[2m 139\x1b[0m | \x1b[31;1m|\x1b[0m             body: JSON.stringify(formData)\n \x1b[2m 140\x1b[0m | \x1b[31;1m|\x1b[0m           })\n \x1b[2m 141\x1b[0m | \x1b[31;1m|\x1b[0m         }\n \x1b[2m 142\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 143\x1b[0m | \x1b[31;1m|\x1b[0m         if (response.ok) {\n \x1b[2m 144\x1b[0m | \x1b[31;1m|\x1b[0m           toast.success(editingId ? \'Estabelecimento atualizado!\' : \'Estabelecimento criado!\')\n \x1b[2m 145\x1b[0m | \x1b[31;1m|\x1b[0m           fetchEstablishments()\n \x1b[2m 146\x1b[0m | \x1b[31;1m|\x1b[0m           handleCancel()\n \x1b[2m 147\x1b[0m | \x1b[31;1m|\x1b[0m         } else {\n \x1b[2m 148\x1b[0m | \x1b[31;1m|\x1b[0m           toast.error(\'Erro ao salvar estabelecimento\')\n \x1b[2m 149\x1b[0m | \x1b[31;1m|\x1b[0m         }\n \x1b[2m 150\x1b[0m | \x1b[31;1m|\x1b[0m       } catch (error) {\n \x1b[2m 151\x1b[0m | \x1b[31;1m|\x1b[0m         console.error(\'Error saving establishment:\', error)\n \x1b[2m 152\x1b[0m | \x1b[31;1m|\x1b[0m         toast.error(\'Erro ao salvar estabelecimento\')\n \x1b[2m 153\x1b[0m | \x1b[31;1m|\x1b[0m       } finally {\n \x1b[2m 154\x1b[0m | \x1b[31;1m|\x1b[0m         setLoading(false)\n \x1b[2m 155\x1b[0m | \x1b[31;1m|\x1b[0m       }\n \x1b[2m 156\x1b[0m | \x1b[31;1m|\x1b[0m     }\n \x1b[2m 157\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 158\x1b[0m | \x1b[31;1m|\x1b[0m     const handleEdit = (establishment: Establishment) => {\n \x1b[2m 159\x1b[0m | \x1b[31;1m|\x1b[0m       setEditingId(establishment.id || null)\n \x1b[2m 160\x1b[0m | \x1b[31;1m|\x1b[0m       setShowForm(true)\n \x1b[2m 161\x1b[0m | \x1b[31;1m|\x1b[0m       setSelectedImages(establishment.images || [])\n \x1b[2m 162\x1b[0m | \x1b[31;1m|\x1b[0m       \n \x1b[2m 163\x1b[0m | \x1b[31;1m|\x1b[0m       // Populate form with existing data\n \x1b[2m 164\x1b[0m | \x1b[31;1m|\x1b[0m       Object.keys(establishment).forEach((key) => {\n \x1b[2m 165\x1b[0m | \x1b[31;1m|\x1b[0m         if (key === \'coordinates\') {\n \x1b[2m 166\x1b[0m | \x1b[31;1m|\x1b[0m           setValue(\'coordinates.lat\', establishment.coordinates.lat)\n \x1b[2m 167\x1b[0m | \x1b[31;1m|\x1b[0m           setValue(\'coordinates.lng\', establishment.coordinates.lng)\n \x1b[2m 168\x1b[0m | \x1b[31;1m|\x1b[0m         } else {\n \x1b[2m 169\x1b[0m | \x1b[31;1m|\x1b[0m           setValue(key as keyof Establishment, establishment[key as keyof Establishment])\n \x1b[2m 170\x1b[0m | \x1b[31;1m|\x1b[0m         }\n \x1b[2m 171\x1b[0m | \x1b[31;1m|\x1b[0m       })\n \x1b[2m 172\x1b[0m | \x1b[31;1m|\x1b[0m     }\n \x1b[2m 173\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 174\x1b[0m | \x1b[31;1m|\x1b[0m     const handleDelete = async (id: string) => {\n \x1b[2m 175\x1b[0m | \x1b[31;1m|\x1b[0m       if (!confirm(\'Tem certeza que deseja excluir este estabelecimento?\')) return\n \x1b[2m 176\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 177\x1b[0m | \x1b[31;1m|\x1b[0m       try {\n \x1b[2m 178\x1b[0m | \x1b[31;1m|\x1b[0m         const response = await fetch(`/api/establishments/${id}`, {\n \x1b[2m 179\x1b[0m | \x1b[31;1m|\x1b[0m           method: \'DELETE\'\n \x1b[2m 180\x1b[0m | \x1b[31;1m|\x1b[0m         })\n \x1b[2m 181\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 182\x1b[0m | \x1b[31;1m|\x1b[0m         if (response.ok) {\n \x1b[2m 183\x1b[0m | \x1b[31;1m|\x1b[0m           toast.success(\'Estabelecimento exclu\xeddo!\')\n \x1b[2m 184\x1b[0m | \x1b[31;1m|\x1b[0m           fetchEstablishments()\n \x1b[2m 185\x1b[0m | \x1b[31;1m|\x1b[0m         } else {\n \x1b[2m 186\x1b[0m | \x1b[31;1m|\x1b[0m           toast.error(\'Erro ao excluir estabelecimento\')\n \x1b[2m 187\x1b[0m | \x1b[31;1m|\x1b[0m         }\n \x1b[2m 188\x1b[0m | \x1b[31;1m|\x1b[0m       } catch (error) {\n \x1b[2m 189\x1b[0m | \x1b[31;1m|\x1b[0m         console.error(\'Error deleting establishment:\', error)\n \x1b[2m 190\x1b[0m | \x1b[31;1m|\x1b[0m         toast.error(\'Erro ao excluir estabelecimento\')\n \x1b[2m 191\x1b[0m | \x1b[31;1m|\x1b[0m       }\n \x1b[2m 192\x1b[0m | \x1b[31;1m|\x1b[0m     }\n \x1b[2m 193\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 194\x1b[0m | \x1b[31;1m|\x1b[0m     const handleCancel = () => {\n \x1b[2m 195\x1b[0m | \x1b[31;1m|\x1b[0m       setShowForm(false)\n \x1b[2m 196\x1b[0m | \x1b[31;1m|\x1b[0m       setEditingId(null)\n \x1b[2m 197\x1b[0m | \x1b[31;1m|\x1b[0m       setSelectedImages([])\n \x1b[2m 198\x1b[0m | \x1b[31;1m|\x1b[0m       reset()\n \x1b[2m 199\x1b[0m | \x1b[31;1m|\x1b[0m     }\n \x1b[2m 200\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 201\x1b[0m | \x1b[31;1m|\x1b[0m     const handleImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n \x1b[2m 202\x1b[0m | \x1b[31;1m|\x1b[0m       const files = event.target.files\n \x1b[2m 203\x1b[0m | \x1b[31;1m|\x1b[0m       if (!files) return\n \x1b[2m 204\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 205\x1b[0m | \x1b[31;1m|\x1b[0m       Array.from(files).forEach((file) => {\n \x1b[2m 206\x1b[0m | \x1b[31;1m|\x1b[0m         const reader = new FileReader()\n \x1b[2m 207\x1b[0m | \x1b[31;1m|\x1b[0m         reader.onload = (e) => {\n \x1b[2m 208\x1b[0m | \x1b[31;1m|\x1b[0m           const base64 = e.target?.result as string\n \x1b[2m 209\x1b[0m | \x1b[31;1m|\x1b[0m           const base64Data = base64.split(\',\')[1] // Remove data:image/jpeg;base64, prefix\n \x1b[2m 210\x1b[0m | \x1b[31;1m|\x1b[0m           setSelectedImages(prev => [...prev, base64Data])\n \x1b[2m 211\x1b[0m | \x1b[31;1m|\x1b[0m         }\n \x1b[2m 212\x1b[0m | \x1b[31;1m|\x1b[0m         reader.readAsDataURL(file)\n \x1b[2m 213\x1b[0m | \x1b[31;1m|\x1b[0m       })\n \x1b[2m 214\x1b[0m | \x1b[31;1m|\x1b[0m     }\n \x1b[2m 215\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 216\x1b[0m | \x1b[31;1m|\x1b[0m     const removeImage = (index: number) => {\n \x1b[2m 217\x1b[0m | \x1b[31;1m|\x1b[0m       setSelectedImages(prev => prev.filter((_, i) => i !== index))\n \x1b[2m 218\x1b[0m | \x1b[31;1m|\x1b[0m     }\n \x1b[2m 219\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 220\x1b[0m | \x1b[31;1m|\x1b[0m     const handleFeatureToggle = (feature: string) => {\n \x1b[2m 221\x1b[0m | \x1b[31;1m|\x1b[0m       const currentFeatures = watch(\'accessibility_features\') || []\n \x1b[2m 222\x1b[0m | \x1b[31;1m|\x1b[0m       const newFeatures = currentFeatures.includes(feature)\n \x1b[2m 223\x1b[0m | \x1b[31;1m|\x1b[0m         ? currentFeatures.filter(f => f !== feature)\n \x1b[2m 224\x1b[0m | \x1b[31;1m|\x1b[0m         : [...currentFeatures, feature]\n \x1b[2m 225\x1b[0m | \x1b[31;1m|\x1b[0m       setValue(\'accessibility_features\', newFeatures)\n \x1b[2m 226\x1b[0m | \x1b[31;1m|\x1b[0m     }\n \x1b[2m 227\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 228\x1b[0m | \x1b[31;1m|\x1b[0m     return (\n \x1b[2m 229\x1b[0m | \x1b[31;1m|\x1b[0m       <div className="container mx-auto px-4 py-8">\n \x1b[2m 230\x1b[0m | \x1b[31;1m|\x1b[0m         {/* Header */}\n \x1b[2m 231\x1b[0m | \x1b[31;1m|\x1b[0m         <div className="mb-8">\n \x1b[2m 232\x1b[0m | \x1b[31;1m|\x1b[0m           <h1 className="text-accessible-2xl font-bold text-secondary-800 mb-2">\n \x1b[2m 233\x1b[0m | \x1b[31;1m|\x1b[0m             Painel Administrativo - TEIA\n \x1b[2m 234\x1b[0m | \x1b[31;1m|\x1b[0m           </h1>\n \x1b[2m 235\x1b[0m | \x1b[31;1m|\x1b[0m           <p className="text-accessible-base text-secondary-600 mb-4">\n \x1b[2m 236\x1b[0m | \x1b[31;1m|\x1b[0m             Gerencie estabelecimentos e usu\xe1rios da plataforma\n \x1b[2m 237\x1b[0m | \x1b[31;1m|\x1b[0m           </p>\n \x1b[2m 238\x1b[0m | \x1b[31;1m|\x1b[0m           \n \x1b[2m 239\x1b[0m | \x1b[31;1m|\x1b[0m           {/* Admin Info Banner */}\n \x1b[2m 240\x1b[0m | \x1b[31;1m|\x1b[0m           <div className="bg-primary-50 border border-primary-200 rounded-lg p-4 mb-6">\n \x1b[2m 241\x1b[0m | \x1b[31;1m|\x1b[0m             <h3 className="font-semibold text-primary-800 mb-2">\uD83D\uDD10 \xc1rea Administrativa</h3>\n \x1b[2m 242\x1b[0m | \x1b[31;1m|\x1b[0m             <div className="text-primary-700 text-accessible-base space-y-1">\n \x1b[2m 243\x1b[0m | \x1b[31;1m|\x1b[0m               <p><strong>Estabelecimentos:</strong> Apenas administradores podem adicionar, editar e excluir estabelecimentos</p>\n \x1b[2m 244\x1b[0m | \x1b[31;1m|\x1b[0m               <p><strong>Usu\xe1rios:</strong> Apenas administradores podem criar perfis de usu\xe1rios</p>\n \x1b[2m 245\x1b[0m | \x1b[31;1m|\x1b[0m               <p><strong>Papel dos Usu\xe1rios:</strong> Usu\xe1rios podem visualizar estabelecimentos, deixar avalia\xe7\xf5es e coment\xe1rios</p>\n \x1b[2m 246\x1b[0m | \x1b[31;1m|\x1b[0m             </div>\n \x1b[2m 247\x1b[0m | \x1b[31;1m|\x1b[0m           </div>\n \x1b[2m 248\x1b[0m | \x1b[31;1m|\x1b[0m         </div>\n \x1b[2m 249\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 250\x1b[0m | \x1b[31;1m|\x1b[0m         {/* Tabs */}\n \x1b[2m 251\x1b[0m | \x1b[31;1m|\x1b[0m         <div className="flex space-x-1 mb-8 bg-secondary-100 p-1 rounded-lg">\n \x1b[2m 252\x1b[0m | \x1b[31;1m|\x1b[0m           <button\n \x1b[2m 253\x1b[0m | \x1b[31;1m|\x1b[0m             onClick={() => setActiveTab(\'establishments\')}\n \x1b[2m 254\x1b[0m | \x1b[31;1m|\x1b[0m             className={`flex items-center px-4 py-2 rounded-md text-accessible-base font-medium transition-colors ${\n \x1b[2m 255\x1b[0m | \x1b[31;1m|\x1b[0m               activeTab === \'establishments\'\n \x1b[2m 256\x1b[0m | \x1b[31;1m|\x1b[0m                 ? \'bg-white text-primary-600 shadow-sm\'\n \x1b[2m 257\x1b[0m | \x1b[31;1m|\x1b[0m                 : \'text-secondary-600 hover:text-secondary-800\'\n \x1b[2m 258\x1b[0m | \x1b[31;1m|\x1b[0m             }`}\n \x1b[2m 259\x1b[0m | \x1b[31;1m|\x1b[0m           >\n \x1b[2m 260\x1b[0m | \x1b[31;1m|\x1b[0m             <BuildingOfficeIcon className="w-5 h-5 mr-2" />\n \x1b[2m 261\x1b[0m | \x1b[31;1m|\x1b[0m             Estabelecimentos ({establishments.length})\n \x1b[2m 262\x1b[0m | \x1b[31;1m|\x1b[0m           </button>\n \x1b[2m 263\x1b[0m | \x1b[31;1m|\x1b[0m           <button\n \x1b[2m 264\x1b[0m | \x1b[31;1m|\x1b[0m             onClick={() => setActiveTab(\'users\')}\n \x1b[2m 265\x1b[0m | \x1b[31;1m|\x1b[0m             className={`flex items-center px-4 py-2 rounded-md text-accessible-base font-medium transition-colors ${\n \x1b[2m 266\x1b[0m | \x1b[31;1m|\x1b[0m               activeTab === \'users\'\n \x1b[2m 267\x1b[0m | \x1b[31;1m|\x1b[0m                 ? \'bg-white text-primary-600 shadow-sm\'\n \x1b[2m 268\x1b[0m | \x1b[31;1m|\x1b[0m                 : \'text-secondary-600 hover:text-secondary-800\'\n \x1b[2m 269\x1b[0m | \x1b[31;1m|\x1b[0m             }`}\n \x1b[2m 270\x1b[0m | \x1b[31;1m|\x1b[0m           >\n \x1b[2m 271\x1b[0m | \x1b[31;1m|\x1b[0m             <UsersIcon className="w-5 h-5 mr-2" />\n \x1b[2m 272\x1b[0m | \x1b[31;1m|\x1b[0m             Usu\xe1rios ({users.length})\n \x1b[2m 273\x1b[0m | \x1b[31;1m|\x1b[0m           </button>\n \x1b[2m 274\x1b[0m | \x1b[31;1m|\x1b[0m         </div>\n \x1b[2m 275\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 276\x1b[0m | \x1b[31;1m|\x1b[0m         {/* Establishments Tab */}\n \x1b[2m 277\x1b[0m | \x1b[31;1m|\x1b[0m         {activeTab === \'establishments\' && (\n \x1b[2m 278\x1b[0m | \x1b[31;1m|\x1b[0m           <>\n \x1b[2m 279\x1b[0m | \x1b[31;1m|\x1b[0m             <div className="flex items-center justify-between mb-6">\n \x1b[2m 280\x1b[0m | \x1b[31;1m|\x1b[0m               <h2 className="text-accessible-xl font-semibold text-secondary-800">\n \x1b[2m 281\x1b[0m | \x1b[31;1m|\x1b[0m                 Gest\xe3o de Estabelecimentos\n \x1b[2m 282\x1b[0m | \x1b[31;1m|\x1b[0m               </h2>\n \x1b[2m 283\x1b[0m | \x1b[31;1m|\x1b[0m               <button\n \x1b[2m 284\x1b[0m | \x1b[31;1m|\x1b[0m                 onClick={() => setShowForm(true)}\n \x1b[2m 285\x1b[0m | \x1b[31;1m|\x1b[0m                 className="btn btn-primary flex items-center"\n \x1b[2m 286\x1b[0m | \x1b[31;1m|\x1b[0m               >\n \x1b[2m 287\x1b[0m | \x1b[31;1m|\x1b[0m                 <PlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m 288\x1b[0m | \x1b[31;1m|\x1b[0m                 Novo Estabelecimento\n \x1b[2m 289\x1b[0m | \x1b[31;1m|\x1b[0m               </button>\n \x1b[2m 290\x1b[0m | \x1b[31;1m|\x1b[0m             </div>\n \x1b[2m 291\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 292\x1b[0m | \x1b[31;1m|\x1b[0m             {/* Establishments List */}\n \x1b[2m 293\x1b[0m | \x1b[31;1m|\x1b[0m             <div className="space-y-4">\n \x1b[2m 294\x1b[0m | \x1b[31;1m|\x1b[0m               {establishments.map((establishment) => (\n \x1b[2m 295\x1b[0m | \x1b[31;1m|\x1b[0m                 <div key={establishment.id} className="card hover:shadow-lg transition-shadow">\n \x1b[2m 296\x1b[0m | \x1b[31;1m|\x1b[0m                   <div className="flex items-start justify-between">\n \x1b[2m 297\x1b[0m | \x1b[31;1m|\x1b[0m                     <div className="flex-1">\n \x1b[2m 298\x1b[0m | \x1b[31;1m|\x1b[0m                       <div className="flex items-center mb-2">\n \x1b[2m 299\x1b[0m | \x1b[31;1m|\x1b[0m                         <h3 className="text-accessible-lg font-semibold text-secondary-800 mr-3">\n \x1b[2m 300\x1b[0m | \x1b[31;1m|\x1b[0m                           {establishment.name}\n \x1b[2m 301\x1b[0m | \x1b[31;1m|\x1b[0m                         </h3>\n \x1b[2m 302\x1b[0m | \x1b[31;1m|\x1b[0m                         {establishment.certified_autism_friendly && (\n \x1b[2m 303\x1b[0m | \x1b[31;1m|\x1b[0m                           <ShieldCheckIcon className="w-5 h-5 text-green-600" />\n \x1b[2m 304\x1b[0m | \x1b[31;1m|\x1b[0m                         )}\n \x1b[2m 305\x1b[0m | \x1b[31;1m|\x1b[0m                         <span className="ml-2 bg-secondary-100 text-secondary-700 px-2 py-1 rounded text-accessible-sm">\n \x1b[2m 306\x1b[0m | \x1b[31;1m|\x1b[0m                           {ESTABLISHMENT_TYPES[establishment.type as keyof typeof ESTABLISHMENT_TYPES]}\n \x1b[2m 307\x1b[0m | \x1b[31;1m|\x1b[0m                         </span>\n \x1b[2m 308\x1b[0m | \x1b[31;1m|\x1b[0m                       </div>\n \x1b[2m 309\x1b[0m | \x1b[31;1m|\x1b[0m                       \n \x1b[2m 310\x1b[0m | \x1b[31;1m|\x1b[0m                       <p className="text-secondary-600 text-accessible-base mb-2 line-clamp-2">\n \x1b[2m 311\x1b[0m | \x1b[31;1m|\x1b[0m                         {establishment.description}\n \x1b[2m 312\x1b[0m | \x1b[31;1m|\x1b[0m                       </p>\n \x1b[2m 313\x1b[0m | \x1b[31;1m|\x1b[0m                       \n \x1b[2m 314\x1b[0m | \x1b[31;1m|\x1b[0m                       <div className="flex items-center text-accessible-sm text-secondary-500">\n \x1b[2m 315\x1b[0m | \x1b[31;1m|\x1b[0m                         <MapPinIcon className="w-4 h-4 mr-1" />\n \x1b[2m 316\x1b[0m | \x1b[31;1m|\x1b[0m                         {establishment.address}\n \x1b[2m 317\x1b[0m | \x1b[31;1m|\x1b[0m                       </div>\n \x1b[2m 318\x1b[0m | \x1b[31;1m|\x1b[0m                       \n \x1b[2m 319\x1b[0m | \x1b[31;1m|\x1b[0m                       {establishment.accessibility_features.length > 0 && (\n \x1b[2m 320\x1b[0m | \x1b[31;1m|\x1b[0m                         <div className="mt-2 flex flex-wrap gap-1">\n \x1b[2m 321\x1b[0m | \x1b[31;1m|\x1b[0m                           {establishment.accessibility_features.slice(0, 3).map((feature) => (\n \x1b[2m 322\x1b[0m | \x1b[31;1m|\x1b[0m                             <span\n \x1b[2m 323\x1b[0m | \x1b[31;1m|\x1b[0m                               key={feature}\n \x1b[2m 324\x1b[0m | \x1b[31;1m|\x1b[0m                               className="text-xs bg-autism-friendly text-secondary-700 px-2 py-1 rounded"\n \x1b[2m 325\x1b[0m | \x1b[31;1m|\x1b[0m                             >\n \x1b[2m 326\x1b[0m | \x1b[31;1m|\x1b[0m                               {ACCESSIBILITY_FEATURES[feature as keyof typeof ACCESSIBILITY_FEATURES] || feature}\n \x1b[2m 327\x1b[0m | \x1b[31;1m|\x1b[0m                             </span>\n \x1b[2m 328\x1b[0m | \x1b[31;1m|\x1b[0m                           ))}\n \x1b[2m 329\x1b[0m | \x1b[31;1m|\x1b[0m                           {establishment.accessibility_features.length > 3 && (\n \x1b[2m 330\x1b[0m | \x1b[31;1m|\x1b[0m                             <span className="text-xs text-secondary-500">\n \x1b[2m 331\x1b[0m | \x1b[31;1m|\x1b[0m                               +{establishment.accessibility_features.length - 3} mais\n \x1b[2m 332\x1b[0m | \x1b[31;1m|\x1b[0m                             </span>\n \x1b[2m 333\x1b[0m | \x1b[31;1m|\x1b[0m                           )}\n \x1b[2m 334\x1b[0m | \x1b[31;1m|\x1b[0m                         </div>\n \x1b[2m 335\x1b[0m | \x1b[31;1m|\x1b[0m                       )}\n \x1b[2m 336\x1b[0m | \x1b[31;1m|\x1b[0m                     </div>\n \x1b[2m 337\x1b[0m | \x1b[31;1m|\x1b[0m                     \n \x1b[2m 338\x1b[0m | \x1b[31;1m|\x1b[0m                     <div className="flex space-x-2 ml-4">\n \x1b[2m 339\x1b[0m | \x1b[31;1m|\x1b[0m                       <button\n \x1b[2m 340\x1b[0m | \x1b[31;1m|\x1b[0m                         onClick={() => handleEdit(establishment)}\n \x1b[2m 341\x1b[0m | \x1b[31;1m|\x1b[0m                         className="p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors"\n \x1b[2m 342\x1b[0m | \x1b[31;1m|\x1b[0m                       >\n \x1b[2m 343\x1b[0m | \x1b[31;1m|\x1b[0m                         <PencilIcon className="w-5 h-5" />\n \x1b[2m 344\x1b[0m | \x1b[31;1m|\x1b[0m                       </button>\n \x1b[2m 345\x1b[0m | \x1b[31;1m|\x1b[0m                       <button\n \x1b[2m 346\x1b[0m | \x1b[31;1m|\x1b[0m                         onClick={() => handleDelete(establishment.id!)}\n \x1b[2m 347\x1b[0m | \x1b[31;1m|\x1b[0m                         className="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"\n \x1b[2m 348\x1b[0m | \x1b[31;1m|\x1b[0m                       >\n \x1b[2m 349\x1b[0m | \x1b[31;1m|\x1b[0m                         <TrashIcon className="w-5 h-5" />\n \x1b[2m 350\x1b[0m | \x1b[31;1m|\x1b[0m                       </button>\n \x1b[2m 351\x1b[0m | \x1b[31;1m|\x1b[0m                     </div>\n \x1b[2m 352\x1b[0m | \x1b[31;1m|\x1b[0m                   </div>\n \x1b[2m 353\x1b[0m | \x1b[31;1m|\x1b[0m                 </div>\n \x1b[2m 354\x1b[0m | \x1b[31;1m|\x1b[0m               ))}\n \x1b[2m 355\x1b[0m | \x1b[31;1m|\x1b[0m             </div>\n \x1b[2m 356\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 357\x1b[0m | \x1b[31;1m|\x1b[0m             {establishments.length === 0 && (\n \x1b[2m 358\x1b[0m | \x1b[31;1m|\x1b[0m               <div className="text-center py-12">\n \x1b[2m 359\x1b[0m | \x1b[31;1m|\x1b[0m                 <BuildingOfficeIcon className="w-16 h-16 text-secondary-300 mx-auto mb-4" />\n \x1b[2m 360\x1b[0m | \x1b[31;1m|\x1b[0m                 <h3 className="text-accessible-xl font-semibold text-secondary-600 mb-2">\n \x1b[2m 361\x1b[0m | \x1b[31;1m|\x1b[0m                   Nenhum estabelecimento cadastrado\n \x1b[2m 362\x1b[0m | \x1b[31;1m|\x1b[0m                 </h3>\n \x1b[2m 363\x1b[0m | \x1b[31;1m|\x1b[0m                 <p className="text-accessible-base text-secondary-500 mb-4">\n \x1b[2m 364\x1b[0m | \x1b[31;1m|\x1b[0m                   Comece criando seu primeiro estabelecimento autism-friendly\n \x1b[2m 365\x1b[0m | \x1b[31;1m|\x1b[0m                 </p>\n \x1b[2m 366\x1b[0m | \x1b[31;1m|\x1b[0m                 <button\n \x1b[2m 367\x1b[0m | \x1b[31;1m|\x1b[0m                   onClick={() => setShowForm(true)}\n \x1b[2m 368\x1b[0m | \x1b[31;1m|\x1b[0m                   className="btn btn-primary"\n \x1b[2m 369\x1b[0m | \x1b[31;1m|\x1b[0m                 >\n \x1b[2m 370\x1b[0m | \x1b[31;1m|\x1b[0m                   Criar Primeiro Estabelecimento\n \x1b[2m 371\x1b[0m | \x1b[31;1m|\x1b[0m                 </button>\n \x1b[2m 372\x1b[0m | \x1b[31;1m|\x1b[0m               </div>\n \x1b[2m 373\x1b[0m | \x1b[31;1m|\x1b[0m             )}\n \x1b[2m 374\x1b[0m | \x1b[31;1m|\x1b[0m           </>\n \x1b[2m 375\x1b[0m | \x1b[31;1m|\x1b[0m         )}\n \x1b[2m 376\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 377\x1b[0m | \x1b[31;1m|\x1b[0m         {/* Users Tab */}\n \x1b[2m 378\x1b[0m | \x1b[31;1m|\x1b[0m         {activeTab === \'users\' && (\n \x1b[2m 379\x1b[0m | \x1b[31;1m|\x1b[0m           <>\n \x1b[2m 380\x1b[0m | \x1b[31;1m|\x1b[0m             <div className="flex items-center justify-between mb-6">\n \x1b[2m 381\x1b[0m | \x1b[31;1m|\x1b[0m               <h2 className="text-accessible-xl font-semibold text-secondary-800">\n \x1b[2m 382\x1b[0m | \x1b[31;1m|\x1b[0m                 Gest\xe3o de Usu\xe1rios\n \x1b[2m 383\x1b[0m | \x1b[31;1m|\x1b[0m               </h2>\n \x1b[2m 384\x1b[0m | \x1b[31;1m|\x1b[0m               <button\n \x1b[2m 385\x1b[0m | \x1b[31;1m|\x1b[0m                 onClick={() => window.location.href = \'/profile\'}\n \x1b[2m 386\x1b[0m | \x1b[31;1m|\x1b[0m                 className="btn btn-primary flex items-center"\n \x1b[2m 387\x1b[0m | \x1b[31;1m|\x1b[0m               >\n \x1b[2m 388\x1b[0m | \x1b[31;1m|\x1b[0m                 <UserPlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m 389\x1b[0m | \x1b[31;1m|\x1b[0m                 Criar Usu\xe1rio\n \x1b[2m 390\x1b[0m | \x1b[31;1m|\x1b[0m               </button>\n \x1b[2m 391\x1b[0m | \x1b[31;1m|\x1b[0m             </div>\n \x1b[2m 392\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 393\x1b[0m | \x1b[31;1m|\x1b[0m             {/* Users List */}\n \x1b[2m 394\x1b[0m | \x1b[31;1m|\x1b[0m             <div className="space-y-4">\n \x1b[2m 395\x1b[0m | \x1b[31;1m|\x1b[0m               {users.map((user) => (\n \x1b[2m 396\x1b[0m | \x1b[31;1m|\x1b[0m                 <div key={user.id} className="card hover:shadow-lg transition-shadow">\n \x1b[2m 397\x1b[0m | \x1b[31;1m|\x1b[0m                   <div className="flex items-start justify-between">\n \x1b[2m 398\x1b[0m | \x1b[31;1m|\x1b[0m                     <div className="flex-1">\n \x1b[2m 399\x1b[0m | \x1b[31;1m|\x1b[0m                       <h3 className="text-accessible-lg font-semibold text-secondary-800 mb-1">\n \x1b[2m 400\x1b[0m | \x1b[31;1m|\x1b[0m                         {user.name || \'Nome n\xe3o informado\'}\n \x1b[2m 401\x1b[0m | \x1b[31;1m|\x1b[0m                       </h3>\n \x1b[2m 402\x1b[0m | \x1b[31;1m|\x1b[0m                       <p className="text-secondary-600 text-accessible-base mb-2">\n \x1b[2m 403\x1b[0m | \x1b[31;1m|\x1b[0m                         {user.email || \'Email n\xe3o informado\'}\n \x1b[2m 404\x1b[0m | \x1b[31;1m|\x1b[0m                       </p>\n \x1b[2m 405\x1b[0m | \x1b[31;1m|\x1b[0m                       <div className="flex items-center text-accessible-sm text-secondary-500">\n \x1b[2m 406\x1b[0m | \x1b[31;1m|\x1b[0m                         <span className="mr-4">\n \x1b[2m 407\x1b[0m | \x1b[31;1m|\x1b[0m                           Idioma: {user.language_preference === \'pt\' ? \'\uD83C\uDDF5\uD83C\uDDF9 Portugu\xeas\' : \'\uD83C\uDDEC\uD83C\uDDE7 English\'}\n \x1b[2m 408\x1b[0m | \x1b[31;1m|\x1b[0m                         </span>\n \x1b[2m 409\x1b[0m | \x1b[31;1m|\x1b[0m                         {user.sensory_profile && (\n \x1b[2m 410\x1b[0m | \x1b[31;1m|\x1b[0m                           <span>\n \x1b[2m 411\x1b[0m | \x1b[31;1m|\x1b[0m                             Perfil sensorial configurado âœ“\n \x1b[2m 412\x1b[0m | \x1b[31;1m|\x1b[0m                           </span>\n \x1b[2m 413\x1b[0m | \x1b[31;1m|\x1b[0m                         )}\n \x1b[2m 414\x1b[0m | \x1b[31;1m|\x1b[0m                       </div>\n \x1b[2m 415\x1b[0m | \x1b[31;1m|\x1b[0m                     </div>\n \x1b[2m 416\x1b[0m | \x1b[31;1m|\x1b[0m                     \n \x1b[2m 417\x1b[0m | \x1b[31;1m|\x1b[0m                     <div className="flex space-x-2 ml-4">\n \x1b[2m 418\x1b[0m | \x1b[31;1m|\x1b[0m                       <button\n \x1b[2m 419\x1b[0m | \x1b[31;1m|\x1b[0m                         onClick={() => window.location.href = \'/profile\'}\n \x1b[2m 420\x1b[0m | \x1b[31;1m|\x1b[0m                         className="p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors"\n \x1b[2m 421\x1b[0m | \x1b[31;1m|\x1b[0m                         title="Editar usu\xe1rio"\n \x1b[2m 422\x1b[0m | \x1b[31;1m|\x1b[0m                       >\n \x1b[2m 423\x1b[0m | \x1b[31;1m|\x1b[0m                         <PencilIcon className="w-5 h-5" />\n \x1b[2m 424\x1b[0m | \x1b[31;1m|\x1b[0m                       </button>\n \x1b[2m 425\x1b[0m | \x1b[31;1m|\x1b[0m                     </div>\n \x1b[2m 426\x1b[0m | \x1b[31;1m|\x1b[0m                   </div>\n \x1b[2m 427\x1b[0m | \x1b[31;1m|\x1b[0m                 </div>\n \x1b[2m 428\x1b[0m | \x1b[31;1m|\x1b[0m               ))}\n \x1b[2m 429\x1b[0m | \x1b[31;1m|\x1b[0m             </div>\n \x1b[2m 430\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 431\x1b[0m | \x1b[31;1m|\x1b[0m             {users.length === 0 && (\n \x1b[2m 432\x1b[0m | \x1b[31;1m|\x1b[0m               <div className="text-center py-12">\n \x1b[2m 433\x1b[0m | \x1b[31;1m|\x1b[0m                 <UsersIcon className="w-16 h-16 text-secondary-300 mx-auto mb-4" />\n \x1b[2m 434\x1b[0m | \x1b[31;1m|\x1b[0m                 <h3 className="text-accessible-xl font-semibold text-secondary-600 mb-2">\n \x1b[2m 435\x1b[0m | \x1b[31;1m|\x1b[0m                   Nenhum usu\xe1rio cadastrado\n \x1b[2m 436\x1b[0m | \x1b[31;1m|\x1b[0m                 </h3>\n \x1b[2m 437\x1b[0m | \x1b[31;1m|\x1b[0m                 <p className="text-accessible-base text-secondary-500 mb-4">\n \x1b[2m 438\x1b[0m | \x1b[31;1m|\x1b[0m                   Crie perfis para usu\xe1rios que utilizar\xe3o a plataforma\n \x1b[2m 439\x1b[0m | \x1b[31;1m|\x1b[0m                 </p>\n \x1b[2m 440\x1b[0m | \x1b[31;1m|\x1b[0m                 <button\n \x1b[2m 441\x1b[0m | \x1b[31;1m|\x1b[0m                   onClick={() => window.location.href = \'/profile\'}\n \x1b[2m 442\x1b[0m | \x1b[31;1m|\x1b[0m                   className="btn btn-primary"\n \x1b[2m 443\x1b[0m | \x1b[31;1m|\x1b[0m                 >\n \x1b[2m 444\x1b[0m | \x1b[31;1m|\x1b[0m                   Criar Primeiro Usu\xe1rio\n \x1b[2m 445\x1b[0m | \x1b[31;1m|\x1b[0m                 </button>\n \x1b[2m 446\x1b[0m | \x1b[31;1m|\x1b[0m               </div>\n \x1b[2m 447\x1b[0m | \x1b[31;1m|\x1b[0m             )}\n \x1b[2m 448\x1b[0m | \x1b[31;1m|\x1b[0m           </>\n \x1b[2m 449\x1b[0m | \x1b[31;1m|\x1b[0m         )}\n \x1b[2m 450\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 451\x1b[0m | \x1b[31;1m|\x1b[0m         {/* Form Modal - Only for Establishments */}\n \x1b[2m 452\x1b[0m | \x1b[31;1m|\x1b[0m         {showForm && (\n \x1b[2m 453\x1b[0m | \x1b[31;1m|\x1b[0m           <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">\n \x1b[2m 454\x1b[0m | \x1b[31;1m|\x1b[0m             <div className="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">\n \x1b[2m 455\x1b[0m | \x1b[31;1m|\x1b[0m               <div className="p-6">\n \x1b[2m 456\x1b[0m | \x1b[31;1m|\x1b[0m                 <div className="flex items-center justify-between mb-6">\n \x1b[2m 457\x1b[0m | \x1b[31;1m|\x1b[0m                   <h2 className="text-accessible-xl font-semibold text-secondary-800">\n \x1b[2m 458\x1b[0m | \x1b[31;1m|\x1b[0m                     {editingId ? \'Editar Estabelecimento\' : \'Novo Estabelecimento\'}\n \x1b[2m 459\x1b[0m | \x1b[31;1m|\x1b[0m                   </h2>\n \x1b[2m 460\x1b[0m | \x1b[31;1m|\x1b[0m                   <button\n \x1b[2m 461\x1b[0m | \x1b[31;1m|\x1b[0m                     onClick={handleCancel}\n \x1b[2m 462\x1b[0m | \x1b[31;1m|\x1b[0m                     className="p-2 hover:bg-secondary-100 rounded-lg"\n \x1b[2m 463\x1b[0m | \x1b[31;1m|\x1b[0m                   >\n \x1b[2m 464\x1b[0m | \x1b[31;1m|\x1b[0m                     <XMarkIcon className="w-6 h-6 text-secondary-600" />\n \x1b[2m 465\x1b[0m | \x1b[31;1m|\x1b[0m                   </button>\n \x1b[2m 466\x1b[0m | \x1b[31;1m|\x1b[0m                 </div>\n \x1b[2m 467\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 468\x1b[0m | \x1b[31;1m|\x1b[0m                 <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">\n \x1b[2m 469\x1b[0m | \x1b[31;1m|\x1b[0m                   {/* Basic Information */}\n \x1b[2m 470\x1b[0m | \x1b[31;1m|\x1b[0m                   <div className="grid grid-cols-1 md:grid-cols-2 gap-6">\n \x1b[2m 471\x1b[0m | \x1b[31;1m|\x1b[0m                     <div>\n \x1b[2m 472\x1b[0m | \x1b[31;1m|\x1b[0m                       <label className="label">Nome *</label>\n \x1b[2m 473\x1b[0m | \x1b[31;1m|\x1b[0m                       <input\n \x1b[2m 474\x1b[0m | \x1b[31;1m|\x1b[0m                         {...register(\'name\', { required: \'Nome \xe9 obrigat\xf3rio\' })}\n \x1b[2m 475\x1b[0m | \x1b[31;1m|\x1b[0m                         className="input"\n \x1b[2m 476\x1b[0m | \x1b[31;1m|\x1b[0m                         placeholder="Nome do estabelecimento"\n \x1b[2m 477\x1b[0m | \x1b[31;1m|\x1b[0m                       />\n \x1b[2m 478\x1b[0m | \x1b[31;1m|\x1b[0m                       {errors.name && (\n \x1b[2m 479\x1b[0m | \x1b[31;1m|\x1b[0m                         <p className="text-red-500 text-accessible-sm mt-1">{errors.name.message}</p>\n \x1b[2m 480\x1b[0m | \x1b[31;1m|\x1b[0m                       )}\n \x1b[2m 481\x1b[0m | \x1b[31;1m|\x1b[0m                     </div>\n \x1b[2m 482\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 483\x1b[0m | \x1b[31;1m|\x1b[0m                     <div>\n \x1b[2m 484\x1b[0m | \x1b[31;1m|\x1b[0m                       <label className="label">Tipo *</label>\n \x1b[2m 485\x1b[0m | \x1b[31;1m|\x1b[0m                       <select\n \x1b[2m 486\x1b[0m | \x1b[31;1m|\x1b[0m                         {...register(\'type\', { required: \'Tipo \xe9 obrigat\xf3rio\' })}\n \x1b[2m 487\x1b[0m | \x1b[31;1m|\x1b[0m                         className="input"\n \x1b[2m 488\x1b[0m | \x1b[31;1m|\x1b[0m                       >\n \x1b[2m 489\x1b[0m | \x1b[31;1m|\x1b[0m                         <option value="">Selecione o tipo</option>\n \x1b[2m 490\x1b[0m | \x1b[31;1m|\x1b[0m                         {Object.entries(ESTABLISHMENT_TYPES).map(([value, label]) => (\n \x1b[2m 491\x1b[0m | \x1b[31;1m|\x1b[0m                           <option key={value} value={value}>{label}</option>\n \x1b[2m 492\x1b[0m | \x1b[31;1m|\x1b[0m                         ))}\n \x1b[2m 493\x1b[0m | \x1b[31;1m|\x1b[0m                       </select>\n \x1b[2m 494\x1b[0m | \x1b[31;1m|\x1b[0m                       {errors.type && (\n \x1b[2m 495\x1b[0m | \x1b[31;1m|\x1b[0m                         <p className="text-red-500 text-accessible-sm mt-1">{errors.type.message}</p>\n \x1b[2m 496\x1b[0m | \x1b[31;1m|\x1b[0m                       )}\n \x1b[2m 497\x1b[0m | \x1b[31;1m|\x1b[0m                     </div>\n \x1b[2m 498\x1b[0m | \x1b[31;1m|\x1b[0m                   </div>\n \x1b[2m 499\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 500\x1b[0m | \x1b[31;1m|\x1b[0m                   <div>\n \x1b[2m 501\x1b[0m | \x1b[31;1m|\x1b[0m                     <label className="label">Descri\xe7\xe3o *</label>\n \x1b[2m 502\x1b[0m | \x1b[31;1m|\x1b[0m                     <textarea\n \x1b[2m 503\x1b[0m | \x1b[31;1m|\x1b[0m                       {...register(\'description\', { required: \'Descri\xe7\xe3o \xe9 obrigat\xf3ria\' })}\n \x1b[2m 504\x1b[0m | \x1b[31;1m|\x1b[0m                       className="input"\n \x1b[2m 505\x1b[0m | \x1b[31;1m|\x1b[0m                       rows={3}\n \x1b[2m 506\x1b[0m | \x1b[31;1m|\x1b[0m                       placeholder="Descri\xe7\xe3o detalhada do estabelecimento"\n \x1b[2m 507\x1b[0m | \x1b[31;1m|\x1b[0m                     />\n \x1b[2m 508\x1b[0m | \x1b[31;1m|\x1b[0m                     {errors.description && (\n \x1b[2m 509\x1b[0m | \x1b[31;1m|\x1b[0m                       <p className="text-red-500 text-accessible-sm mt-1">{errors.description.message}</p>\n \x1b[2m 510\x1b[0m | \x1b[31;1m|\x1b[0m                     )}\n \x1b[2m 511\x1b[0m | \x1b[31;1m|\x1b[0m                   </div>\n \x1b[2m 512\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 513\x1b[0m | \x1b[31;1m|\x1b[0m                   <div>\n \x1b[2m 514\x1b[0m | \x1b[31;1m|\x1b[0m                     <label className="label">Endere\xe7o *</label>\n \x1b[2m 515\x1b[0m | \x1b[31;1m|\x1b[0m                     <input\n \x1b[2m 516\x1b[0m | \x1b[31;1m|\x1b[0m                       {...register(\'address\', { required: \'Endere\xe7o \xe9 obrigat\xf3rio\' })}\n \x1b[2m 517\x1b[0m | \x1b[31;1m|\x1b[0m                       className="input"\n \x1b[2m 518\x1b[0m | \x1b[31;1m|\x1b[0m                       placeholder="Endere\xe7o completo"\n \x1b[2m 519\x1b[0m | \x1b[31;1m|\x1b[0m                     />\n \x1b[2m 520\x1b[0m | \x1b[31;1m|\x1b[0m                     {errors.address && (\n \x1b[2m 521\x1b[0m | \x1b[31;1m|\x1b[0m                       <p className="text-red-500 text-accessible-sm mt-1">{errors.address.message}</p>\n \x1b[2m 522\x1b[0m | \x1b[31;1m|\x1b[0m                     )}\n \x1b[2m 523\x1b[0m | \x1b[31;1m|\x1b[0m                   </div>\n \x1b[2m 524\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 525\x1b[0m | \x1b[31;1m|\x1b[0m                   {/* Coordinates */}\n \x1b[2m 526\x1b[0m | \x1b[31;1m|\x1b[0m                   <div className="grid grid-cols-1 md:grid-cols-2 gap-6">\n \x1b[2m 527\x1b[0m | \x1b[31;1m|\x1b[0m                     <div>\n \x1b[2m 528\x1b[0m | \x1b[31;1m|\x1b[0m                       <label className="label">Latitude</label>\n \x1b[2m 529\x1b[0m | \x1b[31;1m|\x1b[0m                       <input\n \x1b[2m 530\x1b[0m | \x1b[31;1m|\x1b[0m                         {...register(\'coordinates.lat\')}\n \x1b[2m 531\x1b[0m | \x1b[31;1m|\x1b[0m                         type="number"\n \x1b[2m 532\x1b[0m | \x1b[31;1m|\x1b[0m                         step="any"\n \x1b[2m 533\x1b[0m | \x1b[31;1m|\x1b[0m                         className="input"\n \x1b[2m 534\x1b[0m | \x1b[31;1m|\x1b[0m                         placeholder="37.0"\n \x1b[2m 535\x1b[0m | \x1b[31;1m|\x1b[0m                       />\n \x1b[2m 536\x1b[0m | \x1b[31;1m|\x1b[0m                     </div>\n \x1b[2m 537\x1b[0m | \x1b[31;1m|\x1b[0m                     <div>\n \x1b[2m 538\x1b[0m | \x1b[31;1m|\x1b[0m                       <label className="label">Longitude</label>\n \x1b[2m 539\x1b[0m | \x1b[31;1m|\x1b[0m                       <input\n \x1b[2m 540\x1b[0m | \x1b[31;1m|\x1b[0m                         {...register(\'coordinates.lng\')}\n \x1b[2m 541\x1b[0m | \x1b[31;1m|\x1b[0m                         type="number"\n \x1b[2m 542\x1b[0m | \x1b[31;1m|\x1b[0m                         step="any"\n \x1b[2m 543\x1b[0m | \x1b[31;1m|\x1b[0m                         className="input"\n \x1b[2m 544\x1b[0m | \x1b[31;1m|\x1b[0m                         placeholder="-8.0"\n \x1b[2m 545\x1b[0m | \x1b[31;1m|\x1b[0m                       />\n \x1b[2m 546\x1b[0m | \x1b[31;1m|\x1b[0m                     </div>\n \x1b[2m 547\x1b[0m | \x1b[31;1m|\x1b[0m                   </div>\n \x1b[2m 548\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 549\x1b[0m | \x1b[31;1m|\x1b[0m                   {/* Certification */}\n \x1b[2m 550\x1b[0m | \x1b[31;1m|\x1b[0m                   <div>\n \x1b[2m 551\x1b[0m | \x1b[31;1m|\x1b[0m                     <label className="flex items-center">\n \x1b[2m 552\x1b[0m | \x1b[31;1m|\x1b[0m                       <input\n \x1b[2m 553\x1b[0m | \x1b[31;1m|\x1b[0m                         {...register(\'certified_autism_friendly\')}\n \x1b[2m 554\x1b[0m | \x1b[31;1m|\x1b[0m                         type="checkbox"\n \x1b[2m 555\x1b[0m | \x1b[31;1m|\x1b[0m                         className="mr-3 w-4 h-4 text-primary-600 rounded focus:ring-primary-500"\n \x1b[2m 556\x1b[0m | \x1b[31;1m|\x1b[0m                       />\n \x1b[2m 557\x1b[0m | \x1b[31;1m|\x1b[0m                       <ShieldCheckIcon className="w-5 h-5 text-green-600 mr-2" />\n \x1b[2m 558\x1b[0m | \x1b[31;1m|\x1b[0m                       <span className="label mb-0">Certificado Autism Friendly</span>\n \x1b[2m 559\x1b[0m | \x1b[31;1m|\x1b[0m                     </label>\n \x1b[2m 560\x1b[0m | \x1b[31;1m|\x1b[0m                   </div>\n \x1b[2m 561\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 562\x1b[0m | \x1b[31;1m|\x1b[0m                   {/* Accessibility Features */}\n \x1b[2m 563\x1b[0m | \x1b[31;1m|\x1b[0m                   <div>\n \x1b[2m 564\x1b[0m | \x1b[31;1m|\x1b[0m                     <label className="label">Recursos de Acessibilidade</label>\n \x1b[2m 565\x1b[0m | \x1b[31;1m|\x1b[0m                     <div className="grid grid-cols-2 md:grid-cols-3 gap-3">\n \x1b[2m 566\x1b[0m | \x1b[31;1m|\x1b[0m                       {Object.entries(ACCESSIBILITY_FEATURES).map(([feature, label]) => (\n \x1b[2m 567\x1b[0m | \x1b[31;1m|\x1b[0m                         <label key={feature} className="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-secondary-50">\n \x1b[2m 568\x1b[0m | \x1b[31;1m|\x1b[0m                           <input\n \x1b[2m 569\x1b[0m | \x1b[31;1m|\x1b[0m                             type="checkbox"\n \x1b[2m 570\x1b[0m | \x1b[31;1m|\x1b[0m                             checked={watch(\'accessibility_features\')?.includes(feature) || false}\n \x1b[2m 571\x1b[0m | \x1b[31;1m|\x1b[0m                             onChange={() => handleFeatureToggle(feature)}\n \x1b[2m 572\x1b[0m | \x1b[31;1m|\x1b[0m                             className="mr-3 w-4 h-4 text-primary-600 rounded focus:ring-primary-500"\n \x1b[2m 573\x1b[0m | \x1b[31;1m|\x1b[0m                           />\n \x1b[2m 574\x1b[0m | \x1b[31;1m|\x1b[0m                           <span className="text-accessible-sm">{label}</span>\n \x1b[2m 575\x1b[0m | \x1b[31;1m|\x1b[0m                         </label>\n \x1b[2m 576\x1b[0m | \x1b[31;1m|\x1b[0m                       ))}\n \x1b[2m 577\x1b[0m | \x1b[31;1m|\x1b[0m                     </div>\n \x1b[2m 578\x1b[0m | \x1b[31;1m|\x1b[0m                   </div>\n \x1b[2m 579\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 580\x1b[0m | \x1b[31;1m|\x1b[0m                   {/* Contact Information */}\n \x1b[2m 581\x1b[0m | \x1b[31;1m|\x1b[0m                   <div>\n \x1b[2m 582\x1b[0m | \x1b[31;1m|\x1b[0m                     <label className="label">Informa\xe7\xf5es de Contato</label>\n \x1b[2m 583\x1b[0m | \x1b[31;1m|\x1b[0m                     <div className="grid grid-cols-1 md:grid-cols-3 gap-4">\n \x1b[2m 584\x1b[0m | \x1b[31;1m|\x1b[0m                       <input\n \x1b[2m 585\x1b[0m | \x1b[31;1m|\x1b[0m                         {...register(\'contact_info.phone\')}\n \x1b[2m 586\x1b[0m | \x1b[31;1m|\x1b[0m                         className="input"\n \x1b[2m 587\x1b[0m | \x1b[31;1m|\x1b[0m                         placeholder="Telefone"\n \x1b[2m 588\x1b[0m | \x1b[31;1m|\x1b[0m                       />\n \x1b[2m 589\x1b[0m | \x1b[31;1m|\x1b[0m                       <input\n \x1b[2m 590\x1b[0m | \x1b[31;1m|\x1b[0m                         {...register(\'contact_info.email\')}\n \x1b[2m 591\x1b[0m | \x1b[31;1m|\x1b[0m                         type="email"\n \x1b[2m 592\x1b[0m | \x1b[31;1m|\x1b[0m                         className="input"\n \x1b[2m 593\x1b[0m | \x1b[31;1m|\x1b[0m                         placeholder="Email"\n \x1b[2m 594\x1b[0m | \x1b[31;1m|\x1b[0m                       />\n \x1b[2m 595\x1b[0m | \x1b[31;1m|\x1b[0m                       <input\n \x1b[2m 596\x1b[0m | \x1b[31;1m|\x1b[0m                         {...register(\'contact_info.website\')}\n \x1b[2m 597\x1b[0m | \x1b[31;1m|\x1b[0m                         className="input"\n \x1b[2m 598\x1b[0m | \x1b[31;1m|\x1b[0m                         placeholder="Website"\n \x1b[2m 599\x1b[0m | \x1b[31;1m|\x1b[0m                       />\n \x1b[2m 600\x1b[0m | \x1b[31;1m|\x1b[0m                     </div>\n \x1b[2m 601\x1b[0m | \x1b[31;1m|\x1b[0m                   </div>\n \x1b[2m 602\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 603\x1b[0m | \x1b[31;1m|\x1b[0m                   {/* Opening Hours */}\n \x1b[2m 604\x1b[0m | \x1b[31;1m|\x1b[0m                   <div>\n \x1b[2m 605\x1b[0m | \x1b[31;1m|\x1b[0m                     <label className="label">Hor\xe1rios de Funcionamento</label>\n \x1b[2m 606\x1b[0m | \x1b[31;1m|\x1b[0m                     <div className="grid grid-cols-1 md:grid-cols-2 gap-4">\n \x1b[2m 607\x1b[0m | \x1b[31;1m|\x1b[0m                       {Object.entries(DAYS_OF_WEEK).map(([day, label]) => (\n \x1b[2m 608\x1b[0m | \x1b[31;1m|\x1b[0m                         <div key={day} className="flex items-center space-x-2">\n \x1b[2m 609\x1b[0m | \x1b[31;1m|\x1b[0m                           <span className="w-24 text-accessible-sm">{label}:</span>\n \x1b[2m 610\x1b[0m | \x1b[31;1m|\x1b[0m                           <input\n \x1b[2m 611\x1b[0m | \x1b[31;1m|\x1b[0m                             {...register(`opening_hours.${day}` as const)}\n \x1b[2m 612\x1b[0m | \x1b[31;1m|\x1b[0m                             className="input flex-1"\n \x1b[2m 613\x1b[0m | \x1b[31;1m|\x1b[0m                             placeholder="09:00-18:00"\n \x1b[2m 614\x1b[0m | \x1b[31;1m|\x1b[0m                           />\n \x1b[2m 615\x1b[0m | \x1b[31;1m|\x1b[0m                         </div>\n \x1b[2m 616\x1b[0m | \x1b[31;1m|\x1b[0m                       ))}\n \x1b[2m 617\x1b[0m | \x1b[31;1m|\x1b[0m                     </div>\n \x1b[2m 618\x1b[0m | \x1b[31;1m|\x1b[0m                   </div>\n \x1b[2m 619\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 620\x1b[0m | \x1b[31;1m|\x1b[0m                   {/* Images */}\n \x1b[2m 621\x1b[0m | \x1b[31;1m|\x1b[0m                   <div>\n \x1b[2m 622\x1b[0m | \x1b[31;1m|\x1b[0m                     <label className="label">Imagens</label>\n \x1b[2m 623\x1b[0m | \x1b[31;1m|\x1b[0m                     <div className="border-2 border-dashed border-secondary-300 rounded-lg p-6">\n \x1b[2m 624\x1b[0m | \x1b[31;1m|\x1b[0m                       <input\n \x1b[2m 625\x1b[0m | \x1b[31;1m|\x1b[0m                         type="file"\n \x1b[2m 626\x1b[0m | \x1b[31;1m|\x1b[0m                         multiple\n \x1b[2m 627\x1b[0m | \x1b[31;1m|\x1b[0m                         accept="image/*"\n \x1b[2m 628\x1b[0m | \x1b[31;1m|\x1b[0m                         onChange={handleImageUpload}\n \x1b[2m 629\x1b[0m | \x1b[31;1m|\x1b[0m                         className="hidden"\n \x1b[2m 630\x1b[0m | \x1b[31;1m|\x1b[0m                         id="image-upload"\n \x1b[2m 631\x1b[0m | \x1b[31;1m|\x1b[0m                       />\n \x1b[2m 632\x1b[0m | \x1b[31;1m|\x1b[0m                       <label\n \x1b[2m 633\x1b[0m | \x1b[31;1m|\x1b[0m                         htmlFor="image-upload"\n \x1b[2m 634\x1b[0m | \x1b[31;1m|\x1b[0m                         className="flex flex-col items-center cursor-pointer"\n \x1b[2m 635\x1b[0m | \x1b[31;1m|\x1b[0m                       >\n \x1b[2m 636\x1b[0m | \x1b[31;1m|\x1b[0m                         <PhotoIcon className="w-12 h-12 text-secondary-400 mb-2" />\n \x1b[2m 637\x1b[0m | \x1b[31;1m|\x1b[0m                         <span className="text-accessible-base text-secondary-600">\n \x1b[2m 638\x1b[0m | \x1b[31;1m|\x1b[0m                           Clique para selecionar imagens\n \x1b[2m 639\x1b[0m | \x1b[31;1m|\x1b[0m                         </span>\n \x1b[2m 640\x1b[0m | \x1b[31;1m|\x1b[0m                       </label>\n \x1b[2m 641\x1b[0m | \x1b[31;1m|\x1b[0m                     </div>\n \x1b[2m 642\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 643\x1b[0m | \x1b[31;1m|\x1b[0m                     {/* Selected Images Preview */}\n \x1b[2m 644\x1b[0m | \x1b[31;1m|\x1b[0m                     {selectedImages.length > 0 && (\n \x1b[2m 645\x1b[0m | \x1b[31;1m|\x1b[0m                       <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">\n \x1b[2m 646\x1b[0m | \x1b[31;1m|\x1b[0m                         {selectedImages.map((image, index) => (\n \x1b[2m 647\x1b[0m | \x1b[31;1m|\x1b[0m                           <div key={index} className="relative">\n \x1b[2m 648\x1b[0m | \x1b[31;1m|\x1b[0m                             <img\n \x1b[2m 649\x1b[0m | \x1b[31;1m|\x1b[0m                               src={`data:image/jpeg;base64,${image}`}\n \x1b[2m 650\x1b[0m | \x1b[31;1m|\x1b[0m                               alt={`Preview ${index + 1}`}\n \x1b[2m 651\x1b[0m | \x1b[31;1m|\x1b[0m                               className="w-full h-24 object-cover rounded-lg"\n \x1b[2m 652\x1b[0m | \x1b[31;1m|\x1b[0m                             />\n \x1b[2m 653\x1b[0m | \x1b[31;1m|\x1b[0m                             <button\n \x1b[2m 654\x1b[0m | \x1b[31;1m|\x1b[0m                               type="button"\n \x1b[2m 655\x1b[0m | \x1b[31;1m|\x1b[0m                               onClick={() => removeImage(index)}\n \x1b[2m 656\x1b[0m | \x1b[31;1m|\x1b[0m                               className="absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600"\n \x1b[2m 657\x1b[0m | \x1b[31;1m|\x1b[0m                             >\n \x1b[2m 658\x1b[0m | \x1b[31;1m|\x1b[0m                               <XMarkIcon className="w-4 h-4" />\n \x1b[2m 659\x1b[0m | \x1b[31;1m|\x1b[0m                             </button>\n \x1b[2m 660\x1b[0m | \x1b[31;1m|\x1b[0m                           </div>\n \x1b[2m 661\x1b[0m | \x1b[31;1m|\x1b[0m                         ))}\n \x1b[2m 662\x1b[0m | \x1b[31;1m|\x1b[0m                       </div>\n \x1b[2m 663\x1b[0m | \x1b[31;1m|\x1b[0m                     )}\n \x1b[2m 664\x1b[0m | \x1b[31;1m|\x1b[0m                   </div>\n \x1b[2m 665\x1b[0m | \x1b[31;1m|\x1b[0m   \n \x1b[2m 666\x1b[0m | \x1b[31;1m|\x1b[0m                   {/* Form Actions */}\n \x1b[2m 667\x1b[0m | \x1b[31;1m|\x1b[0m                   <div className="flex justify-end space-x-4 pt-6 border-t">\n \x1b[2m 668\x1b[0m | \x1b[31;1m|\x1b[0m                     <button\n \x1b[2m 669\x1b[0m | \x1b[31;1m|\x1b[0m                       type="button"\n \x1b[2m 670\x1b[0m | \x1b[31;1m|\x1b[0m                       onClick={handleCancel}\n \x1b[2m 671\x1b[0m | \x1b[31;1m|\x1b[0m                       className="btn btn-secondary"\n \x1b[2m 672\x1b[0m | \x1b[31;1m|\x1b[0m                     >\n \x1b[2m 673\x1b[0m | \x1b[31;1m|\x1b[0m                       Cancelar\n \x1b[2m 674\x1b[0m | \x1b[31;1m|\x1b[0m                     </button>\n \x1b[2m 675\x1b[0m | \x1b[31;1m|\x1b[0m                     <button\n \x1b[2m 676\x1b[0m | \x1b[31;1m|\x1b[0m                       type="submit"\n \x1b[2m 677\x1b[0m | \x1b[31;1m|\x1b[0m                       disabled={loading}\n \x1b[2m 678\x1b[0m | \x1b[31;1m|\x1b[0m                       className="btn btn-primary flex items-center"\n \x1b[2m 679\x1b[0m | \x1b[31;1m|\x1b[0m                     >\n \x1b[2m 680\x1b[0m | \x1b[31;1m|\x1b[0m                       {loading ? (\n \x1b[2m 681\x1b[0m | \x1b[31;1m|\x1b[0m                         <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"></div>\n \x1b[2m 682\x1b[0m | \x1b[31;1m|\x1b[0m                       ) : (\n \x1b[2m 683\x1b[0m | \x1b[31;1m|\x1b[0m                         <PlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m 684\x1b[0m | \x1b[31;1m|\x1b[0m                       )}\n \x1b[2m 685\x1b[0m | \x1b[31;1m|\x1b[0m                       {editingId ? \'Atualizar\' : \'Criar\'} Estabelecimento\n \x1b[2m 686\x1b[0m | \x1b[31;1m|\x1b[0m                     </button>\n \x1b[2m 687\x1b[0m | \x1b[31;1m|\x1b[0m                   </div>\n \x1b[2m 688\x1b[0m | \x1b[31;1m|\x1b[0m                 </form>\n \x1b[2m 689\x1b[0m | \x1b[31;1m|\x1b[0m               </div>\n \x1b[2m 690\x1b[0m | \x1b[31;1m|\x1b[0m             </div>\n \x1b[2m 691\x1b[0m | \x1b[31;1m|\x1b[0m           </div>\n \x1b[2m 692\x1b[0m | \x1b[31;1m|\x1b[0m         )}\n \x1b[2m 693\x1b[0m | \x1b[31;1m|\x1b[0m       </div>\n \x1b[2m 694\x1b[0m | \x1b[31;1m|\x1b[0m     )\n \x1b[2m 695\x1b[0m | \x1b[31;1m|\x1b[0m\x1b[31;1m-\x1b[0m\x1b[31;1m>\x1b[0m }\n      : \x1b[31;1m`\x1b[0m\x1b[31;1m---\x1b[0m\x1b[31;1m-\x1b[0m \x1b[31;1mprevious exported here\x1b[0m\n \x1b[2m 696\x1b[0m |     \n \x1b[2m 697\x1b[0m |     interface Establishment {\n \x1b[2m 698\x1b[0m |       id?: string\n \x1b[2m 699\x1b[0m |       name: string\n \x1b[2m 700\x1b[0m |       type: string\n \x1b[2m 701\x1b[0m |       description: string\n \x1b[2m 702\x1b[0m |       address: string\n \x1b[2m 703\x1b[0m |       coordinates: { lat: number; lng: number }\n \x1b[2m 704\x1b[0m |       accessibility_features: string[]\n \x1b[2m 705\x1b[0m |       certified_autism_friendly: boolean\n \x1b[2m 706\x1b[0m |       contact_info: { [key: string]: string }\n \x1b[2m 707\x1b[0m |       opening_hours: { [key: string]: string }\n \x1b[2m 708\x1b[0m |       special_hours: string[]\n \x1b[2m 709\x1b[0m |       sensory_info: { [key: string]: any }\n \x1b[2m 710\x1b[0m |       images: string[]\n \x1b[2m 711\x1b[0m |     }\n \x1b[2m 712\x1b[0m |     \n \x1b[2m 713\x1b[0m |     const ESTABLISHMENT_TYPES = {\n \x1b[2m 714\x1b[0m |       hotel: \'Hotel\',\n \x1b[2m 715\x1b[0m |       restaurant: \'Restaurante\',\n \x1b[2m 716\x1b[0m |       attraction: \'Atra\xe7\xe3o\',\n \x1b[2m 717\x1b[0m |       event: \'Evento\',\n \x1b[2m 718\x1b[0m |       shopping: \'Compras\',\n \x1b[2m 719\x1b[0m |       transport: \'Transporte\'\n \x1b[2m 720\x1b[0m |     }\n \x1b[2m 721\x1b[0m |     \n \x1b[2m 722\x1b[0m |     const ACCESSIBILITY_FEATURES = {\n \x1b[2m 723\x1b[0m |       quiet_spaces: \'Espa\xe7os Silenciosos\',\n \x1b[2m 724\x1b[0m |       sensory_rooms: \'Salas Sensoriais\',\n \x1b[2m 725\x1b[0m |       low_lighting: \'Ilumina\xe7\xe3o Reduzida\',\n \x1b[2m 726\x1b[0m |       trained_staff: \'Equipe Treinada\',\n \x1b[2m 727\x1b[0m |       visual_schedules: \'Hor\xe1rios Visuais\',\n \x1b[2m 728\x1b[0m |       noise_reduction: \'Redu\xe7\xe3o de Ru\xeddo\',\n \x1b[2m 729\x1b[0m |       calm_environment: \'Ambiente Calmo\',\n \x1b[2m 730\x1b[0m |       flexible_timing: \'Hor\xe1rios Flex\xedveis\'\n \x1b[2m 731\x1b[0m |     }\n \x1b[2m 732\x1b[0m |     \n \x1b[2m 733\x1b[0m |     const DAYS_OF_WEEK = {\n \x1b[2m 734\x1b[0m |       monday: \'Segunda-feira\',\n \x1b[2m 735\x1b[0m |       tuesday: \'Ter\xe7a-feira\',\n \x1b[2m 736\x1b[0m |       wednesday: \'Quarta-feira\',\n \x1b[2m 737\x1b[0m |       thursday: \'Quinta-feira\',\n \x1b[2m 738\x1b[0m |       friday: \'Sexta-feira\',\n \x1b[2m 739\x1b[0m |       saturday: \'S\xe1bado\',\n \x1b[2m 740\x1b[0m |       sunday: \'Domingo\'\n \x1b[2m 741\x1b[0m |     }\n \x1b[2m 742\x1b[0m |     \n \x1b[2m 743\x1b[0m | \x1b[33;1m,\x1b[0m\x1b[33;1m-\x1b[0m\x1b[33;1m>\x1b[0m export default function AdminPage() {\n \x1b[2m 744\x1b[0m | \x1b[33;1m|\x1b[0m     const [establishments, setEstablishments] = useState<Establishment[]>([])\n \x1b[2m 745\x1b[0m | \x1b[33;1m|\x1b[0m     const [showForm, setShowForm] = useState(false)\n \x1b[2m 746\x1b[0m | \x1b[33;1m|\x1b[0m     const [editingId, setEditingId] = useState<string | null>(null)\n \x1b[2m 747\x1b[0m | \x1b[33;1m|\x1b[0m     const [loading, setLoading] = useState(false)\n \x1b[2m 748\x1b[0m | \x1b[33;1m|\x1b[0m     const [selectedImages, setSelectedImages] = useState<string[]>([])\n \x1b[2m 749\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 750\x1b[0m | \x1b[33;1m|\x1b[0m     const { register, handleSubmit, reset, setValue, watch, formState: { errors } } = useForm<Establishment>()\n \x1b[2m 751\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 752\x1b[0m | \x1b[33;1m|\x1b[0m     useEffect(() => {\n \x1b[2m 753\x1b[0m | \x1b[33;1m|\x1b[0m       fetchEstablishments()\n \x1b[2m 754\x1b[0m | \x1b[33;1m|\x1b[0m     }, [])\n \x1b[2m 755\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 756\x1b[0m | \x1b[33;1m|\x1b[0m     const fetchEstablishments = async () => {\n \x1b[2m 757\x1b[0m | \x1b[33;1m|\x1b[0m       try {\n \x1b[2m 758\x1b[0m | \x1b[33;1m|\x1b[0m         const response = await fetch(\'/api/establishments\')\n \x1b[2m 759\x1b[0m | \x1b[33;1m|\x1b[0m         if (response.ok) {\n \x1b[2m 760\x1b[0m | \x1b[33;1m|\x1b[0m           const data = await response.json()\n \x1b[2m 761\x1b[0m | \x1b[33;1m|\x1b[0m           setEstablishments(data)\n \x1b[2m 762\x1b[0m | \x1b[33;1m|\x1b[0m         }\n \x1b[2m 763\x1b[0m | \x1b[33;1m|\x1b[0m       } catch (error) {\n \x1b[2m 764\x1b[0m | \x1b[33;1m|\x1b[0m         console.error(\'Error fetching establishments:\', error)\n \x1b[2m 765\x1b[0m | \x1b[33;1m|\x1b[0m         toast.error(\'Erro ao carregar estabelecimentos\')\n \x1b[2m 766\x1b[0m | \x1b[33;1m|\x1b[0m       }\n \x1b[2m 767\x1b[0m | \x1b[33;1m|\x1b[0m     }\n \x1b[2m 768\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 769\x1b[0m | \x1b[33;1m|\x1b[0m     const onSubmit = async (data: Establishment) => {\n \x1b[2m 770\x1b[0m | \x1b[33;1m|\x1b[0m       setLoading(true)\n \x1b[2m 771\x1b[0m | \x1b[33;1m|\x1b[0m       try {\n \x1b[2m 772\x1b[0m | \x1b[33;1m|\x1b[0m         // Add selected images to the data\n \x1b[2m 773\x1b[0m | \x1b[33;1m|\x1b[0m         const formData = {\n \x1b[2m 774\x1b[0m | \x1b[33;1m|\x1b[0m           ...data,\n \x1b[2m 775\x1b[0m | \x1b[33;1m|\x1b[0m           images: selectedImages,\n \x1b[2m 776\x1b[0m | \x1b[33;1m|\x1b[0m           coordinates: {\n \x1b[2m 777\x1b[0m | \x1b[33;1m|\x1b[0m             lat: Number(data.coordinates.lat) || 37.0,\n \x1b[2m 778\x1b[0m | \x1b[33;1m|\x1b[0m             lng: Number(data.coordinates.lng) || -8.0\n \x1b[2m 779\x1b[0m | \x1b[33;1m|\x1b[0m           }\n \x1b[2m 780\x1b[0m | \x1b[33;1m|\x1b[0m         }\n \x1b[2m 781\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 782\x1b[0m | \x1b[33;1m|\x1b[0m         let response\n \x1b[2m 783\x1b[0m | \x1b[33;1m|\x1b[0m         if (editingId) {\n \x1b[2m 784\x1b[0m | \x1b[33;1m|\x1b[0m           response = await fetch(`/api/establishments/${editingId}`, {\n \x1b[2m 785\x1b[0m | \x1b[33;1m|\x1b[0m             method: \'PUT\',\n \x1b[2m 786\x1b[0m | \x1b[33;1m|\x1b[0m             headers: { \'Content-Type\': \'application/json\' },\n \x1b[2m 787\x1b[0m | \x1b[33;1m|\x1b[0m             body: JSON.stringify(formData)\n \x1b[2m 788\x1b[0m | \x1b[33;1m|\x1b[0m           })\n \x1b[2m 789\x1b[0m | \x1b[33;1m|\x1b[0m         } else {\n \x1b[2m 790\x1b[0m | \x1b[33;1m|\x1b[0m           response = await fetch(\'/api/establishments\', {\n \x1b[2m 791\x1b[0m | \x1b[33;1m|\x1b[0m             method: \'POST\',\n \x1b[2m 792\x1b[0m | \x1b[33;1m|\x1b[0m             headers: { \'Content-Type\': \'application/json\' },\n \x1b[2m 793\x1b[0m | \x1b[33;1m|\x1b[0m             body: JSON.stringify(formData)\n \x1b[2m 794\x1b[0m | \x1b[33;1m|\x1b[0m           })\n \x1b[2m 795\x1b[0m | \x1b[33;1m|\x1b[0m         }\n \x1b[2m 796\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 797\x1b[0m | \x1b[33;1m|\x1b[0m         if (response.ok) {\n \x1b[2m 798\x1b[0m | \x1b[33;1m|\x1b[0m           toast.success(editingId ? \'Estabelecimento atualizado!\' : \'Estabelecimento criado!\')\n \x1b[2m 799\x1b[0m | \x1b[33;1m|\x1b[0m           fetchEstablishments()\n \x1b[2m 800\x1b[0m | \x1b[33;1m|\x1b[0m           handleCancel()\n \x1b[2m 801\x1b[0m | \x1b[33;1m|\x1b[0m         } else {\n \x1b[2m 802\x1b[0m | \x1b[33;1m|\x1b[0m           toast.error(\'Erro ao salvar estabelecimento\')\n \x1b[2m 803\x1b[0m | \x1b[33;1m|\x1b[0m         }\n \x1b[2m 804\x1b[0m | \x1b[33;1m|\x1b[0m       } catch (error) {\n \x1b[2m 805\x1b[0m | \x1b[33;1m|\x1b[0m         console.error(\'Error saving establishment:\', error)\n \x1b[2m 806\x1b[0m | \x1b[33;1m|\x1b[0m         toast.error(\'Erro ao salvar estabelecimento\')\n \x1b[2m 807\x1b[0m | \x1b[33;1m|\x1b[0m       } finally {\n \x1b[2m 808\x1b[0m | \x1b[33;1m|\x1b[0m         setLoading(false)\n \x1b[2m 809\x1b[0m | \x1b[33;1m|\x1b[0m       }\n \x1b[2m 810\x1b[0m | \x1b[33;1m|\x1b[0m     }\n \x1b[2m 811\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 812\x1b[0m | \x1b[33;1m|\x1b[0m     const handleEdit = (establishment: Establishment) => {\n \x1b[2m 813\x1b[0m | \x1b[33;1m|\x1b[0m       setEditingId(establishment.id || null)\n \x1b[2m 814\x1b[0m | \x1b[33;1m|\x1b[0m       setShowForm(true)\n \x1b[2m 815\x1b[0m | \x1b[33;1m|\x1b[0m       setSelectedImages(establishment.images || [])\n \x1b[2m 816\x1b[0m | \x1b[33;1m|\x1b[0m       \n \x1b[2m 817\x1b[0m | \x1b[33;1m|\x1b[0m       // Populate form with existing data\n \x1b[2m 818\x1b[0m | \x1b[33;1m|\x1b[0m       Object.keys(establishment).forEach((key) => {\n \x1b[2m 819\x1b[0m | \x1b[33;1m|\x1b[0m         if (key === \'coordinates\') {\n \x1b[2m 820\x1b[0m | \x1b[33;1m|\x1b[0m           setValue(\'coordinates.lat\', establishment.coordinates.lat)\n \x1b[2m 821\x1b[0m | \x1b[33;1m|\x1b[0m           setValue(\'coordinates.lng\', establishment.coordinates.lng)\n \x1b[2m 822\x1b[0m | \x1b[33;1m|\x1b[0m         } else {\n \x1b[2m 823\x1b[0m | \x1b[33;1m|\x1b[0m           setValue(key as keyof Establishment, establishment[key as keyof Establishment])\n \x1b[2m 824\x1b[0m | \x1b[33;1m|\x1b[0m         }\n \x1b[2m 825\x1b[0m | \x1b[33;1m|\x1b[0m       })\n \x1b[2m 826\x1b[0m | \x1b[33;1m|\x1b[0m     }\n \x1b[2m 827\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 828\x1b[0m | \x1b[33;1m|\x1b[0m     const handleDelete = async (id: string) => {\n \x1b[2m 829\x1b[0m | \x1b[33;1m|\x1b[0m       if (!confirm(\'Tem certeza que deseja excluir este estabelecimento?\')) return\n \x1b[2m 830\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 831\x1b[0m | \x1b[33;1m|\x1b[0m       try {\n \x1b[2m 832\x1b[0m | \x1b[33;1m|\x1b[0m         const response = await fetch(`/api/establishments/${id}`, {\n \x1b[2m 833\x1b[0m | \x1b[33;1m|\x1b[0m           method: \'DELETE\'\n \x1b[2m 834\x1b[0m | \x1b[33;1m|\x1b[0m         })\n \x1b[2m 835\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 836\x1b[0m | \x1b[33;1m|\x1b[0m         if (response.ok) {\n \x1b[2m 837\x1b[0m | \x1b[33;1m|\x1b[0m           toast.success(\'Estabelecimento exclu\xeddo!\')\n \x1b[2m 838\x1b[0m | \x1b[33;1m|\x1b[0m           fetchEstablishments()\n \x1b[2m 839\x1b[0m | \x1b[33;1m|\x1b[0m         } else {\n \x1b[2m 840\x1b[0m | \x1b[33;1m|\x1b[0m           toast.error(\'Erro ao excluir estabelecimento\')\n \x1b[2m 841\x1b[0m | \x1b[33;1m|\x1b[0m         }\n \x1b[2m 842\x1b[0m | \x1b[33;1m|\x1b[0m       } catch (error) {\n \x1b[2m 843\x1b[0m | \x1b[33;1m|\x1b[0m         console.error(\'Error deleting establishment:\', error)\n \x1b[2m 844\x1b[0m | \x1b[33;1m|\x1b[0m         toast.error(\'Erro ao excluir estabelecimento\')\n \x1b[2m 845\x1b[0m | \x1b[33;1m|\x1b[0m       }\n \x1b[2m 846\x1b[0m | \x1b[33;1m|\x1b[0m     }\n \x1b[2m 847\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 848\x1b[0m | \x1b[33;1m|\x1b[0m     const handleCancel = () => {\n \x1b[2m 849\x1b[0m | \x1b[33;1m|\x1b[0m       setShowForm(false)\n \x1b[2m 850\x1b[0m | \x1b[33;1m|\x1b[0m       setEditingId(null)\n \x1b[2m 851\x1b[0m | \x1b[33;1m|\x1b[0m       setSelectedImages([])\n \x1b[2m 852\x1b[0m | \x1b[33;1m|\x1b[0m       reset()\n \x1b[2m 853\x1b[0m | \x1b[33;1m|\x1b[0m     }\n \x1b[2m 854\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 855\x1b[0m | \x1b[33;1m|\x1b[0m     const handleImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n \x1b[2m 856\x1b[0m | \x1b[33;1m|\x1b[0m       const files = event.target.files\n \x1b[2m 857\x1b[0m | \x1b[33;1m|\x1b[0m       if (!files) return\n \x1b[2m 858\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 859\x1b[0m | \x1b[33;1m|\x1b[0m       Array.from(files).forEach((file) => {\n \x1b[2m 860\x1b[0m | \x1b[33;1m|\x1b[0m         const reader = new FileReader()\n \x1b[2m 861\x1b[0m | \x1b[33;1m|\x1b[0m         reader.onload = (e) => {\n \x1b[2m 862\x1b[0m | \x1b[33;1m|\x1b[0m           const base64 = e.target?.result as string\n \x1b[2m 863\x1b[0m | \x1b[33;1m|\x1b[0m           const base64Data = base64.split(\',\')[1] // Remove data:image/jpeg;base64, prefix\n \x1b[2m 864\x1b[0m | \x1b[33;1m|\x1b[0m           setSelectedImages(prev => [...prev, base64Data])\n \x1b[2m 865\x1b[0m | \x1b[33;1m|\x1b[0m         }\n \x1b[2m 866\x1b[0m | \x1b[33;1m|\x1b[0m         reader.readAsDataURL(file)\n \x1b[2m 867\x1b[0m | \x1b[33;1m|\x1b[0m       })\n \x1b[2m 868\x1b[0m | \x1b[33;1m|\x1b[0m     }\n \x1b[2m 869\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 870\x1b[0m | \x1b[33;1m|\x1b[0m     const removeImage = (index: number) => {\n \x1b[2m 871\x1b[0m | \x1b[33;1m|\x1b[0m       setSelectedImages(prev => prev.filter((_, i) => i !== index))\n \x1b[2m 872\x1b[0m | \x1b[33;1m|\x1b[0m     }\n \x1b[2m 873\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 874\x1b[0m | \x1b[33;1m|\x1b[0m     const handleFeatureToggle = (feature: string) => {\n \x1b[2m 875\x1b[0m | \x1b[33;1m|\x1b[0m       const currentFeatures = watch(\'accessibility_features\') || []\n \x1b[2m 876\x1b[0m | \x1b[33;1m|\x1b[0m       const newFeatures = currentFeatures.includes(feature)\n \x1b[2m 877\x1b[0m | \x1b[33;1m|\x1b[0m         ? currentFeatures.filter(f => f !== feature)\n \x1b[2m 878\x1b[0m | \x1b[33;1m|\x1b[0m         : [...currentFeatures, feature]\n \x1b[2m 879\x1b[0m | \x1b[33;1m|\x1b[0m       setValue(\'accessibility_features\', newFeatures)\n \x1b[2m 880\x1b[0m | \x1b[33;1m|\x1b[0m     }\n \x1b[2m 881\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 882\x1b[0m | \x1b[33;1m|\x1b[0m     return (\n \x1b[2m 883\x1b[0m | \x1b[33;1m|\x1b[0m       <div className="container mx-auto px-4 py-8">\n \x1b[2m 884\x1b[0m | \x1b[33;1m|\x1b[0m         {/* Header */}\n \x1b[2m 885\x1b[0m | \x1b[33;1m|\x1b[0m         <div className="flex items-center justify-between mb-8">\n \x1b[2m 886\x1b[0m | \x1b[33;1m|\x1b[0m           <div>\n \x1b[2m 887\x1b[0m | \x1b[33;1m|\x1b[0m             <h1 className="text-accessible-2xl font-bold text-secondary-800 mb-2">\n \x1b[2m 888\x1b[0m | \x1b[33;1m|\x1b[0m               Painel Administrativo\n \x1b[2m 889\x1b[0m | \x1b[33;1m|\x1b[0m             </h1>\n \x1b[2m 890\x1b[0m | \x1b[33;1m|\x1b[0m             <p className="text-accessible-base text-secondary-600">\n \x1b[2m 891\x1b[0m | \x1b[33;1m|\x1b[0m               Gerencie estabelecimentos autism-friendly\n \x1b[2m 892\x1b[0m | \x1b[33;1m|\x1b[0m             </p>\n \x1b[2m 893\x1b[0m | \x1b[33;1m|\x1b[0m           </div>\n \x1b[2m 894\x1b[0m | \x1b[33;1m|\x1b[0m           <button\n \x1b[2m 895\x1b[0m | \x1b[33;1m|\x1b[0m             onClick={() => setShowForm(true)}\n \x1b[2m 896\x1b[0m | \x1b[33;1m|\x1b[0m             className="btn btn-primary flex items-center"\n \x1b[2m 897\x1b[0m | \x1b[33;1m|\x1b[0m           >\n \x1b[2m 898\x1b[0m | \x1b[33;1m|\x1b[0m             <PlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m 899\x1b[0m | \x1b[33;1m|\x1b[0m             Novo Estabelecimento\n \x1b[2m 900\x1b[0m | \x1b[33;1m|\x1b[0m           </button>\n \x1b[2m 901\x1b[0m | \x1b[33;1m|\x1b[0m         </div>\n \x1b[2m 902\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 903\x1b[0m | \x1b[33;1m|\x1b[0m         {/* Form Modal */}\n \x1b[2m 904\x1b[0m | \x1b[33;1m|\x1b[0m         {showForm && (\n \x1b[2m 905\x1b[0m | \x1b[33;1m|\x1b[0m           <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">\n \x1b[2m 906\x1b[0m | \x1b[33;1m|\x1b[0m             <div className="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">\n \x1b[2m 907\x1b[0m | \x1b[33;1m|\x1b[0m               <div className="p-6">\n \x1b[2m 908\x1b[0m | \x1b[33;1m|\x1b[0m                 <div className="flex items-center justify-between mb-6">\n \x1b[2m 909\x1b[0m | \x1b[33;1m|\x1b[0m                   <h2 className="text-accessible-xl font-semibold text-secondary-800">\n \x1b[2m 910\x1b[0m | \x1b[33;1m|\x1b[0m                     {editingId ? \'Editar Estabelecimento\' : \'Novo Estabelecimento\'}\n \x1b[2m 911\x1b[0m | \x1b[33;1m|\x1b[0m                   </h2>\n \x1b[2m 912\x1b[0m | \x1b[33;1m|\x1b[0m                   <button\n \x1b[2m 913\x1b[0m | \x1b[33;1m|\x1b[0m                     onClick={handleCancel}\n \x1b[2m 914\x1b[0m | \x1b[33;1m|\x1b[0m                     className="p-2 hover:bg-secondary-100 rounded-lg"\n \x1b[2m 915\x1b[0m | \x1b[33;1m|\x1b[0m                   >\n \x1b[2m 916\x1b[0m | \x1b[33;1m|\x1b[0m                     <XMarkIcon className="w-6 h-6 text-secondary-600" />\n \x1b[2m 917\x1b[0m | \x1b[33;1m|\x1b[0m                   </button>\n \x1b[2m 918\x1b[0m | \x1b[33;1m|\x1b[0m                 </div>\n \x1b[2m 919\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 920\x1b[0m | \x1b[33;1m|\x1b[0m                 <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">\n \x1b[2m 921\x1b[0m | \x1b[33;1m|\x1b[0m                   {/* Basic Information */}\n \x1b[2m 922\x1b[0m | \x1b[33;1m|\x1b[0m                   <div className="grid grid-cols-1 md:grid-cols-2 gap-6">\n \x1b[2m 923\x1b[0m | \x1b[33;1m|\x1b[0m                     <div>\n \x1b[2m 924\x1b[0m | \x1b[33;1m|\x1b[0m                       <label className="label">Nome *</label>\n \x1b[2m 925\x1b[0m | \x1b[33;1m|\x1b[0m                       <input\n \x1b[2m 926\x1b[0m | \x1b[33;1m|\x1b[0m                         {...register(\'name\', { required: \'Nome \xe9 obrigat\xf3rio\' })}\n \x1b[2m 927\x1b[0m | \x1b[33;1m|\x1b[0m                         className="input"\n \x1b[2m 928\x1b[0m | \x1b[33;1m|\x1b[0m                         placeholder="Nome do estabelecimento"\n \x1b[2m 929\x1b[0m | \x1b[33;1m|\x1b[0m                       />\n \x1b[2m 930\x1b[0m | \x1b[33;1m|\x1b[0m                       {errors.name && (\n \x1b[2m 931\x1b[0m | \x1b[33;1m|\x1b[0m                         <p className="text-red-500 text-accessible-sm mt-1">{errors.name.message}</p>\n \x1b[2m 932\x1b[0m | \x1b[33;1m|\x1b[0m                       )}\n \x1b[2m 933\x1b[0m | \x1b[33;1m|\x1b[0m                     </div>\n \x1b[2m 934\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 935\x1b[0m | \x1b[33;1m|\x1b[0m                     <div>\n \x1b[2m 936\x1b[0m | \x1b[33;1m|\x1b[0m                       <label className="label">Tipo *</label>\n \x1b[2m 937\x1b[0m | \x1b[33;1m|\x1b[0m                       <select\n \x1b[2m 938\x1b[0m | \x1b[33;1m|\x1b[0m                         {...register(\'type\', { required: \'Tipo \xe9 obrigat\xf3rio\' })}\n \x1b[2m 939\x1b[0m | \x1b[33;1m|\x1b[0m                         className="input"\n \x1b[2m 940\x1b[0m | \x1b[33;1m|\x1b[0m                       >\n \x1b[2m 941\x1b[0m | \x1b[33;1m|\x1b[0m                         <option value="">Selecione o tipo</option>\n \x1b[2m 942\x1b[0m | \x1b[33;1m|\x1b[0m                         {Object.entries(ESTABLISHMENT_TYPES).map(([value, label]) => (\n \x1b[2m 943\x1b[0m | \x1b[33;1m|\x1b[0m                           <option key={value} value={value}>{label}</option>\n \x1b[2m 944\x1b[0m | \x1b[33;1m|\x1b[0m                         ))}\n \x1b[2m 945\x1b[0m | \x1b[33;1m|\x1b[0m                       </select>\n \x1b[2m 946\x1b[0m | \x1b[33;1m|\x1b[0m                       {errors.type && (\n \x1b[2m 947\x1b[0m | \x1b[33;1m|\x1b[0m                         <p className="text-red-500 text-accessible-sm mt-1">{errors.type.message}</p>\n \x1b[2m 948\x1b[0m | \x1b[33;1m|\x1b[0m                       )}\n \x1b[2m 949\x1b[0m | \x1b[33;1m|\x1b[0m                     </div>\n \x1b[2m 950\x1b[0m | \x1b[33;1m|\x1b[0m                   </div>\n \x1b[2m 951\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 952\x1b[0m | \x1b[33;1m|\x1b[0m                   <div>\n \x1b[2m 953\x1b[0m | \x1b[33;1m|\x1b[0m                     <label className="label">Descri\xe7\xe3o *</label>\n \x1b[2m 954\x1b[0m | \x1b[33;1m|\x1b[0m                     <textarea\n \x1b[2m 955\x1b[0m | \x1b[33;1m|\x1b[0m                       {...register(\'description\', { required: \'Descri\xe7\xe3o \xe9 obrigat\xf3ria\' })}\n \x1b[2m 956\x1b[0m | \x1b[33;1m|\x1b[0m                       className="input"\n \x1b[2m 957\x1b[0m | \x1b[33;1m|\x1b[0m                       rows={3}\n \x1b[2m 958\x1b[0m | \x1b[33;1m|\x1b[0m                       placeholder="Descri\xe7\xe3o detalhada do estabelecimento"\n \x1b[2m 959\x1b[0m | \x1b[33;1m|\x1b[0m                     />\n \x1b[2m 960\x1b[0m | \x1b[33;1m|\x1b[0m                     {errors.description && (\n \x1b[2m 961\x1b[0m | \x1b[33;1m|\x1b[0m                       <p className="text-red-500 text-accessible-sm mt-1">{errors.description.message}</p>\n \x1b[2m 962\x1b[0m | \x1b[33;1m|\x1b[0m                     )}\n \x1b[2m 963\x1b[0m | \x1b[33;1m|\x1b[0m                   </div>\n \x1b[2m 964\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 965\x1b[0m | \x1b[33;1m|\x1b[0m                   <div>\n \x1b[2m 966\x1b[0m | \x1b[33;1m|\x1b[0m                     <label className="label">Endere\xe7o *</label>\n \x1b[2m 967\x1b[0m | \x1b[33;1m|\x1b[0m                     <input\n \x1b[2m 968\x1b[0m | \x1b[33;1m|\x1b[0m                       {...register(\'address\', { required: \'Endere\xe7o \xe9 obrigat\xf3rio\' })}\n \x1b[2m 969\x1b[0m | \x1b[33;1m|\x1b[0m                       className="input"\n \x1b[2m 970\x1b[0m | \x1b[33;1m|\x1b[0m                       placeholder="Endere\xe7o completo"\n \x1b[2m 971\x1b[0m | \x1b[33;1m|\x1b[0m                     />\n \x1b[2m 972\x1b[0m | \x1b[33;1m|\x1b[0m                     {errors.address && (\n \x1b[2m 973\x1b[0m | \x1b[33;1m|\x1b[0m                       <p className="text-red-500 text-accessible-sm mt-1">{errors.address.message}</p>\n \x1b[2m 974\x1b[0m | \x1b[33;1m|\x1b[0m                     )}\n \x1b[2m 975\x1b[0m | \x1b[33;1m|\x1b[0m                   </div>\n \x1b[2m 976\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m 977\x1b[0m | \x1b[33;1m|\x1b[0m                   {/* Coordinates */}\n \x1b[2m 978\x1b[0m | \x1b[33;1m|\x1b[0m                   <div className="grid grid-cols-1 md:grid-cols-2 gap-6">\n \x1b[2m 979\x1b[0m | \x1b[33;1m|\x1b[0m                     <div>\n \x1b[2m 980\x1b[0m | \x1b[33;1m|\x1b[0m                       <label className="label">Latitude</label>\n \x1b[2m 981\x1b[0m | \x1b[33;1m|\x1b[0m                       <input\n \x1b[2m 982\x1b[0m | \x1b[33;1m|\x1b[0m                         {...register(\'coordinates.lat\')}\n \x1b[2m 983\x1b[0m | \x1b[33;1m|\x1b[0m                         type="number"\n \x1b[2m 984\x1b[0m | \x1b[33;1m|\x1b[0m                         step="any"\n \x1b[2m 985\x1b[0m | \x1b[33;1m|\x1b[0m                         className="input"\n \x1b[2m 986\x1b[0m | \x1b[33;1m|\x1b[0m                         placeholder="37.0"\n \x1b[2m 987\x1b[0m | \x1b[33;1m|\x1b[0m                       />\n \x1b[2m 988\x1b[0m | \x1b[33;1m|\x1b[0m                     </div>\n \x1b[2m 989\x1b[0m | \x1b[33;1m|\x1b[0m                     <div>\n \x1b[2m 990\x1b[0m | \x1b[33;1m|\x1b[0m                       <label className="label">Longitude</label>\n \x1b[2m 991\x1b[0m | \x1b[33;1m|\x1b[0m                       <input\n \x1b[2m 992\x1b[0m | \x1b[33;1m|\x1b[0m                         {...register(\'coordinates.lng\')}\n \x1b[2m 993\x1b[0m | \x1b[33;1m|\x1b[0m                         type="number"\n \x1b[2m 994\x1b[0m | \x1b[33;1m|\x1b[0m                         step="any"\n \x1b[2m 995\x1b[0m | \x1b[33;1m|\x1b[0m                         className="input"\n \x1b[2m 996\x1b[0m | \x1b[33;1m|\x1b[0m                         placeholder="-8.0"\n \x1b[2m 997\x1b[0m | \x1b[33;1m|\x1b[0m                       />\n \x1b[2m 998\x1b[0m | \x1b[33;1m|\x1b[0m                     </div>\n \x1b[2m 999\x1b[0m | \x1b[33;1m|\x1b[0m                   </div>\n \x1b[2m1000\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m1001\x1b[0m | \x1b[33;1m|\x1b[0m                   {/* Certification */}\n \x1b[2m1002\x1b[0m | \x1b[33;1m|\x1b[0m                   <div>\n \x1b[2m1003\x1b[0m | \x1b[33;1m|\x1b[0m                     <label className="flex items-center">\n \x1b[2m1004\x1b[0m | \x1b[33;1m|\x1b[0m                       <input\n \x1b[2m1005\x1b[0m | \x1b[33;1m|\x1b[0m                         {...register(\'certified_autism_friendly\')}\n \x1b[2m1006\x1b[0m | \x1b[33;1m|\x1b[0m                         type="checkbox"\n \x1b[2m1007\x1b[0m | \x1b[33;1m|\x1b[0m                         className="mr-3 w-4 h-4 text-primary-600 rounded focus:ring-primary-500"\n \x1b[2m1008\x1b[0m | \x1b[33;1m|\x1b[0m                       />\n \x1b[2m1009\x1b[0m | \x1b[33;1m|\x1b[0m                       <ShieldCheckIcon className="w-5 h-5 text-green-600 mr-2" />\n \x1b[2m1010\x1b[0m | \x1b[33;1m|\x1b[0m                       <span className="label mb-0">Certificado Autism Friendly</span>\n \x1b[2m1011\x1b[0m | \x1b[33;1m|\x1b[0m                     </label>\n \x1b[2m1012\x1b[0m | \x1b[33;1m|\x1b[0m                   </div>\n \x1b[2m1013\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m1014\x1b[0m | \x1b[33;1m|\x1b[0m                   {/* Accessibility Features */}\n \x1b[2m1015\x1b[0m | \x1b[33;1m|\x1b[0m                   <div>\n \x1b[2m1016\x1b[0m | \x1b[33;1m|\x1b[0m                     <label className="label">Recursos de Acessibilidade</label>\n \x1b[2m1017\x1b[0m | \x1b[33;1m|\x1b[0m                     <div className="grid grid-cols-2 md:grid-cols-3 gap-3">\n \x1b[2m1018\x1b[0m | \x1b[33;1m|\x1b[0m                       {Object.entries(ACCESSIBILITY_FEATURES).map(([feature, label]) => (\n \x1b[2m1019\x1b[0m | \x1b[33;1m|\x1b[0m                         <label key={feature} className="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-secondary-50">\n \x1b[2m1020\x1b[0m | \x1b[33;1m|\x1b[0m                           <input\n \x1b[2m1021\x1b[0m | \x1b[33;1m|\x1b[0m                             type="checkbox"\n \x1b[2m1022\x1b[0m | \x1b[33;1m|\x1b[0m                             checked={watch(\'accessibility_features\')?.includes(feature) || false}\n \x1b[2m1023\x1b[0m | \x1b[33;1m|\x1b[0m                             onChange={() => handleFeatureToggle(feature)}\n \x1b[2m1024\x1b[0m | \x1b[33;1m|\x1b[0m                             className="mr-3 w-4 h-4 text-primary-600 rounded focus:ring-primary-500"\n \x1b[2m1025\x1b[0m | \x1b[33;1m|\x1b[0m                           />\n \x1b[2m1026\x1b[0m | \x1b[33;1m|\x1b[0m                           <span className="text-accessible-sm">{label}</span>\n \x1b[2m1027\x1b[0m | \x1b[33;1m|\x1b[0m                         </label>\n \x1b[2m1028\x1b[0m | \x1b[33;1m|\x1b[0m                       ))}\n \x1b[2m1029\x1b[0m | \x1b[33;1m|\x1b[0m                     </div>\n \x1b[2m1030\x1b[0m | \x1b[33;1m|\x1b[0m                   </div>\n \x1b[2m1031\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m1032\x1b[0m | \x1b[33;1m|\x1b[0m                   {/* Contact Information */}\n \x1b[2m1033\x1b[0m | \x1b[33;1m|\x1b[0m                   <div>\n \x1b[2m1034\x1b[0m | \x1b[33;1m|\x1b[0m                     <label className="label">Informa\xe7\xf5es de Contato</label>\n \x1b[2m1035\x1b[0m | \x1b[33;1m|\x1b[0m                     <div className="grid grid-cols-1 md:grid-cols-3 gap-4">\n \x1b[2m1036\x1b[0m | \x1b[33;1m|\x1b[0m                       <input\n \x1b[2m1037\x1b[0m | \x1b[33;1m|\x1b[0m                         {...register(\'contact_info.phone\')}\n \x1b[2m1038\x1b[0m | \x1b[33;1m|\x1b[0m                         className="input"\n \x1b[2m1039\x1b[0m | \x1b[33;1m|\x1b[0m                         placeholder="Telefone"\n \x1b[2m1040\x1b[0m | \x1b[33;1m|\x1b[0m                       />\n \x1b[2m1041\x1b[0m | \x1b[33;1m|\x1b[0m                       <input\n \x1b[2m1042\x1b[0m | \x1b[33;1m|\x1b[0m                         {...register(\'contact_info.email\')}\n \x1b[2m1043\x1b[0m | \x1b[33;1m|\x1b[0m                         type="email"\n \x1b[2m1044\x1b[0m | \x1b[33;1m|\x1b[0m                         className="input"\n \x1b[2m1045\x1b[0m | \x1b[33;1m|\x1b[0m                         placeholder="Email"\n \x1b[2m1046\x1b[0m | \x1b[33;1m|\x1b[0m                       />\n \x1b[2m1047\x1b[0m | \x1b[33;1m|\x1b[0m                       <input\n \x1b[2m1048\x1b[0m | \x1b[33;1m|\x1b[0m                         {...register(\'contact_info.website\')}\n \x1b[2m1049\x1b[0m | \x1b[33;1m|\x1b[0m                         className="input"\n \x1b[2m1050\x1b[0m | \x1b[33;1m|\x1b[0m                         placeholder="Website"\n \x1b[2m1051\x1b[0m | \x1b[33;1m|\x1b[0m                       />\n \x1b[2m1052\x1b[0m | \x1b[33;1m|\x1b[0m                     </div>\n \x1b[2m1053\x1b[0m | \x1b[33;1m|\x1b[0m                   </div>\n \x1b[2m1054\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m1055\x1b[0m | \x1b[33;1m|\x1b[0m                   {/* Opening Hours */}\n \x1b[2m1056\x1b[0m | \x1b[33;1m|\x1b[0m                   <div>\n \x1b[2m1057\x1b[0m | \x1b[33;1m|\x1b[0m                     <label className="label">Hor\xe1rios de Funcionamento</label>\n \x1b[2m1058\x1b[0m | \x1b[33;1m|\x1b[0m                     <div className="grid grid-cols-1 md:grid-cols-2 gap-4">\n \x1b[2m1059\x1b[0m | \x1b[33;1m|\x1b[0m                       {Object.entries(DAYS_OF_WEEK).map(([day, label]) => (\n \x1b[2m1060\x1b[0m | \x1b[33;1m|\x1b[0m                         <div key={day} className="flex items-center space-x-2">\n \x1b[2m1061\x1b[0m | \x1b[33;1m|\x1b[0m                           <span className="w-24 text-accessible-sm">{label}:</span>\n \x1b[2m1062\x1b[0m | \x1b[33;1m|\x1b[0m                           <input\n \x1b[2m1063\x1b[0m | \x1b[33;1m|\x1b[0m                             {...register(`opening_hours.${day}` as const)}\n \x1b[2m1064\x1b[0m | \x1b[33;1m|\x1b[0m                             className="input flex-1"\n \x1b[2m1065\x1b[0m | \x1b[33;1m|\x1b[0m                             placeholder="09:00-18:00"\n \x1b[2m1066\x1b[0m | \x1b[33;1m|\x1b[0m                           />\n \x1b[2m1067\x1b[0m | \x1b[33;1m|\x1b[0m                         </div>\n \x1b[2m1068\x1b[0m | \x1b[33;1m|\x1b[0m                       ))}\n \x1b[2m1069\x1b[0m | \x1b[33;1m|\x1b[0m                     </div>\n \x1b[2m1070\x1b[0m | \x1b[33;1m|\x1b[0m                   </div>\n \x1b[2m1071\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m1072\x1b[0m | \x1b[33;1m|\x1b[0m                   {/* Images */}\n \x1b[2m1073\x1b[0m | \x1b[33;1m|\x1b[0m                   <div>\n \x1b[2m1074\x1b[0m | \x1b[33;1m|\x1b[0m                     <label className="label">Imagens</label>\n \x1b[2m1075\x1b[0m | \x1b[33;1m|\x1b[0m                     <div className="border-2 border-dashed border-secondary-300 rounded-lg p-6">\n \x1b[2m1076\x1b[0m | \x1b[33;1m|\x1b[0m                       <input\n \x1b[2m1077\x1b[0m | \x1b[33;1m|\x1b[0m                         type="file"\n \x1b[2m1078\x1b[0m | \x1b[33;1m|\x1b[0m                         multiple\n \x1b[2m1079\x1b[0m | \x1b[33;1m|\x1b[0m                         accept="image/*"\n \x1b[2m1080\x1b[0m | \x1b[33;1m|\x1b[0m                         onChange={handleImageUpload}\n \x1b[2m1081\x1b[0m | \x1b[33;1m|\x1b[0m                         className="hidden"\n \x1b[2m1082\x1b[0m | \x1b[33;1m|\x1b[0m                         id="image-upload"\n \x1b[2m1083\x1b[0m | \x1b[33;1m|\x1b[0m                       />\n \x1b[2m1084\x1b[0m | \x1b[33;1m|\x1b[0m                       <label\n \x1b[2m1085\x1b[0m | \x1b[33;1m|\x1b[0m                         htmlFor="image-upload"\n \x1b[2m1086\x1b[0m | \x1b[33;1m|\x1b[0m                         className="flex flex-col items-center cursor-pointer"\n \x1b[2m1087\x1b[0m | \x1b[33;1m|\x1b[0m                       >\n \x1b[2m1088\x1b[0m | \x1b[33;1m|\x1b[0m                         <PhotoIcon className="w-12 h-12 text-secondary-400 mb-2" />\n \x1b[2m1089\x1b[0m | \x1b[33;1m|\x1b[0m                         <span className="text-accessible-base text-secondary-600">\n \x1b[2m1090\x1b[0m | \x1b[33;1m|\x1b[0m                           Clique para selecionar imagens\n \x1b[2m1091\x1b[0m | \x1b[33;1m|\x1b[0m                         </span>\n \x1b[2m1092\x1b[0m | \x1b[33;1m|\x1b[0m                       </label>\n \x1b[2m1093\x1b[0m | \x1b[33;1m|\x1b[0m                     </div>\n \x1b[2m1094\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m1095\x1b[0m | \x1b[33;1m|\x1b[0m                     {/* Selected Images Preview */}\n \x1b[2m1096\x1b[0m | \x1b[33;1m|\x1b[0m                     {selectedImages.length > 0 && (\n \x1b[2m1097\x1b[0m | \x1b[33;1m|\x1b[0m                       <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">\n \x1b[2m1098\x1b[0m | \x1b[33;1m|\x1b[0m                         {selectedImages.map((image, index) => (\n \x1b[2m1099\x1b[0m | \x1b[33;1m|\x1b[0m                           <div key={index} className="relative">\n \x1b[2m1100\x1b[0m | \x1b[33;1m|\x1b[0m                             <img\n \x1b[2m1101\x1b[0m | \x1b[33;1m|\x1b[0m                               src={`data:image/jpeg;base64,${image}`}\n \x1b[2m1102\x1b[0m | \x1b[33;1m|\x1b[0m                               alt={`Preview ${index + 1}`}\n \x1b[2m1103\x1b[0m | \x1b[33;1m|\x1b[0m                               className="w-full h-24 object-cover rounded-lg"\n \x1b[2m1104\x1b[0m | \x1b[33;1m|\x1b[0m                             />\n \x1b[2m1105\x1b[0m | \x1b[33;1m|\x1b[0m                             <button\n \x1b[2m1106\x1b[0m | \x1b[33;1m|\x1b[0m                               type="button"\n \x1b[2m1107\x1b[0m | \x1b[33;1m|\x1b[0m                               onClick={() => removeImage(index)}\n \x1b[2m1108\x1b[0m | \x1b[33;1m|\x1b[0m                               className="absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600"\n \x1b[2m1109\x1b[0m | \x1b[33;1m|\x1b[0m                             >\n \x1b[2m1110\x1b[0m | \x1b[33;1m|\x1b[0m                               <XMarkIcon className="w-4 h-4" />\n \x1b[2m1111\x1b[0m | \x1b[33;1m|\x1b[0m                             </button>\n \x1b[2m1112\x1b[0m | \x1b[33;1m|\x1b[0m                           </div>\n \x1b[2m1113\x1b[0m | \x1b[33;1m|\x1b[0m                         ))}\n \x1b[2m1114\x1b[0m | \x1b[33;1m|\x1b[0m                       </div>\n \x1b[2m1115\x1b[0m | \x1b[33;1m|\x1b[0m                     )}\n \x1b[2m1116\x1b[0m | \x1b[33;1m|\x1b[0m                   </div>\n \x1b[2m1117\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m1118\x1b[0m | \x1b[33;1m|\x1b[0m                   {/* Form Actions */}\n \x1b[2m1119\x1b[0m | \x1b[33;1m|\x1b[0m                   <div className="flex justify-end space-x-4 pt-6 border-t">\n \x1b[2m1120\x1b[0m | \x1b[33;1m|\x1b[0m                     <button\n \x1b[2m1121\x1b[0m | \x1b[33;1m|\x1b[0m                       type="button"\n \x1b[2m1122\x1b[0m | \x1b[33;1m|\x1b[0m                       onClick={handleCancel}\n \x1b[2m1123\x1b[0m | \x1b[33;1m|\x1b[0m                       className="btn btn-secondary"\n \x1b[2m1124\x1b[0m | \x1b[33;1m|\x1b[0m                     >\n \x1b[2m1125\x1b[0m | \x1b[33;1m|\x1b[0m                       Cancelar\n \x1b[2m1126\x1b[0m | \x1b[33;1m|\x1b[0m                     </button>\n \x1b[2m1127\x1b[0m | \x1b[33;1m|\x1b[0m                     <button\n \x1b[2m1128\x1b[0m | \x1b[33;1m|\x1b[0m                       type="submit"\n \x1b[2m1129\x1b[0m | \x1b[33;1m|\x1b[0m                       disabled={loading}\n \x1b[2m1130\x1b[0m | \x1b[33;1m|\x1b[0m                       className="btn btn-primary flex items-center"\n \x1b[2m1131\x1b[0m | \x1b[33;1m|\x1b[0m                     >\n \x1b[2m1132\x1b[0m | \x1b[33;1m|\x1b[0m                       {loading ? (\n \x1b[2m1133\x1b[0m | \x1b[33;1m|\x1b[0m                         <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"></div>\n \x1b[2m1134\x1b[0m | \x1b[33;1m|\x1b[0m                       ) : (\n \x1b[2m1135\x1b[0m | \x1b[33;1m|\x1b[0m                         <PlusIcon className="w-5 h-5 mr-2" />\n \x1b[2m1136\x1b[0m | \x1b[33;1m|\x1b[0m                       )}\n \x1b[2m1137\x1b[0m | \x1b[33;1m|\x1b[0m                       {editingId ? \'Atualizar\' : \'Criar\'} Estabelecimento\n \x1b[2m1138\x1b[0m | \x1b[33;1m|\x1b[0m                     </button>\n \x1b[2m1139\x1b[0m | \x1b[33;1m|\x1b[0m                   </div>\n \x1b[2m1140\x1b[0m | \x1b[33;1m|\x1b[0m                 </form>\n \x1b[2m1141\x1b[0m | \x1b[33;1m|\x1b[0m               </div>\n \x1b[2m1142\x1b[0m | \x1b[33;1m|\x1b[0m             </div>\n \x1b[2m1143\x1b[0m | \x1b[33;1m|\x1b[0m           </div>\n \x1b[2m1144\x1b[0m | \x1b[33;1m|\x1b[0m         )}\n \x1b[2m1145\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m1146\x1b[0m | \x1b[33;1m|\x1b[0m         {/* Establishments List */}\n \x1b[2m1147\x1b[0m | \x1b[33;1m|\x1b[0m         <div className="space-y-4">\n \x1b[2m1148\x1b[0m | \x1b[33;1m|\x1b[0m           {establishments.map((establishment) => (\n \x1b[2m1149\x1b[0m | \x1b[33;1m|\x1b[0m             <div key={establishment.id} className="card hover:shadow-lg transition-shadow">\n \x1b[2m1150\x1b[0m | \x1b[33;1m|\x1b[0m               <div className="flex items-start justify-between">\n \x1b[2m1151\x1b[0m | \x1b[33;1m|\x1b[0m                 <div className="flex-1">\n \x1b[2m1152\x1b[0m | \x1b[33;1m|\x1b[0m                   <div className="flex items-center mb-2">\n \x1b[2m1153\x1b[0m | \x1b[33;1m|\x1b[0m                     <h3 className="text-accessible-lg font-semibold text-secondary-800 mr-3">\n \x1b[2m1154\x1b[0m | \x1b[33;1m|\x1b[0m                       {establishment.name}\n \x1b[2m1155\x1b[0m | \x1b[33;1m|\x1b[0m                     </h3>\n \x1b[2m1156\x1b[0m | \x1b[33;1m|\x1b[0m                     {establishment.certified_autism_friendly && (\n \x1b[2m1157\x1b[0m | \x1b[33;1m|\x1b[0m                       <ShieldCheckIcon className="w-5 h-5 text-green-600" />\n \x1b[2m1158\x1b[0m | \x1b[33;1m|\x1b[0m                     )}\n \x1b[2m1159\x1b[0m | \x1b[33;1m|\x1b[0m                     <span className="ml-2 bg-secondary-100 text-secondary-700 px-2 py-1 rounded text-accessible-sm">\n \x1b[2m1160\x1b[0m | \x1b[33;1m|\x1b[0m                       {ESTABLISHMENT_TYPES[establishment.type as keyof typeof ESTABLISHMENT_TYPES]}\n \x1b[2m1161\x1b[0m | \x1b[33;1m|\x1b[0m                     </span>\n \x1b[2m1162\x1b[0m | \x1b[33;1m|\x1b[0m                   </div>\n \x1b[2m1163\x1b[0m | \x1b[33;1m|\x1b[0m                   \n \x1b[2m1164\x1b[0m | \x1b[33;1m|\x1b[0m                   <p className="text-secondary-600 text-accessible-base mb-2 line-clamp-2">\n \x1b[2m1165\x1b[0m | \x1b[33;1m|\x1b[0m                     {establishment.description}\n \x1b[2m1166\x1b[0m | \x1b[33;1m|\x1b[0m                   </p>\n \x1b[2m1167\x1b[0m | \x1b[33;1m|\x1b[0m                   \n \x1b[2m1168\x1b[0m | \x1b[33;1m|\x1b[0m                   <div className="flex items-center text-accessible-sm text-secondary-500">\n \x1b[2m1169\x1b[0m | \x1b[33;1m|\x1b[0m                     <MapPinIcon className="w-4 h-4 mr-1" />\n \x1b[2m1170\x1b[0m | \x1b[33;1m|\x1b[0m                     {establishment.address}\n \x1b[2m1171\x1b[0m | \x1b[33;1m|\x1b[0m                   </div>\n \x1b[2m1172\x1b[0m | \x1b[33;1m|\x1b[0m                   \n \x1b[2m1173\x1b[0m | \x1b[33;1m|\x1b[0m                   {establishment.accessibility_features.length > 0 && (\n \x1b[2m1174\x1b[0m | \x1b[33;1m|\x1b[0m                     <div className="mt-2 flex flex-wrap gap-1">\n \x1b[2m1175\x1b[0m | \x1b[33;1m|\x1b[0m                       {establishment.accessibility_features.slice(0, 3).map((feature) => (\n \x1b[2m1176\x1b[0m | \x1b[33;1m|\x1b[0m                         <span\n \x1b[2m1177\x1b[0m | \x1b[33;1m|\x1b[0m                           key={feature}\n \x1b[2m1178\x1b[0m | \x1b[33;1m|\x1b[0m                           className="text-xs bg-autism-friendly text-secondary-700 px-2 py-1 rounded"\n \x1b[2m1179\x1b[0m | \x1b[33;1m|\x1b[0m                         >\n \x1b[2m1180\x1b[0m | \x1b[33;1m|\x1b[0m                           {ACCESSIBILITY_FEATURES[feature as keyof typeof ACCESSIBILITY_FEATURES] || feature}\n \x1b[2m1181\x1b[0m | \x1b[33;1m|\x1b[0m                         </span>\n \x1b[2m1182\x1b[0m | \x1b[33;1m|\x1b[0m                       ))}\n \x1b[2m1183\x1b[0m | \x1b[33;1m|\x1b[0m                       {establishment.accessibility_features.length > 3 && (\n \x1b[2m1184\x1b[0m | \x1b[33;1m|\x1b[0m                         <span className="text-xs text-secondary-500">\n \x1b[2m1185\x1b[0m | \x1b[33;1m|\x1b[0m                           +{establishment.accessibility_features.length - 3} mais\n \x1b[2m1186\x1b[0m | \x1b[33;1m|\x1b[0m                         </span>\n \x1b[2m1187\x1b[0m | \x1b[33;1m|\x1b[0m                       )}\n \x1b[2m1188\x1b[0m | \x1b[33;1m|\x1b[0m                     </div>\n \x1b[2m1189\x1b[0m | \x1b[33;1m|\x1b[0m                   )}\n \x1b[2m1190\x1b[0m | \x1b[33;1m|\x1b[0m                 </div>\n \x1b[2m1191\x1b[0m | \x1b[33;1m|\x1b[0m                 \n \x1b[2m1192\x1b[0m | \x1b[33;1m|\x1b[0m                 <div className="flex space-x-2 ml-4">\n \x1b[2m1193\x1b[0m | \x1b[33;1m|\x1b[0m                   <button\n \x1b[2m1194\x1b[0m | \x1b[33;1m|\x1b[0m                     onClick={() => handleEdit(establishment)}\n \x1b[2m1195\x1b[0m | \x1b[33;1m|\x1b[0m                     className="p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors"\n \x1b[2m1196\x1b[0m | \x1b[33;1m|\x1b[0m                   >\n \x1b[2m1197\x1b[0m | \x1b[33;1m|\x1b[0m                     <PencilIcon className="w-5 h-5" />\n \x1b[2m1198\x1b[0m | \x1b[33;1m|\x1b[0m                   </button>\n \x1b[2m1199\x1b[0m | \x1b[33;1m|\x1b[0m                   <button\n \x1b[2m1200\x1b[0m | \x1b[33;1m|\x1b[0m                     onClick={() => handleDelete(establishment.id!)}\n \x1b[2m1201\x1b[0m | \x1b[33;1m|\x1b[0m                     className="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"\n \x1b[2m1202\x1b[0m | \x1b[33;1m|\x1b[0m                   >\n \x1b[2m1203\x1b[0m | \x1b[33;1m|\x1b[0m                     <TrashIcon className="w-5 h-5" />\n \x1b[2m1204\x1b[0m | \x1b[33;1m|\x1b[0m                   </button>\n \x1b[2m1205\x1b[0m | \x1b[33;1m|\x1b[0m                 </div>\n \x1b[2m1206\x1b[0m | \x1b[33;1m|\x1b[0m               </div>\n \x1b[2m1207\x1b[0m | \x1b[33;1m|\x1b[0m             </div>\n \x1b[2m1208\x1b[0m | \x1b[33;1m|\x1b[0m           ))}\n \x1b[2m1209\x1b[0m | \x1b[33;1m|\x1b[0m         </div>\n \x1b[2m1210\x1b[0m | \x1b[33;1m|\x1b[0m   \n \x1b[2m1211\x1b[0m | \x1b[33;1m|\x1b[0m         {establishments.length === 0 && (\n \x1b[2m1212\x1b[0m | \x1b[33;1m|\x1b[0m           <div className="text-center py-12">\n \x1b[2m1213\x1b[0m | \x1b[33;1m|\x1b[0m             <MapPinIcon className="w-16 h-16 text-secondary-300 mx-auto mb-4" />\n \x1b[2m1214\x1b[0m | \x1b[33;1m|\x1b[0m             <h3 className="text-accessible-xl font-semibold text-secondary-600 mb-2">\n \x1b[2m1215\x1b[0m | \x1b[33;1m|\x1b[0m               Nenhum estabelecimento cadastrado\n \x1b[2m1216\x1b[0m | \x1b[33;1m|\x1b[0m             </h3>\n \x1b[2m1217\x1b[0m | \x1b[33;1m|\x1b[0m             <p className="text-accessible-base text-secondary-500 mb-4">\n \x1b[2m1218\x1b[0m | \x1b[33;1m|\x1b[0m               Comece criando seu primeiro estabelecimento autism-friendly\n \x1b[2m1219\x1b[0m | \x1b[33;1m|\x1b[0m             </p>\n \x1b[2m1220\x1b[0m | \x1b[33;1m|\x1b[0m             <button\n \x1b[2m1221\x1b[0m | \x1b[33;1m|\x1b[0m               onClick={() => setShowForm(true)}\n \x1b[2m1222\x1b[0m | \x1b[33;1m|\x1b[0m               className="btn btn-primary"\n \x1b[2m1223\x1b[0m | \x1b[33;1m|\x1b[0m             >\n \x1b[2m1224\x1b[0m | \x1b[33;1m|\x1b[0m               Criar Primeiro Estabelecimento\n \x1b[2m1225\x1b[0m | \x1b[33;1m|\x1b[0m             </button>\n \x1b[2m1226\x1b[0m | \x1b[33;1m|\x1b[0m           </div>\n \x1b[2m1227\x1b[0m | \x1b[33;1m|\x1b[0m         )}\n \x1b[2m1228\x1b[0m | \x1b[33;1m|\x1b[0m       </div>\n \x1b[2m1229\x1b[0m | \x1b[33;1m|\x1b[0m     )\n \x1b[2m1230\x1b[0m | \x1b[33;1m|\x1b[0m\x1b[33;1m-\x1b[0m\x1b[33;1m>\x1b[0m }\n      : \x1b[33;1m`\x1b[0m\x1b[33;1m---\x1b[0m\x1b[33;1m-\x1b[0m \x1b[33;1mexported more than once\x1b[0m\n      `----\n\nError: \n  \x1b[36m>\x1b[0m Exported identifiers must be unique\n')},5116:(m,b,x)=>{"use strict";x.r(b),x.d(b,{default:()=>r,metadata:()=>i});var e=x(9510),n=x(5317),s=x.n(n);x(5023);var a=x(9125);let t=(0,x(8570).createProxy)(String.raw`/app/frontend/src/components/Header.tsx#default`),i={title:"TEIA - Algarve Autism Friendly",description:"Turismo inclusivo para pessoas com Transtorno do Espectro do Autismo no Algarve",keywords:"autismo, turismo inclusivo, Algarve, acessibilidade, TEA"};function r({children:m}){return e.jsx("html",{lang:"pt",children:(0,e.jsxs)("body",{className:s().className,children:[e.jsx(t,{}),e.jsx("main",{className:"min-h-screen pt-16",children:m}),e.jsx(a.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#f8fafc",color:"#1e293b",fontSize:"16px",fontWeight:"500",padding:"16px"}}})]})})}},5023:()=>{}};var b=require("../../webpack-runtime.js");b.C(m);var x=m=>b(b.s=m),e=b.X(0,[185],()=>x(7412));module.exports=e})();