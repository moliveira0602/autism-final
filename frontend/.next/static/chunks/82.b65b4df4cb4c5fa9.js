(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[82],{82:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var r,s,a,l,i,c,o=n(7437),u=n(2265);let d=(0,u.createContext)(null),p=d.Provider;function m(){let e=(0,u.useContext)(d);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var x=n(759),f=n.n(x);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let v=(0,u.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:r,className:s,id:a,placeholder:l,style:i,whenReady:c,zoom:o,...d},m){let[f]=(0,u.useState)({className:s,id:a,style:i}),[v,b]=(0,u.useState)(null);(0,u.useImperativeHandle)(m,()=>v?.map??null,[v]);let j=(0,u.useCallback)(r=>{if(null!==r&&null===v){let s=new x.Map(r,d);null!=n&&null!=o?s.setView(n,o):null!=e&&s.fitBounds(e,t),null!=c&&s.whenReady(c),b(Object.freeze({__version:1,map:s}))}},[]);(0,u.useEffect)(()=>()=>{v?.map.remove()},[v]);let g=v?u.createElement(p,{value:v},r):l??null;return u.createElement("div",h({},f,{ref:j}),g)});var b=n(4887);function j(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function g(e,t){return null==t?function(t,n){let r=(0,u.useRef)();return r.current||(r.current=e(t,n)),r}:function(n,r){let s=(0,u.useRef)();s.current||(s.current=e(n,r));let a=(0,u.useRef)(n),{instance:l}=s.current;return(0,u.useEffect)(function(){a.current!==n&&(t(l,n,a.current),a.current=n)},[l,n,r]),s}}function y(e,t){let n=(0,u.useRef)(t);(0,u.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function N(e,t){let n=(0,u.useRef)();(0,u.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}function w(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}function C(e){return function(t){var n;let r=m(),s=e(w(t,r),r);return y(r.map,t.attribution),N(s.current,t.eventHandlers),n=s.current,(0,u.useEffect)(function(){return(r.layerContainer??r.map).addLayer(n.instance),function(){r.layerContainer?.removeLayer(n.instance),r.map.removeLayer(n.instance)}},[r,n]),s}}let D=(r=C(g(function({url:e,...t},n){return j(new x.TileLayer(e,w(t,n)),n)},function(e,t,n){!function(e,t,n){let{opacity:r,zIndex:s}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=s&&s!==n.zIndex&&e.setZIndex(s)}(e,t,n);let{url:r}=t;null!=r&&r!==n.url&&e.setUrl(r)})),(0,u.forwardRef)(function(e,t){let{instance:n}=r(e).current;return(0,u.useImperativeHandle)(t,()=>n),null})),k=(s=C(g(function({position:e,...t},n){var r;let s=new x.Marker(e,t);return j(s,(r={overlayContainer:s},Object.freeze({...n,...r})))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())})),(0,u.forwardRef)(function(e,t){let{instance:n,context:r}=s(e).current;return(0,u.useImperativeHandle)(t,()=>n),null==e.children?null:u.createElement(p,{value:r},e.children)})),E=(a=function(e,t){return j(new x.Popup(e,t.overlayContainer),t)},l=function(e,t,{position:n},r){(0,u.useEffect)(function(){let{instance:s}=e;function a(e){e.popup===s&&(s.update(),r(!0))}function l(e){e.popup===s&&r(!1)}return t.map.on({popupopen:a,popupclose:l}),null==t.overlayContainer?(null!=n&&s.setLatLng(n),s.openOn(t.map)):t.overlayContainer.bindPopup(s),function(){t.map.off({popupopen:a,popupclose:l}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(s)}},[e,t,r,n])},i=g(a),c=function(e,t){let n=m(),r=i(w(e,n),n);return y(n.map,e.attribution),N(r.current,e.eventHandlers),l(r.current,n,e,t),r},(0,u.forwardRef)(function(e,t){let[n,r]=(0,u.useState)(!1),{instance:s}=c(e,r).current;(0,u.useImperativeHandle)(t,()=>s),(0,u.useEffect)(function(){n&&s.update()},[s,n,e.children]);let a=s._contentNode;return a?(0,b.createPortal)(e.children,a):null}));var z=n(6422);n(5046),delete f().Icon.Default.prototype._getIconUrl,f().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});let F=(e,t)=>{let n={hotel:"#E11D48",restaurant:"#F59E0B",attraction:"#10B981",shop:"#8B5CF6",service:"#3B82F6",default:"#6B7280"},r=n[e]||n.default;return f().divIcon({html:'\n      <div style="\n        background-color: '.concat(r,';\n        border: 3px solid white;\n        border-radius: 50%;\n        width: 30px;\n        height: 30px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        box-shadow: 0 2px 6px rgba(0,0,0,0.3);\n        position: relative;\n      ">\n        <span style="color: white; font-size: 12px; font-weight: bold;">\n          ').concat("hotel"===e?"\uD83C\uDFE8":"restaurant"===e?"\uD83C\uDF7D️":"attraction"===e?"\uD83C\uDFAF":"shop"===e?"\uD83D\uDECD️":"service"===e?"\uD83C\uDFE2":"\uD83D\uDCCD","\n        </span>\n        ").concat(t?'<div style="position: absolute; top: -5px; right: -5px; background: gold; border-radius: 50%; width: 16px; height: 16px; display: flex; align-items: center; justify-content: center; font-size: 10px;">⭐</div>':"","\n      </div>\n    "),className:"custom-div-icon",iconSize:[30,30],iconAnchor:[15,30],popupAnchor:[0,-30]})};function I(e){let{establishments:t,onMarkerClick:n}=e,[r,s]=(0,u.useState)(!1),[a,l]=(0,u.useState)("compact");return((0,u.useEffect)(()=>{s(!0)},[]),r)?(0,o.jsxs)("div",{className:"w-full ".concat("compact"===a?"h-96 lg:h-[500px]":"h-screen"," relative transition-all duration-300"),children:[(0,o.jsxs)(v,{center:[37.0194,-7.9322],zoom:10,style:{height:"100%",width:"100%"},className:"z-10",children:[(0,o.jsx)(D,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.map(e=>(0,o.jsx)(k,{position:[e.coordinates.lat,e.coordinates.lng],icon:F(e.type,e.certified_autism_friendly),eventHandlers:{click:()=>n(e.id)},children:(0,o.jsx)(E,{className:"custom-popup",children:(0,o.jsxs)("div",{className:"p-2 min-w-[200px]",children:[(0,o.jsx)("h3",{className:"font-bold text-secondary-800 mb-2",children:e.name}),(0,o.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,o.jsxs)("p",{className:"text-secondary-600",children:[(0,o.jsx)("span",{className:"font-medium",children:"Tipo:"})," ",e.type]}),e.certified_autism_friendly&&(0,o.jsxs)("div",{className:"flex items-center text-autism-friendly font-medium",children:[(0,o.jsx)("span",{className:"mr-1",children:"⭐"}),"Certificado Autism Friendly"]}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"flex items-center",children:[1,2,3,4,5].map(t=>(0,o.jsx)("span",{className:"text-sm ".concat(t<=(e.rating_average||0)?"text-yellow-400":"text-secondary-300"),children:"⭐"},t))}),(0,o.jsxs)("span",{className:"text-xs text-secondary-500",children:["(",e.reviews_count||0," avalia\xe7\xf5es)"]})]}),(0,o.jsxs)("p",{className:"text-secondary-700 text-xs mt-2",children:[e.description.substring(0,100),"..."]})]}),(0,o.jsx)("button",{onClick:()=>n(e.id),className:"mt-3 w-full bg-primary-600 text-white px-3 py-1 rounded-md text-sm hover:bg-primary-700 transition-colors",children:"Ver Detalhes"})]})})},e.id))]}),(0,o.jsx)("div",{className:"absolute top-4 left-4 bg-white rounded-lg shadow-lg z-20",children:(0,o.jsx)("button",{onClick:()=>{l(e=>"compact"===e?"expanded":"compact")},className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-secondary-700 hover:bg-secondary-50 rounded-lg transition-colors","aria-label":"compact"===a?"Expandir mapa":"Compactar mapa",children:"compact"===a?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),(0,o.jsx)("span",{children:"Expandir Mapa"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 9l6 6m0-6l-6 6m12-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,o.jsx)("span",{children:"Compactar"})]})})}),(0,o.jsxs)("div",{className:"absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-lg shadow-lg p-3 z-20 max-w-xs",children:[(0,o.jsxs)("h4",{className:"font-bold text-secondary-800 mb-2 text-sm flex items-center",children:[(0,o.jsx)(z.Z,{className:"w-4 h-4 mr-1"}),"Estabelecimentos"]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{className:"text-base",children:"\uD83C\uDFE8"}),(0,o.jsx)("span",{children:"Hot\xe9is"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{className:"text-base",children:"\uD83C\uDF7D️"}),(0,o.jsx)("span",{children:"Restaurantes"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{className:"text-base",children:"\uD83C\uDFAF"}),(0,o.jsx)("span",{children:"Atra\xe7\xf5es"})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)("span",{className:"text-base",children:"\uD83D\uDECD️"}),(0,o.jsx)("span",{children:"Com\xe9rcio"})]})]}),(0,o.jsx)("div",{className:"mt-2 pt-2 border-t border-secondary-200",children:(0,o.jsxs)("div",{className:"flex items-center space-x-1 text-xs",children:[(0,o.jsx)("span",{className:"text-yellow-500",children:"⭐"}),(0,o.jsx)("span",{className:"text-autism-friendly font-medium",children:"Certificado Autism Friendly"})]})})]}),(0,o.jsx)("div",{className:"absolute top-4 right-4 bg-white/95 backdrop-blur-sm rounded-lg shadow-lg p-3 z-20 max-w-sm",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsxs)("p",{className:"text-xs text-secondary-600 mb-1",children:[(0,o.jsxs)("span",{className:"font-medium",children:[t.length," estabelecimentos"]})," no mapa"]}),(0,o.jsx)("p",{className:"text-xs text-secondary-500",children:"Clique nos marcadores para ver detalhes"})]})})]}):(0,o.jsx)("div",{className:"w-full h-96 flex items-center justify-center bg-secondary-100",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-secondary-600",children:"Carregando mapa..."})]})})}},5046:function(){}}]);