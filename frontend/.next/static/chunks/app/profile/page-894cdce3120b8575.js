(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{8607:function(e,s,r){Promise.resolve().then(r.bind(r,1380))},9376:function(e,s,r){"use strict";var i=r(5475);r.o(i,"useParams")&&r.d(s,{useParams:function(){return i.useParams}}),r.o(i,"useRouter")&&r.d(s,{useRouter:function(){return i.useRouter}})},1380:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return f}});var i=r(7437),a=r(2265),t=r(9501),l=r(9729),n=r(1442),o=r(3365),c=r(9064),d=r(9266),m=r(9295);let u={very_low:"Muito Baixo",low:"Baixo",moderate:"Moderado",high:"Alto",very_high:"Muito Alto"},p=["Verbal completa","Verbal limitada","Comunica\xe7\xe3o por gestos","Comunica\xe7\xe3o visual/cart\xf5es","Dispositivos de comunica\xe7\xe3o","N\xe3o verbal"],h=["Ru\xeddos altos","Multid\xf5es","Luzes piscantes","Texturas espec\xedficas","Mudan\xe7as de rotina","Ambientes desconhecidos","Cheiros fortes","Temperaturas extremas"],x=["Manh\xe3 cedo (6h-9h)","Manh\xe3 (9h-12h)","Tarde (12h-15h)","Final da tarde (15h-18h)","Noite (18h-21h)","Noite tardia (21h+)"];function f(){let[e,s]=(0,a.useState)(null),[r,f]=(0,a.useState)(!0),[g,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!0),{register:j,handleSubmit:_,setValue:N,watch:w,formState:{errors:E}}=(0,t.cI)();(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/users");if(e.ok){let r=await e.json();if(r&&r.length>0){let e=r[0];s(e),k(e)}else{let e={name:"",email:"",sensory_profile:{noise_sensitivity:"moderate",light_sensitivity:"low",crowd_tolerance:"high",communication_needs:"Verbal completa",specific_triggers:[],preferred_times:[]},language_preference:"pt"};s(e),k(e)}}else{console.error("Failed to load user profile:",e.statusText);let r={name:"",email:"",sensory_profile:{noise_sensitivity:"moderate",light_sensitivity:"low",crowd_tolerance:"high",communication_needs:"Verbal completa",specific_triggers:[],preferred_times:[]},language_preference:"pt"};s(r),k(r)}}catch(r){console.error("Error loading user profile:",r);let e={name:"",email:"",sensory_profile:{noise_sensitivity:"moderate",light_sensitivity:"low",crowd_tolerance:"high",communication_needs:"Verbal completa",specific_triggers:[],preferred_times:[]},language_preference:"pt"};s(e),k(e)}})()},[]);let k=e=>{N("name",e.name),N("email",e.email),N("sensory_profile.noise_sensitivity",e.sensory_profile.noise_sensitivity),N("sensory_profile.light_sensitivity",e.sensory_profile.light_sensitivity),N("sensory_profile.crowd_tolerance",e.sensory_profile.crowd_tolerance),N("sensory_profile.communication_needs",e.sensory_profile.communication_needs),N("sensory_profile.specific_triggers",e.sensory_profile.specific_triggers),N("sensory_profile.preferred_times",e.sensory_profile.preferred_times),N("language_preference",e.language_preference)},C=async r=>{b(!0);try{let i;if(y){if((i=(null==e?void 0:e.id)?await fetch("/api/users/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}):await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok){let e=await i.json();s(e),c.ZP.success("Suas informa\xe7\xf5es foram atualizadas com sucesso!")}else{let e=await i.text();console.error("Error saving profile:",e),c.ZP.error("Erro ao salvar perfil: "+i.statusText)}}else i=(null==e?void 0:e.id)?await fetch("/api/users/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}):await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(i&&i.ok){let e=await i.json();s(e),f(!1),c.ZP.success("Perfil salvo com sucesso!")}else i&&c.ZP.error("Erro ao salvar perfil")}catch(e){console.error("Error saving profile:",e),c.ZP.error("Erro ao salvar perfil")}finally{b(!1)}},M=e=>({very_low:"text-green-600 bg-green-50",low:"text-green-500 bg-green-50",moderate:"text-yellow-600 bg-yellow-50",high:"text-orange-600 bg-orange-50",very_high:"text-red-600 bg-red-50"})[e]||"text-gray-600 bg-gray-50",Z=e=>{let s=w("sensory_profile.specific_triggers")||[];N("sensory_profile.specific_triggers",s.includes(e)?s.filter(s=>s!==e):[...s,e])},S=e=>{let s=w("sensory_profile.preferred_times")||[];N("sensory_profile.preferred_times",s.includes(e)?s.filter(s=>s!==e):[...s,e])};return e?(0,i.jsxs)("div",{children:[(0,i.jsx)(m.Z,{}),(0,i.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl mt-16",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(l.Z,{className:"w-8 h-8 text-primary-600 mr-3"}),(0,i.jsx)("h1",{className:"text-accessible-2xl font-bold text-secondary-800",children:"Editar Meu Perfil"})]})}),(0,i.jsx)("p",{className:"text-accessible-base text-secondary-600",children:y?"Configure suas prefer\xeancias sensoriais para receber recomenda\xe7\xf5es personalizadas e encontrar estabelecimentos adequados \xe0s suas necessidades":"Configure suas prefer\xeancias sensoriais para receber recomenda\xe7\xf5es personalizadas"})]}),(0,i.jsxs)("form",{onSubmit:_(C),className:"space-y-8",children:[(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h2",{className:"text-accessible-xl font-semibold text-secondary-800 mb-4",children:"Informa\xe7\xf5es B\xe1sicas"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"label",children:"Nome"}),(0,i.jsx)("input",{...j("name",{required:!!y&&"Nome \xe9 obrigat\xf3rio"}),className:"input",disabled:!1,placeholder:"Nome completo"}),E.name&&(0,i.jsx)("p",{className:"text-red-500 text-accessible-sm mt-1",children:E.name.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"label",children:"Email"}),(0,i.jsx)("input",{...j("email",{required:!!y&&"Email \xe9 obrigat\xf3rio",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email inv\xe1lido"}}),type:"email",className:"input",disabled:!1,placeholder:"email@exemplo.com"}),E.email&&(0,i.jsx)("p",{className:"text-red-500 text-accessible-sm mt-1",children:E.email.message})]})]}),(0,i.jsxs)("div",{className:"mt-6",children:[(0,i.jsx)("label",{className:"label",children:"Idioma Preferido"}),(0,i.jsxs)("select",{...j("language_preference"),className:"input max-w-xs",disabled:!1,children:[(0,i.jsx)("option",{value:"pt",children:"\uD83C\uDDF5\uD83C\uDDF9 Portugu\xeas"}),(0,i.jsx)("option",{value:"en",children:"\uD83C\uDDEC\uD83C\uDDE7 English"})]})]})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h2",{className:"text-accessible-xl font-semibold text-secondary-800 mb-4",children:"Sensibilidades Sensoriais"}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"label",children:"Sensibilidade ao Ru\xeddo"}),(0,i.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:Object.entries(u).map(e=>{let[s,r]=e;return(0,i.jsxs)("label",{className:"flex flex-col items-center p-3 border rounded-lg cursor-pointer hover:bg-secondary-50",children:[(0,i.jsx)("input",{...j("sensory_profile.noise_sensitivity"),type:"radio",value:s,disabled:!1,className:"mb-2"}),(0,i.jsx)("div",{className:"sensory-indicator sensory-".concat(s)}),(0,i.jsx)("span",{className:"text-accessible-sm text-center",children:r})]},s)})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"label",children:"Sensibilidade \xe0 Luz"}),(0,i.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:Object.entries(u).map(e=>{let[s,r]=e;return(0,i.jsxs)("label",{className:"flex flex-col items-center p-3 border rounded-lg cursor-pointer hover:bg-secondary-50",children:[(0,i.jsx)("input",{...j("sensory_profile.light_sensitivity"),type:"radio",value:s,disabled:!1,className:"mb-2"}),(0,i.jsx)("div",{className:"sensory-indicator sensory-".concat(s)}),(0,i.jsx)("span",{className:"text-accessible-sm text-center",children:r})]},s)})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"label",children:"Toler\xe2ncia a Multid\xf5es"}),(0,i.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:Object.entries(u).map(e=>{let[s,r]=e;return(0,i.jsxs)("label",{className:"flex flex-col items-center p-3 border rounded-lg cursor-pointer hover:bg-secondary-50",children:[(0,i.jsx)("input",{...j("sensory_profile.crowd_tolerance"),type:"radio",value:s,disabled:!1,className:"mb-2"}),(0,i.jsx)("div",{className:"sensory-indicator sensory-".concat(s)}),(0,i.jsx)("span",{className:"text-accessible-sm text-center",children:r})]},s)})})]})]})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h2",{className:"text-accessible-xl font-semibold text-secondary-800 mb-4",children:"Necessidades de Comunica\xe7\xe3o"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"label",children:"Estilo de Comunica\xe7\xe3o"}),(0,i.jsx)("select",{...j("sensory_profile.communication_needs"),className:"input",disabled:!1,children:p.map(e=>(0,i.jsx)("option",{value:e,children:e},e))})]})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h2",{className:"text-accessible-xl font-semibold text-secondary-800 mb-4",children:"Gatilhos Espec\xedficos"}),(0,i.jsx)("p",{className:"text-accessible-base text-secondary-600 mb-4",children:"Elementos que podem causar desconforto ou ansiedade"}),(0,i.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:h.map(e=>{var s;return(0,i.jsxs)("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-secondary-50",children:[(0,i.jsx)("input",{type:"checkbox",checked:(null===(s=w("sensory_profile.specific_triggers"))||void 0===s?void 0:s.includes(e))||!1,onChange:()=>Z(e),disabled:!1,className:"mr-3 w-4 h-4 text-primary-600 rounded focus:ring-primary-500"}),(0,i.jsx)("span",{className:"text-accessible-sm",children:e})]},e)})})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h2",{className:"text-accessible-xl font-semibold text-secondary-800 mb-4",children:"Hor\xe1rios Preferidos"}),(0,i.jsx)("p",{className:"text-accessible-base text-secondary-600 mb-4",children:"Hor\xe1rios em que se sente mais confort\xe1vel para atividades"}),(0,i.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:x.map(e=>{var s;return(0,i.jsxs)("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-secondary-50",children:[(0,i.jsx)("input",{type:"checkbox",checked:(null===(s=w("sensory_profile.preferred_times"))||void 0===s?void 0:s.includes(e))||!1,onChange:()=>S(e),disabled:!1,className:"mr-3 w-4 h-4 text-primary-600 rounded focus:ring-primary-500"}),(0,i.jsx)("span",{className:"text-accessible-sm",children:e})]},e)})})]}),r&&(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsxs)("button",{type:"submit",disabled:g,className:"btn btn-primary flex items-center",children:[g?(0,i.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}):(0,i.jsx)(n.Z,{className:"w-5 h-5 mr-2"}),y?"Salvar Minhas Informa\xe7\xf5es":"Salvar Perfil"]})})]}),e&&(0,i.jsxs)("div",{className:"card mt-8 bg-gradient-to-r from-primary-50 to-autism-calm",children:[(0,i.jsxs)("h3",{className:"text-accessible-xl font-semibold text-secondary-800 mb-4 flex items-center",children:[(0,i.jsx)(o.Z,{className:"w-6 h-6 text-primary-600 mr-2"}),"Resumo do Perfil Sensorial Atual"]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium text-secondary-700 mb-2",children:"Sensibilidades"}),(0,i.jsxs)("div",{className:"space-y-1 text-accessible-sm",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"w-16",children:"Ru\xeddo:"}),(0,i.jsx)("span",{className:"px-2 py-1 rounded ".concat(M(e.sensory_profile.noise_sensitivity)),children:u[e.sensory_profile.noise_sensitivity]})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"w-16",children:"Luz:"}),(0,i.jsx)("span",{className:"px-2 py-1 rounded ".concat(M(e.sensory_profile.light_sensitivity)),children:u[e.sensory_profile.light_sensitivity]})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"w-16",children:"Multid\xe3o:"}),(0,i.jsx)("span",{className:"px-2 py-1 rounded ".concat(M(e.sensory_profile.crowd_tolerance)),children:u[e.sensory_profile.crowd_tolerance]})]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"font-medium text-secondary-700 mb-2",children:"Comunica\xe7\xe3o"}),(0,i.jsx)("p",{className:"text-accessible-sm text-secondary-600",children:e.sensory_profile.communication_needs})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h4",{className:"font-medium text-secondary-700 mb-2",children:["Gatilhos (",e.sensory_profile.specific_triggers.length,")"]}),(0,i.jsxs)("div",{className:"text-accessible-sm text-secondary-600",children:[e.sensory_profile.specific_triggers.length>0?e.sensory_profile.specific_triggers.slice(0,2).map(e=>(0,i.jsx)("div",{className:"bg-white px-2 py-1 rounded mb-1",children:e},e)):(0,i.jsx)("p",{children:"Nenhum gatilho especificado"}),e.sensory_profile.specific_triggers.length>2&&(0,i.jsxs)("p",{className:"text-secondary-500",children:["+",e.sensory_profile.specific_triggers.length-2," mais"]})]})]})]})]})]}),(0,i.jsx)(d.Z,{})]}):(0,i.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,i.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})})}},6503:function(e,s,r){"use strict";var i=r(2265);let a=i.forwardRef(function(e,s){let{title:r,titleId:a,...t}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),r?i.createElement("title",{id:a},r):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))});s.Z=a},4355:function(e,s,r){"use strict";var i=r(2265);let a=i.forwardRef(function(e,s){let{title:r,titleId:a,...t}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),r?i.createElement("title",{id:a},r):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))});s.Z=a},1442:function(e,s,r){"use strict";var i=r(2265);let a=i.forwardRef(function(e,s){let{title:r,titleId:a,...t}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),r?i.createElement("title",{id:a},r):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});s.Z=a},609:function(e,s,r){"use strict";var i=r(2265);let a=i.forwardRef(function(e,s){let{title:r,titleId:a,...t}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),r?i.createElement("title",{id:a},r):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))});s.Z=a},9778:function(e,s,r){"use strict";var i=r(2265);let a=i.forwardRef(function(e,s){let{title:r,titleId:a,...t}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),r?i.createElement("title",{id:a},r):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))});s.Z=a},9055:function(e,s,r){"use strict";var i=r(2265);let a=i.forwardRef(function(e,s){let{title:r,titleId:a,...t}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),r?i.createElement("title",{id:a},r):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))});s.Z=a},9453:function(e,s,r){"use strict";var i=r(2265);let a=i.forwardRef(function(e,s){let{title:r,titleId:a,...t}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),r?i.createElement("title",{id:a},r):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))});s.Z=a},7165:function(e,s,r){"use strict";var i=r(2265);let a=i.forwardRef(function(e,s){let{title:r,titleId:a,...t}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),r?i.createElement("title",{id:a},r):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))});s.Z=a}},function(e){e.O(0,[8,64,501,295,266,971,117,744],function(){return e(e.s=8607)}),_N_E=e.O()}]);